!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(e,t){return function(n){return e+n*t}},r=function(e,t){return function(n){return e+n*n*t}},o=[{uuid:"uuid-lemon",name:"Lemon",productionTime:1e3,revenueFn:i(1,.8),upgradeCostFn:r(1,.6),level:1,purchased:!0,price:0,hasManager:!1,managerPrice:100},{uuid:"uuid-ice-cream",name:"Ice cream",productionTime:3e3,revenueFn:i(10,5),upgradeCostFn:r(10,.6),level:1,purchased:!1,price:1,hasManager:!1,managerPrice:500},{uuid:"uuid-bicycle",name:"Bicycle",productionTime:1e4,revenueFn:i(20,10),upgradeCostFn:r(15,.6),level:1,purchased:!1,price:10,hasManager:!1,managerPrice:2e3},{uuid:"uuid-motor-bike",name:"Motor Bike",productionTime:36e5,revenueFn:i(30,15),upgradeCostFn:r(20,1),level:1,purchased:!1,price:50,hasManager:!1,managerPrice:4e3},{uuid:"uuid-car",name:"Car",productionTime:18e6,revenueFn:i(50,25),upgradeCostFn:r(40,2),level:1,purchased:!1,price:100,hasManager:!1,managerPrice:8e3}],a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u="capitalism-service-local-storage-key",s=function(){function e(){var e=this;this._itemConfigs=[],this._itemConfigListenersMap={},this._notifyItemConfigUpdated=function(t){e._itemConfigListenersMap[t.uuid]&&e._itemConfigListenersMap[t.uuid].forEach((function(e){e(t)}))},this._loadData=function(){var t=localStorage.getItem(u);if(t){var n=JSON.parse(t),i=[],r=0;n.itemConfigs.forEach((function(e){var t=o.find((function(t){return t.uuid===e.uuid})),u=a(a(a({},t),e),{productionStartAt:null});if(e.productionStartAt){u.productionStartAt=new Date(e.productionStartAt);var s=(new Date).getTime()-u.productionStartAt.getTime();if(u.hasManager){var c=Math.floor(s/u.productionTime);r+=c*u.revenueFn(u.level)}else{s>=u.productionTime&&u.productionStartAt.getTime()+u.productionTime>new Date(n.savedAt).getTime()&&(r+=u.revenueFn(u.level))}}i.push(u)})),e._itemConfigs=i,e._money=n.money+r}},this._saveData=function(){var t={itemConfigs:e._itemConfigs.map((function(e){return{uuid:e.uuid,level:e.level,purchased:e.purchased,hasManager:e.hasManager,productionStartAt:e.productionStartAt?e.productionStartAt.toISOString():null}})),money:e._money,savedAt:new Date};localStorage.setItem(u,JSON.stringify(t))},this.loadItemConfigs=function(){return e._itemConfigs},this.loadMoney=function(){return e._money},this.updateMoney=function(t){e._money=t},this.updateItemProducingTime=function(t,n){void 0===n&&(n=new Date),e._itemConfigs.find((function(e){return e.uuid===t})).productionStartAt=n},this.getItemConfigByUuid=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));return a({},n)},this.subscribeItemConfig=function(t,n){e._itemConfigListenersMap[t]||(e._itemConfigListenersMap[t]=[]),e._itemConfigListenersMap[t].push(n)},this.purchaseItem=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));n.purchased=!0,e._notifyItemConfigUpdated(n)},this.upgradeItem=function(t){e._itemConfigs.find((function(e){return e.uuid===t})).level+=1},this.hireManager=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));if(!n)throw new Error("There is no item config for "+n.name);if(n.hasManager)throw new Error("Already have a manager for "+n.name);n.hasManager=!0,e._notifyItemConfigUpdated(n)},this._itemConfigs=o,this._money=1e3,this._loadData(),window.onbeforeunload=function(){e._saveData()}}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(),c=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},l=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},h=function(){function e(e){var t=this;this._moneyListener=[],this._lock=!1,this._notifyMoneyChange=function(){t._capitalismService.updateMoney(t._currentMoney),t._moneyListener.forEach((function(e){return e(t._currentMoney)}))},this.getMoney=function(){return t._currentMoney.toFixed(2)},this.onAddMoney=function(e){t._currentMoney+=e,t._notifyMoneyChange()},this.subscribeMoney=function(e){t._moneyListener.push(e)},this.chargeMoney=function(e){return c(t,void 0,void 0,(function(){return l(this,(function(t){return this._lock?[2,!1]:(this._lock=!0,this._currentMoney<e?(this._lock=!1,[2,!1]):(this._currentMoney-=e,this._lock=!1,this._notifyMoneyChange(),[2,!0]))}))}))},this._capitalismService=s.getInstance(),this._currentMoney=this._capitalismService.loadMoney()}return e.getInstance=function(){return e._instance||(e._instance=new e(1e3)),e._instance},e}(),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},d=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},p=function(){function e(e,t,n){var i=this;this._isProducing=!1,this._currentProducing=null,this.updateConfig=function(e){if(i._itemConfig.name!==e.name)throw new Error("Service updates with different item config");i._itemConfig=e,i.renderRevenueAndUpgradeCost(),e.hasManager&&i.initializeManager()},this.initializeManager=function(){return m(i,void 0,void 0,(function(){var e,t,n,i=this;return d(this,(function(r){switch(r.label){case 0:return this._titleElem.onclick=null,this._titleElem.innerText=this._itemConfig.name+" (has manager)",this._itemConfig=this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid),e=new Date,t=0,this._currentProducing?[4,this._currentProducing]:[3,2];case 1:return r.sent(),[3,3];case 2:this._itemConfig.productionStartAt&&this._itemConfig.productionStartAt.getTime()+this._itemConfig.productionTime>e.getTime()&&(t=e.getTime()-this._itemConfig.productionStartAt.getTime()),r.label=3;case 3:return(n=function(){return m(i,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this._produceItem(t)];case 1:return e.sent(),t=0,[2,n()]}}))}))})(),[2]}}))}))},this._produceItem=function(e){return void 0===e&&(e=0),m(i,void 0,void 0,(function(){var t=this;return d(this,(function(n){return[2,new Promise((function(n){if(!t._isProducing){t._isProducing=!0,0===e&&t._capitalismService.updateItemProducingTime(t._itemConfig.uuid),t._progressElem.innerText=(e/1e3).toFixed(1)+" s";var i=setInterval((function(){e+=100,t._progressElem.innerText=(e/1e3).toFixed(1)+" s"}),100);setTimeout((function(){clearInterval(i),t._progressElem.innerText="",t._wallet.onAddMoney(t._revenue),t._isProducing=!1,n()}),t._itemConfig.productionTime-e)}}))]}))}))},this.handleUpgrade=function(){return m(i,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this._wallet.chargeMoney(this._upgradeCost)];case 1:return e.sent()?(this._capitalismService.upgradeItem(this._itemConfig.uuid),this._itemConfig=f({},this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid)),this.renderRevenueAndUpgradeCost(),this._revenue=this._itemConfig.revenueFn(this._itemConfig.level),this._upgradeCost=this._itemConfig.upgradeCostFn(this._itemConfig.level),[2]):[2]}}))}))},this.handleProduce=function(){i._currentProducing=i._produceItem()},this.getElement=function(){return i._element},this._itemConfig=f({},e),this._wallet=t,this._revenue=e.revenueFn(e.level),this._upgradeCost=e.upgradeCostFn(e.level),this._capitalismService=n,this._capitalismService.subscribeItemConfig(e.uuid,this.updateConfig),this._element=document.createElement("div"),this._element.className="item",this._element.id=this._itemConfig.name,this._titleElem=document.createElement("div"),this._titleElem.className="name",this._titleElem.innerText=this._itemConfig.name,this._titleElem.onclick=this.handleProduce;var r=document.createElement("div");r.className="production-time",r.innerText="take: "+(this._itemConfig.productionTime/1e3).toFixed(0)+" s",this._revenueElem=document.createElement("div"),this._revenueElem.className="revenue",this._upgradeCostElem=document.createElement("div"),this._upgradeCostElem.className="upgrade",this._upgradeCostElem.onclick=this.handleUpgrade,this._progressElem=document.createElement("div"),this._progressElem.className="progress",this._element.appendChild(this._titleElem),this._element.appendChild(this._revenueElem),this._element.appendChild(r),this._element.appendChild(this._upgradeCostElem),this._element.appendChild(this._progressElem),this._itemConfig.hasManager&&this.initializeManager(),this.renderRevenueAndUpgradeCost()}return e.prototype.renderRevenueAndUpgradeCost=function(){this._upgradeCostElem.innerText="upgrade: "+this._upgradeCost.toFixed(2),this._revenueElem.innerText="$ "+this._revenue.toFixed(2)},e}(),g=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},_=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v=function(e,t,n){var i=this;this._isPurchasing=!1,this.handlePurchase=function(){return g(i,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return this._isPurchasing?[2]:(this._isPurchasing=!0,[4,this._wallet.chargeMoney(this._itemConfig.price)]);case 1:return e.sent()?(this._isPurchasing=!1,this._onPurchased(),[2]):(this._isPurchasing=!1,[2])}}))}))},this.getElement=function(){return i._element},this._itemConfig=e,this._wallet=t,this._onPurchased=n,this._element=document.createElement("div"),this._element.className="item",this._element.onclick=this.handlePurchase;var r=document.createElement("div");r.className="purchase-text",r.innerText="purchase "+e.name+" for "+e.price.toFixed(2),this._element.appendChild(r)},y=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},C=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},b=function(e,t,n){var i=this;this.appendManagerElements=function(){i._capitalismService.loadItemConfigs().forEach((function(e){var t=document.createElement("div");t.className="hire-manager",e.hasManager?t.innerText="Hired Manager for "+e.name:t.innerText="Manager for "+e.name+" (cost $"+e.managerPrice+")",t.onclick=function(){return y(i,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return e.purchased?[4,this._wallet.chargeMoney(e.managerPrice)]:(alert("Please purchase item first"),[2]);case 1:return n.sent()?(this._capitalismService.hireManager(e.uuid),t.onclick=null,t.className+=" purchased",t.innerText="Hired Manager for "+e.name,[2]):[2]}}))}))},i._element.appendChild(t)}))},this.getElement=function(){return i._element},this._capitalismService=e,this._wallet=t,this._element=document.createElement("div"),this._element.className="hire-manager-wrapper";var r=document.createElement("button");r.innerText="Close",r.onclick=n,this._element.appendChild(r),this.appendManagerElements()},w=function(e,t){var n=this;void 0===e&&(e=s.getInstance()),void 0===t&&(t=h.getInstance()),this._element=null,this._totalMoneyElem=null,this._itemsWrapperElem=null,this._itemConfigs=[],this._items={},this._capitalismService=null,this._wallet=null,this.generateItem=function(e){return new p(e,n._wallet,n._capitalismService)},this.generatePurchaseItem=function(e){return new v(e,n._wallet,(function(){n._capitalismService.purchaseItem(e.uuid);var t=n._capitalismService.getItemConfigByUuid(e.uuid),i=n._items[e.uuid];i.itemConfig=t,n._items[e.uuid].item=new p(t,n._wallet,n._capitalismService),n._itemsWrapperElem.replaceChild(n._items[e.uuid].item.getElement(),n._itemsWrapperElem.childNodes[i.order])}))},this.renderItemWrapper=function(){var e=document.createElement("div");return n._capitalismService.loadItemConfigs().forEach((function(t,i){var r={itemConfig:t,order:i};if(t.purchased){var o=n.generateItem(t);r.item=o,e.appendChild(o.getElement())}else{var a=n.generatePurchaseItem(t);r.itemPurchase=a,e.appendChild(a.getElement())}n._items[t.uuid]=r})),e},this.renderTotalMoney=function(){var e=document.createElement("div");return e.className="total money",e.innerText="total: "+n._wallet.getMoney(),n._wallet.subscribeMoney((function(t){e.innerText="total: "+t.toFixed(2)})),e},this.renderHireManagerButton=function(){var e=document.createElement("button");return e.className="hire-manager-button",e.innerText="Hire Manager",e.onclick=function(){var e,t=new b(n._capitalismService,n._wallet,(function(){n._element.removeChild(e)}));e=t.getElement(),n._element.appendChild(e)},e},this.getElement=function(){return n._element},this._capitalismService=e,this._wallet=t,this._totalMoneyElem=this.renderTotalMoney(),this._itemsWrapperElem=this.renderItemWrapper(),this._element=document.createElement("div"),this._element.appendChild(this._totalMoneyElem),this._element.appendChild(this._itemsWrapperElem),this._element.appendChild(this.renderHireManagerButton())};!function(){console.log("==== Initializing start ====");var e=h.getInstance(),t=s.getInstance(),n=document.getElementById("app");if(!n)throw new Error("There is no #app element to attach game elements");var i=new w(t,e);n.appendChild(i.getElement()),console.log("==== Initialized ====")}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9XYWxsZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9JdGVtUHVyY2hhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSGlyZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRhaW5lcnMvQ2FwaXRhbGlzbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZW5lcmF0ZVJldmVudWVGbiIsImJhc2UiLCJpbmNyZWFzaW5nUmV2ZW51ZSIsImxldmVsIiwiZ2VuZXJhdGVVcGdyYWRlQ29zdEZuIiwiaW5jcmVhc2luZ1JhdGlvIiwiaXRlbUNvbmZpZ3MiLCJ1dWlkIiwicHJvZHVjdGlvblRpbWUiLCJyZXZlbnVlRm4iLCJ1cGdyYWRlQ29zdEZuIiwicHVyY2hhc2VkIiwicHJpY2UiLCJoYXNNYW5hZ2VyIiwibWFuYWdlclByaWNlIiwiU1RPUkVfS0VZIiwiX2l0ZW1Db25maWdzIiwiX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXAiLCJfbm90aWZ5SXRlbUNvbmZpZ1VwZGF0ZWQiLCJpdGVtQ29uZmlnIiwiZm9yRWFjaCIsImZuIiwiX2xvYWREYXRhIiwianNvbkRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmVEYXRhIiwiSlNPTiIsInBhcnNlIiwibG9hZGVkSXRlbUNvbmZpZ3MiLCJhZGRpdGlvbmFsTW9uZXkiLCJzdG9yZWRJdGVtQ29uZmlnIiwiaW5pdGlhbEl0ZW1Db25maWciLCJmaW5kIiwicHJvZHVjdGlvblN0YXJ0QXQiLCJEYXRlIiwidGltZURpZmYiLCJnZXRUaW1lIiwicHJvZHVjZWRBbW91bnQiLCJNYXRoIiwiZmxvb3IiLCJzYXZlZEF0IiwicHVzaCIsIl9tb25leSIsIm1vbmV5IiwiX3NhdmVEYXRhIiwic3RvcmVkRGF0YSIsIm1hcCIsInRvSVNPU3RyaW5nIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImxvYWRJdGVtQ29uZmlncyIsImxvYWRNb25leSIsInVwZGF0ZU1vbmV5IiwidXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUiLCJpdGVtVXVpZCIsImRhdGUiLCJnZXRJdGVtQ29uZmlnQnlVdWlkIiwic3Vic2NyaWJlSXRlbUNvbmZpZyIsInB1cmNoYXNlSXRlbSIsInVwZ3JhZGVJdGVtIiwiaGlyZU1hbmFnZXIiLCJFcnJvciIsInRoaXMiLCJ3aW5kb3ciLCJvbmJlZm9yZXVubG9hZCIsImdldEluc3RhbmNlIiwiQ2FwaXRhbGlzbVNlcnZpY2UiLCJfaW5zdGFuY2UiLCJiYXNlTW9uZXkiLCJfbW9uZXlMaXN0ZW5lciIsIl9sb2NrIiwiX25vdGlmeU1vbmV5Q2hhbmdlIiwiX2NhcGl0YWxpc21TZXJ2aWNlIiwiX2N1cnJlbnRNb25leSIsImdldE1vbmV5IiwidG9GaXhlZCIsIm9uQWRkTW9uZXkiLCJzdWJzY3JpYmVNb25leSIsImNoYXJnZU1vbmV5IiwiV2FsbGV0Iiwid2FsbGV0IiwiY2FwaXRhbGlzbVNlcnZpY2UiLCJfaXNQcm9kdWNpbmciLCJfY3VycmVudFByb2R1Y2luZyIsInVwZGF0ZUNvbmZpZyIsIl9pdGVtQ29uZmlnIiwicmVuZGVyUmV2ZW51ZUFuZFVwZ3JhZGVDb3N0IiwiaW5pdGlhbGl6ZU1hbmFnZXIiLCJfdGl0bGVFbGVtIiwib25jbGljayIsImlubmVyVGV4dCIsIm5vdyIsImluaXRpYWxQcm9ncmVzc1RpbWUiLCJyZWN1cnNpdmVQcm9kdWNpbmciLCJfcHJvZHVjZUl0ZW0iLCJwcm9ncmVzc1RpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl9wcm9ncmVzc0VsZW0iLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwic2V0VGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJfd2FsbGV0IiwiX3JldmVudWUiLCJoYW5kbGVVcGdyYWRlIiwiX3VwZ3JhZGVDb3N0IiwiaGFuZGxlUHJvZHVjZSIsImdldEVsZW1lbnQiLCJfZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlkIiwiX3JldmVudWVFbGVtIiwiX3VwZ3JhZGVDb3N0RWxlbSIsImFwcGVuZENoaWxkIiwib25QdXJjaGFzZWQiLCJfaXNQdXJjaGFzaW5nIiwiaGFuZGxlUHVyY2hhc2UiLCJfb25QdXJjaGFzZWQiLCJwdXJjaGFzZVRleHRFbGVtIiwiY2xvc2VIaXJlTWFuYWdlciIsImFwcGVuZE1hbmFnZXJFbGVtZW50cyIsIndyYXBwZXIiLCJhbGVydCIsImNsb3NlQnV0dG9uIiwiX3RvdGFsTW9uZXlFbGVtIiwiX2l0ZW1zV3JhcHBlckVsZW0iLCJfaXRlbXMiLCJnZW5lcmF0ZUl0ZW0iLCJnZW5lcmF0ZVB1cmNoYXNlSXRlbSIsInVwZGF0ZWRJdGVtQ29uZmlnIiwiY3VycmVudFByb3BlcnR5IiwiaXRlbSIsInJlcGxhY2VDaGlsZCIsImNoaWxkTm9kZXMiLCJvcmRlciIsInJlbmRlckl0ZW1XcmFwcGVyIiwiaXRlbXNXcmFwcGVyRWxlbSIsImlkeCIsIml0ZW1QdXJjaGFzZSIsInJlbmRlclRvdGFsTW9uZXkiLCJ0b3RhbE1vbmV5RWxlbSIsInJlbmRlckhpcmVNYW5hZ2VyQnV0dG9uIiwiaGlyZU1hbmFnZXJCdXR0b24iLCJoaXJlTWFuYWdlckVsZW0iLCJyZW1vdmVDaGlsZCIsImNvbnNvbGUiLCJsb2ciLCJhcHAiLCJnZXRFbGVtZW50QnlJZCIsImNhcGl0YWxpc20iLCJpbml0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFH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QkFDNUJoRixLQUFLa0Usa0JBQW9CbEUsS0FBSzRFLG9CQUM5QjVFLEtBQUsrQyxTQUFXQyxTQUFTQyxjQUFjLE9BQ3ZDakQsS0FBSytDLFNBQVNPLFlBQVl0RCxLQUFLaUUsaUJBQy9CakUsS0FBSytDLFNBQVNPLFlBQVl0RCxLQUFLa0UsbUJBQy9CbEUsS0FBSytDLFNBQVNPLFlBQVl0RCxLQUFLa0YsNkJDdEJ0QixXQUNUSSxRQUFRQyxJQUFJLGdDQUVaLElBQU1yRSxFQUFTLEVBQU9mLGNBQ2hCZ0IsRUFBb0IsRUFBa0JoQixjQUV0Q3FGLEVBQU14QyxTQUFTeUMsZUFBZSxPQUNwQyxJQUFLRCxFQUNELE1BQU0sSUFBSXpGLE1BQU0sb0RBRXBCLElBQU0yRixFQUFhLElBQUksRUFDckJ2RSxFQUNBRCxHQUVGc0UsRUFBSWxDLFlBQVlvQyxFQUFXNUMsY0FDM0J3QyxRQUFRQyxJQUFJLHlCQUdoQkkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IEl0ZW1UeXBlcyBmcm9tIFwiLi90eXBlcy9JdGVtLnR5cGVcIlxuXG5leHBvcnQgY29uc3QgRElTUExBWV9ERUNJTUFMID0gMlxuXG5jb25zdCBnZW5lcmF0ZVJldmVudWVGbiA9IChiYXNlOiBudW1iZXIsIGluY3JlYXNpbmdSZXZlbnVlOiBudW1iZXIpID0+IChsZXZlbDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIGJhc2UgKyAobGV2ZWwgKiBpbmNyZWFzaW5nUmV2ZW51ZSlcbn1cbmNvbnN0IGdlbmVyYXRlVXBncmFkZUNvc3RGbiA9IChiYXNlOiBudW1iZXIsIGluY3JlYXNpbmdSYXRpbzogbnVtYmVyKSA9PiAobGV2ZWw6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiBiYXNlICsgKGxldmVsICogbGV2ZWwgKiBpbmNyZWFzaW5nUmF0aW8pXG59XG5cbmV4cG9ydCBjb25zdCBpdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtbGVtb24nLFxuICAgICAgbmFtZTogJ0xlbW9uJyxcbiAgICAgIHByb2R1Y3Rpb25UaW1lOiAxMDAwLFxuICAgICAgcmV2ZW51ZUZuOiBnZW5lcmF0ZVJldmVudWVGbigxLCAwLjgpLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDEsIDAuNiksXG4gICAgICBsZXZlbDogMSxcbiAgICAgIHB1cmNoYXNlZDogdHJ1ZSxcbiAgICAgIHByaWNlOiAwLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDEwMFxuICB9LFxuICB7XG4gICAgICB1dWlkOiAndXVpZC1pY2UtY3JlYW0nLFxuICAgICAgbmFtZTogJ0ljZSBjcmVhbScsXG4gICAgICBwcm9kdWN0aW9uVGltZTogMzAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMTAsIDUpLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDEwLCAwLjYpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDEsXG4gICAgICBoYXNNYW5hZ2VyOiBmYWxzZSxcbiAgICAgIG1hbmFnZXJQcmljZTogNTAwXG4gIH0sXG4gIHtcbiAgICAgIHV1aWQ6ICd1dWlkLWJpY3ljbGUnLFxuICAgICAgbmFtZTogJ0JpY3ljbGUnLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDEwMDAwLFxuICAgICAgcmV2ZW51ZUZuOiBnZW5lcmF0ZVJldmVudWVGbigyMCwgMTApLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDE1LCAwLjYpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDEwLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDIwMDBcbiAgfSxcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtbW90b3ItYmlrZScsXG4gICAgICBuYW1lOiAnTW90b3IgQmlrZScsXG4gICAgICBwcm9kdWN0aW9uVGltZTogNjAgKiA2MDAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMzAsIDE1KSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigyMCwgMSksXG4gICAgICBsZXZlbDogMSxcbiAgICAgIHB1cmNoYXNlZDogZmFsc2UsXG4gICAgICBwcmljZTogNTAsXG4gICAgICBoYXNNYW5hZ2VyOiBmYWxzZSxcbiAgICAgIG1hbmFnZXJQcmljZTogNDAwMFxuICB9LFxuICB7XG4gICAgICB1dWlkOiAndXVpZC1jYXInLFxuICAgICAgbmFtZTogJ0NhcicsXG4gICAgICBwcm9kdWN0aW9uVGltZTogNjAgKiA2MCAqIDUwMDAsXG4gICAgICByZXZlbnVlRm46IGdlbmVyYXRlUmV2ZW51ZUZuKDUwLCAyNSksXG4gICAgICB1cGdyYWRlQ29zdEZuOiBnZW5lcmF0ZVVwZ3JhZGVDb3N0Rm4oNDAsIDIpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDEwMCxcbiAgICAgIGhhc01hbmFnZXI6IGZhbHNlLFxuICAgICAgbWFuYWdlclByaWNlOiA4MDAwXG4gIH1cbl1cbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSAnLi4vdHlwZXMvSXRlbS50eXBlJ1xuaW1wb3J0IHsgaXRlbUNvbmZpZ3MgfSBmcm9tICcuLi9jb25maWcnXG5cbmNvbnN0IFNUT1JFX0tFWSA9ICdjYXBpdGFsaXNtLXNlcnZpY2UtbG9jYWwtc3RvcmFnZS1rZXknXG5jb25zdCBTVEFSVF9NT05FWSA9IDEwMDBcblxuXG50eXBlIEl0ZW1Qcm9kdWNpbmdTY2hlZHVsZWQgPSB7XG4gIFtrZXk6IHN0cmluZ106IERhdGVcbn1cblxudHlwZSBTdG9yZWREYXRhID0ge1xuICBpdGVtQ29uZmlnczogeyB1dWlkOiBzdHJpbmcsIGxldmVsOiBudW1iZXIsIHB1cmNoYXNlZDogYm9vbGVhbiwgaGFzTWFuYWdlcjogYm9vbGVhbiwgcHJvZHVjdGlvblN0YXJ0QXQ6IHN0cmluZyB9W11cbiAgbW9uZXk6IG51bWJlclxuICBzYXZlZEF0OiBEYXRlIHwgc3RyaW5nXG59XG5cbmNsYXNzIENhcGl0YWxpc21TZXJ2aWNlIHtcblxuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IENhcGl0YWxpc21TZXJ2aWNlXG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSAoKTogQ2FwaXRhbGlzbVNlcnZpY2Uge1xuICAgIGlmICghQ2FwaXRhbGlzbVNlcnZpY2UuX2luc3RhbmNlKSB7XG4gICAgICBDYXBpdGFsaXNtU2VydmljZS5faW5zdGFuY2UgPSBuZXcgQ2FwaXRhbGlzbVNlcnZpY2UoKVxuICAgIH1cbiAgICByZXR1cm4gQ2FwaXRhbGlzbVNlcnZpY2UuX2luc3RhbmNlXG4gIH1cblxuICBwcml2YXRlIF9tb25leTogbnVtYmVyXG4gIHByaXZhdGUgX2l0ZW1Db25maWdzOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1tdID0gW11cbiAgcHJpdmF0ZSBfaXRlbUNvbmZpZ0xpc3RlbmVyc01hcDoge1xuICAgIFtrZXk6IHN0cmluZ106IEFycmF5PChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4gdm9pZD4sXG4gIH0gPSB7fVxuXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLl9pdGVtQ29uZmlncyA9IGl0ZW1Db25maWdzXG4gICAgdGhpcy5fbW9uZXkgPSBTVEFSVF9NT05FWVxuICAgIHRoaXMuX2xvYWREYXRhKClcbiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9zYXZlRGF0YSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbm90aWZ5SXRlbUNvbmZpZ1VwZGF0ZWQgPSAoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHtcbiAgICBpZiAoIXRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbUNvbmZpZy51dWlkXSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbUNvbmZpZy51dWlkXS5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgZm4oaXRlbUNvbmZpZylcbiAgICB9KVxuICB9XG5cblxuICBwcml2YXRlIF9sb2FkRGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCBqc29uRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JFX0tFWSlcbiAgICBpZiAoIWpzb25EYXRhKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3Qgc3RvcmVEYXRhOiBTdG9yZWREYXRhID0gSlNPTi5wYXJzZShqc29uRGF0YSlcblxuICAgIGNvbnN0IGxvYWRlZEl0ZW1Db25maWdzOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1tdID0gW11cbiAgICBsZXQgaXRlbVByb2R1Y2luZ1NjaGVkdWxlZDogSXRlbVByb2R1Y2luZ1NjaGVkdWxlZCA9IHt9XG4gICAgbGV0IGFkZGl0aW9uYWxNb25leSA9IDBcbiAgICBzdG9yZURhdGEuaXRlbUNvbmZpZ3MuZm9yRWFjaCgoc3RvcmVkSXRlbUNvbmZpZykgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbEl0ZW1Db25maWcgPSBpdGVtQ29uZmlncy5maW5kKChpdGVtQ29uZmlnKSA9PiBpdGVtQ29uZmlnLnV1aWQgPT09IHN0b3JlZEl0ZW1Db25maWcudXVpZClcbiAgICAgIGNvbnN0IGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnID0ge1xuICAgICAgICAuLi5pbml0aWFsSXRlbUNvbmZpZyxcbiAgICAgICAgLi4uc3RvcmVkSXRlbUNvbmZpZyxcbiAgICAgICAgcHJvZHVjdGlvblN0YXJ0QXQ6IG51bGwsXG4gICAgICB9XG4gICAgICBpZiAoc3RvcmVkSXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdCkge1xuICAgICAgICBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0ID0gbmV3IERhdGUoc3RvcmVkSXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdClcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgICAgICBjb25zdCB0aW1lRGlmZjogbnVtYmVyID0gbm93LmdldFRpbWUoKSAtIGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQuZ2V0VGltZSgpXG4gICAgICAgIGxldCBjdXJyZW50UHJvZHVjdGlvblNlY29uZHMgPSBudWxsXG4gICAgICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgICAgICBjb25zdCBwcm9kdWNlZEFtb3VudCA9IE1hdGguZmxvb3IodGltZURpZmYgLyBpdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lKVxuICAgICAgICAgIGFkZGl0aW9uYWxNb25leSArPSBwcm9kdWNlZEFtb3VudCAqIGl0ZW1Db25maWcucmV2ZW51ZUZuKGl0ZW1Db25maWcubGV2ZWwpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZmluaXNoZWQgPSB0aW1lRGlmZiA+PSBpdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lXG4gICAgICAgICAgICAmJiAoaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC5nZXRUaW1lKCkgKyBpdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lID4gbmV3IERhdGUoc3RvcmVEYXRhLnNhdmVkQXQpLmdldFRpbWUoKSlcbiAgICAgICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxNb25leSArPSBpdGVtQ29uZmlnLnJldmVudWVGbihpdGVtQ29uZmlnLmxldmVsKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbG9hZGVkSXRlbUNvbmZpZ3MucHVzaChpdGVtQ29uZmlnKVxuICAgIH0pXG4gICAgdGhpcy5faXRlbUNvbmZpZ3MgPSBsb2FkZWRJdGVtQ29uZmlncyxcbiAgICB0aGlzLl9tb25leSA9IHN0b3JlRGF0YS5tb25leSArIGFkZGl0aW9uYWxNb25leVxuICB9XG5cbiAgcHJpdmF0ZSBfc2F2ZURhdGEgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmVkRGF0YTogU3RvcmVkRGF0YSA9IHtcbiAgICAgIGl0ZW1Db25maWdzOiB0aGlzLl9pdGVtQ29uZmlncy5tYXAoKGl0ZW1Db25maWcpID0+ICh7XG4gICAgICAgIHV1aWQ6IGl0ZW1Db25maWcudXVpZCxcbiAgICAgICAgbGV2ZWw6IGl0ZW1Db25maWcubGV2ZWwsXG4gICAgICAgIHB1cmNoYXNlZDogaXRlbUNvbmZpZy5wdXJjaGFzZWQsXG4gICAgICAgIGhhc01hbmFnZXI6IGl0ZW1Db25maWcuaGFzTWFuYWdlcixcbiAgICAgICAgcHJvZHVjdGlvblN0YXJ0QXQ6IGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQgPyBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0LnRvSVNPU3RyaW5nKCkgOiBudWxsLFxuICAgICAgfSkpLFxuICAgICAgbW9uZXk6IHRoaXMuX21vbmV5LFxuICAgICAgc2F2ZWRBdDogbmV3IERhdGUoKVxuICAgIH1cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SRV9LRVksIEpTT04uc3RyaW5naWZ5KHN0b3JlZERhdGEpKVxuICB9XG5cbiAgcHVibGljIGxvYWRJdGVtQ29uZmlncyA9ICgpID0+IHRoaXMuX2l0ZW1Db25maWdzXG5cbiAgcHVibGljIGxvYWRNb25leSA9ICgpID0+IHRoaXMuX21vbmV5XG5cbiAgcHVibGljIHVwZGF0ZU1vbmV5ID0gKG1vbmV5OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLl9tb25leSA9IG1vbmV5XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUgPSAoaXRlbVV1aWQ6IHN0cmluZywgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCkpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0ID0gZGF0ZVxuICB9XG5cbiAgcHVibGljIGdldEl0ZW1Db25maWdCeVV1aWQgPSAoaXRlbVV1aWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWcgPSB0aGlzLl9pdGVtQ29uZmlncy5maW5kKChpdGVtQ29uZmlnKSA9PiBpdGVtQ29uZmlnLnV1aWQgPT09IGl0ZW1VdWlkKVxuICAgIHJldHVybiB7IC4uLml0ZW1Db25maWcgfVxuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZUl0ZW1Db25maWcgPSAoaXRlbVV1aWQ6IHN0cmluZywgZm46IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4gdm9pZCkgPT4ge1xuICAgIGlmICghdGhpcy5faXRlbUNvbmZpZ0xpc3RlbmVyc01hcFtpdGVtVXVpZF0pIHtcbiAgICAgIHRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdID0gW11cbiAgICB9XG4gICAgdGhpcy5faXRlbUNvbmZpZ0xpc3RlbmVyc01hcFtpdGVtVXVpZF0ucHVzaChmbilcbiAgfVxuXG4gIHB1YmxpYyBwdXJjaGFzZUl0ZW0gPSAoaXRlbVV1aWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWcgPSB0aGlzLl9pdGVtQ29uZmlncy5maW5kKChpdGVtQ29uZmlnKSA9PiBpdGVtQ29uZmlnLnV1aWQgPT09IGl0ZW1VdWlkKVxuICAgIGl0ZW1Db25maWcucHVyY2hhc2VkID0gdHJ1ZVxuICAgIHRoaXMuX25vdGlmeUl0ZW1Db25maWdVcGRhdGVkKGl0ZW1Db25maWcpXG4gIH1cblxuICBwdWJsaWMgdXBncmFkZUl0ZW0gPSAoaXRlbVV1aWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWcgPSB0aGlzLl9pdGVtQ29uZmlncy5maW5kKChpdGVtQ29uZmlnKSA9PiBpdGVtQ29uZmlnLnV1aWQgPT09IGl0ZW1VdWlkKVxuICAgIGl0ZW1Db25maWcubGV2ZWwgKz0gMVxuICB9XG5cbiAgcHVibGljIGhpcmVNYW5hZ2VyID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICBpZiAoIWl0ZW1Db25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgbm8gaXRlbSBjb25maWcgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWApXG4gICAgfVxuICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWxyZWFkeSBoYXZlIGEgbWFuYWdlciBmb3IgJHtpdGVtQ29uZmlnLm5hbWV9YClcbiAgICB9XG4gICAgaXRlbUNvbmZpZy5oYXNNYW5hZ2VyID0gdHJ1ZVxuICAgIHRoaXMuX25vdGlmeUl0ZW1Db25maWdVcGRhdGVkKGl0ZW1Db25maWcpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FwaXRhbGlzbVNlcnZpY2VcbiIsImltcG9ydCBDYXBpdGFsaXNtU2VydmljZSBmcm9tICcuL3NlcnZpY2VzL2NhcGl0YWxpc20uc2VydmljZSdcbmNsYXNzIFdhbGxldCB7XG4gIHByaXZhdGUgc3RhdGljIF9pbnN0YW5jZTogV2FsbGV0XG4gIHByaXZhdGUgX2NhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZVxuICBwcml2YXRlIF9jdXJyZW50TW9uZXk6IG51bWJlclxuICBwcml2YXRlIF9tb25leUxpc3RlbmVyOiBBcnJheTwobW9uZXk6IG51bWJlcikgPT4gdm9pZD4gPSBbXVxuICBwcml2YXRlIF9sb2NrOiBCb29sZWFuID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvciAoYmFzZU1vbmV5OiBudW1iZXIpIHtcbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSA9IENhcGl0YWxpc21TZXJ2aWNlLmdldEluc3RhbmNlKClcbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgPSB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5sb2FkTW9uZXkoKVxuICB9XG5cbiAgcHJpdmF0ZSBfbm90aWZ5TW9uZXlDaGFuZ2UgPSAoKSA9PiB7XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBkYXRlTW9uZXkodGhpcy5fY3VycmVudE1vbmV5KVxuICAgIHRoaXMuX21vbmV5TGlzdGVuZXIuZm9yRWFjaCgoZm4pID0+IGZuKHRoaXMuX2N1cnJlbnRNb25leSkpXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlID0gKCkgPT4ge1xuICAgIGlmICghV2FsbGV0Ll9pbnN0YW5jZSkge1xuICAgICAgV2FsbGV0Ll9pbnN0YW5jZSA9IG5ldyBXYWxsZXQoMTAwMClcbiAgICB9XG4gICAgcmV0dXJuIFdhbGxldC5faW5zdGFuY2VcbiAgfVxuXG4gIHB1YmxpYyBnZXRNb25leSA9ICgpID0+IHRoaXMuX2N1cnJlbnRNb25leS50b0ZpeGVkKDIpXG5cbiAgcHVibGljIG9uQWRkTW9uZXkgPSAobW9uZXk6IG51bWJlcikgPT4ge1xuICAgIHRoaXMuX2N1cnJlbnRNb25leSArPSBtb25leVxuICAgIHRoaXMuX25vdGlmeU1vbmV5Q2hhbmdlKClcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVNb25leSA9IChmbjogKG1vbmV5OiBudW1iZXIpID0+IHZvaWQpID0+IHtcbiAgICB0aGlzLl9tb25leUxpc3RlbmVyLnB1c2goZm4pXG4gIH1cblxuICAvLyBTaW1wbGUgbG9ja2luZ1xuICBwdWJsaWMgY2hhcmdlTW9uZXkgPSBhc3luYyAobW9uZXk6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIGlmICh0aGlzLl9sb2NrKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5fbG9jayA9IHRydWVcbiAgICBpZiAodGhpcy5fY3VycmVudE1vbmV5IDwgbW9uZXkpIHtcbiAgICAgIHRoaXMuX2xvY2sgPSBmYWxzZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMuX2N1cnJlbnRNb25leSAtPSBtb25leVxuICAgIHRoaXMuX2xvY2sgPSBmYWxzZVxuICAgIHRoaXMuX25vdGlmeU1vbmV5Q2hhbmdlKClcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdhbGxldFxuIiwiaW1wb3J0IHsgRElTUExBWV9ERUNJTUFMLCBpdGVtQ29uZmlncyB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBJdGVtVHlwZXMgZnJvbSAnLi4vdHlwZXMvSXRlbS50eXBlJ1xuaW1wb3J0IFdhbGxldCBmcm9tICcuLi9XYWxsZXQnXG5pbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlJ1xuXG5jbGFzcyBJdGVtIHtcbiAgcHJpdmF0ZSBfaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWdcbiAgcHJpdmF0ZSBfd2FsbGV0OiBXYWxsZXRcbiAgcHJpdmF0ZSBfY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlXG5cbiAgcHJpdmF0ZSBfZWxlbWVudDogSFRNTEVsZW1lbnRcbiAgcHJpdmF0ZSBfdGl0bGVFbGVtOiBIVE1MRWxlbWVudFxuICBwcml2YXRlIF91cGdyYWRlQ29zdEVsZW06IEhUTUxFbGVtZW50XG4gIHByaXZhdGUgX3JldmVudWVFbGVtOiBIVE1MRWxlbWVudFxuICBwcml2YXRlIF9wcm9ncmVzc0VsZW06IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBfcmV2ZW51ZTogbnVtYmVyXG4gIHByaXZhdGUgX3VwZ3JhZGVDb3N0OiBudW1iZXJcbiAgcHJpdmF0ZSBfaXNQcm9kdWNpbmc6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIF9jdXJyZW50UHJvZHVjaW5nOiBQcm9taXNlPHZvaWQ+ID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yIChcbiAgICBpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZyxcbiAgICB3YWxsZXQ6IFdhbGxldCxcbiAgICBjYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2VcbiAgKSB7XG4gICAgLy8gQ29weSBDb25maWdcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0geyAuLi5pdGVtQ29uZmlnIH1cbiAgICB0aGlzLl93YWxsZXQgPSB3YWxsZXRcbiAgICB0aGlzLl9yZXZlbnVlID0gaXRlbUNvbmZpZy5yZXZlbnVlRm4oaXRlbUNvbmZpZy5sZXZlbClcbiAgICB0aGlzLl91cGdyYWRlQ29zdCA9IGl0ZW1Db25maWcudXBncmFkZUNvc3RGbihpdGVtQ29uZmlnLmxldmVsKVxuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlID0gY2FwaXRhbGlzbVNlcnZpY2VcblxuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLnN1YnNjcmliZUl0ZW1Db25maWcoaXRlbUNvbmZpZy51dWlkLCB0aGlzLnVwZGF0ZUNvbmZpZylcblxuICAgIC8vIEluaXRpYWxpemluZyBjb21wb25lbnRcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTmFtZSA9ICdpdGVtJ1xuICAgIHRoaXMuX2VsZW1lbnQuaWQgPSB0aGlzLl9pdGVtQ29uZmlnLm5hbWVcblxuICAgIHRoaXMuX3RpdGxlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fdGl0bGVFbGVtLmNsYXNzTmFtZSA9ICduYW1lJ1xuICAgIHRoaXMuX3RpdGxlRWxlbS5pbm5lclRleHQgPSB0aGlzLl9pdGVtQ29uZmlnLm5hbWVcbiAgICB0aGlzLl90aXRsZUVsZW0ub25jbGljayA9IHRoaXMuaGFuZGxlUHJvZHVjZVxuXG4gICAgY29uc3QgcHJvZHVjdGlvblRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHByb2R1Y3Rpb25UaW1lLmNsYXNzTmFtZSA9ICdwcm9kdWN0aW9uLXRpbWUnXG4gICAgcHJvZHVjdGlvblRpbWUuaW5uZXJUZXh0ID0gYHRha2U6ICR7KHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblRpbWUgLyAxMDAwKS50b0ZpeGVkKDApfSBzYFxuXG4gICAgdGhpcy5fcmV2ZW51ZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX3JldmVudWVFbGVtLmNsYXNzTmFtZSA9ICdyZXZlbnVlJ1xuXG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLl91cGdyYWRlQ29zdEVsZW0uY2xhc3NOYW1lID0gJ3VwZ3JhZGUnXG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtLm9uY2xpY2sgPSB0aGlzLmhhbmRsZVVwZ3JhZGVcblxuICAgIHRoaXMuX3Byb2dyZXNzRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fcHJvZ3Jlc3NFbGVtIC5jbGFzc05hbWUgPSAncHJvZ3Jlc3MnXG5cbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RpdGxlRWxlbSlcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3JldmVudWVFbGVtKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQocHJvZHVjdGlvblRpbWUpXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl91cGdyYWRlQ29zdEVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9wcm9ncmVzc0VsZW0pXG4gICAgaWYgKHRoaXMuX2l0ZW1Db25maWcuaGFzTWFuYWdlcikge1xuICAgICAgdGhpcy5pbml0aWFsaXplTWFuYWdlcigpXG4gICAgfVxuXG4gICAgLy8gUmVuZGVyIHVwZGF0ZSBjb3N0IGFuZCByZXZlbnVlXG4gICAgdGhpcy5yZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb25maWcgPSAoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHtcbiAgICBpZiAodGhpcy5faXRlbUNvbmZpZy5uYW1lICE9PSBpdGVtQ29uZmlnLm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VydmljZSB1cGRhdGVzIHdpdGggZGlmZmVyZW50IGl0ZW0gY29uZmlnJylcbiAgICB9XG4gICAgdGhpcy5faXRlbUNvbmZpZyA9IGl0ZW1Db25maWdcbiAgICB0aGlzLnJlbmRlclJldmVudWVBbmRVcGdyYWRlQ29zdCgpXG4gICAgaWYgKGl0ZW1Db25maWcuaGFzTWFuYWdlcikge1xuICAgICAgdGhpcy5pbml0aWFsaXplTWFuYWdlcigpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplTWFuYWdlciA9IGFzeW5jICgpID0+IHtcbiAgICB0aGlzLl90aXRsZUVsZW0ub25jbGljayA9IG51bGxcbiAgICB0aGlzLl90aXRsZUVsZW0uaW5uZXJUZXh0ID0gYCR7dGhpcy5faXRlbUNvbmZpZy5uYW1lfSAoaGFzIG1hbmFnZXIpYFxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5nZXRJdGVtQ29uZmlnQnlVdWlkKHRoaXMuX2l0ZW1Db25maWcudXVpZClcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgbGV0IGluaXRpYWxQcm9ncmVzc1RpbWUgPSAwXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRQcm9kdWNpbmcpIHtcbiAgICAgIGF3YWl0IHRoaXMuX2N1cnJlbnRQcm9kdWNpbmdcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQpIHtcbiAgICAgIGNvbnN0IHVuZGVyUHJvZHVjaW5nID0gKHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQuZ2V0VGltZSgpICsgdGhpcy5faXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSkgPiBub3cuZ2V0VGltZSgpXG4gICAgICBpZiAodW5kZXJQcm9kdWNpbmcpIHtcbiAgICAgICAgaW5pdGlhbFByb2dyZXNzVGltZSA9IG5vdy5nZXRUaW1lKCkgLSB0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0LmdldFRpbWUoKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZWN1cnNpdmVQcm9kdWNpbmcgPSBhc3luYyAoKTogUHJvbWlzZTwoKSA9PiB2b2lkPiA9PiB7XG4gICAgICBhd2FpdCB0aGlzLl9wcm9kdWNlSXRlbShpbml0aWFsUHJvZ3Jlc3NUaW1lKVxuICAgICAgaW5pdGlhbFByb2dyZXNzVGltZSA9IDBcbiAgICAgIHJldHVybiByZWN1cnNpdmVQcm9kdWNpbmcoKVxuICAgIH1cbiAgICByZWN1cnNpdmVQcm9kdWNpbmcoKVxuICAgIHJldHVyblxuICB9XG5cbiAgcHJpdmF0ZSBfcHJvZHVjZUl0ZW0gPSBhc3luYyAocHJvZ3Jlc3NUaW1lID0gMCk6IFByb21pc2U8dm9pZD4gPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAodGhpcy5faXNQcm9kdWNpbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9pc1Byb2R1Y2luZyA9IHRydWVcbiAgICBpZiAocHJvZ3Jlc3NUaW1lID09PSAwKSB7XG4gICAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS51cGRhdGVJdGVtUHJvZHVjaW5nVGltZSh0aGlzLl9pdGVtQ29uZmlnLnV1aWQpXG4gICAgfVxuICAgIHRoaXMuX3Byb2dyZXNzRWxlbS5pbm5lclRleHQgPSBgJHsocHJvZ3Jlc3NUaW1lIC8gMTAwMCkudG9GaXhlZCgxKX0gc2BcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHByb2dyZXNzVGltZSArPSAxMDBcbiAgICAgIHRoaXMuX3Byb2dyZXNzRWxlbS5pbm5lclRleHQgPSBgJHsocHJvZ3Jlc3NUaW1lIC8gMTAwMCkudG9GaXhlZCgxKX0gc2BcbiAgICB9LCAxMDApXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKVxuICAgICAgdGhpcy5fcHJvZ3Jlc3NFbGVtLmlubmVyVGV4dCA9ICcnXG4gICAgICB0aGlzLl93YWxsZXQub25BZGRNb25leSh0aGlzLl9yZXZlbnVlKVxuICAgICAgdGhpcy5faXNQcm9kdWNpbmcgPSBmYWxzZVxuICAgICAgcmVzb2x2ZSgpXG4gICAgfSwgdGhpcy5faXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSAtIHByb2dyZXNzVGltZSlcbiAgfSlcblxuICBwcml2YXRlIGhhbmRsZVVwZ3JhZGUgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaXNQYXllZCA9IGF3YWl0IHRoaXMuX3dhbGxldC5jaGFyZ2VNb25leSh0aGlzLl91cGdyYWRlQ29zdClcbiAgICBpZiAoIWlzUGF5ZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS51cGdyYWRlSXRlbSh0aGlzLl9pdGVtQ29uZmlnLnV1aWQpXG4gICAgdGhpcy5faXRlbUNvbmZpZyA9IHsgLi4udGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuZ2V0SXRlbUNvbmZpZ0J5VXVpZCh0aGlzLl9pdGVtQ29uZmlnLnV1aWQpfVxuICAgIHRoaXMucmVuZGVyUmV2ZW51ZUFuZFVwZ3JhZGVDb3N0KClcbiAgICB0aGlzLl9yZXZlbnVlID0gdGhpcy5faXRlbUNvbmZpZy5yZXZlbnVlRm4odGhpcy5faXRlbUNvbmZpZy5sZXZlbClcbiAgICB0aGlzLl91cGdyYWRlQ29zdCA9IHRoaXMuX2l0ZW1Db25maWcudXBncmFkZUNvc3RGbih0aGlzLl9pdGVtQ29uZmlnLmxldmVsKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQcm9kdWNlID0gKCkgPT4ge1xuICAgIHRoaXMuX2N1cnJlbnRQcm9kdWNpbmcgPSB0aGlzLl9wcm9kdWNlSXRlbSgpXG4gIH1cblxuICBwcml2YXRlIHJlbmRlclJldmVudWVBbmRVcGdyYWRlQ29zdCAoKSB7XG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtLmlubmVyVGV4dCA9ICBgdXBncmFkZTogJHt0aGlzLl91cGdyYWRlQ29zdC50b0ZpeGVkKERJU1BMQVlfREVDSU1BTCl9YFxuICAgIHRoaXMuX3JldmVudWVFbGVtLmlubmVyVGV4dCA9IGAkICR7dGhpcy5fcmV2ZW51ZS50b0ZpeGVkKERJU1BMQVlfREVDSU1BTCl9YFxuICB9XG5cbiAgcHVibGljIGdldEVsZW1lbnQgPSAoKSA9PiB0aGlzLl9lbGVtZW50XG59XG5cbmV4cG9ydCBkZWZhdWx0IEl0ZW1cbiIsImltcG9ydCB7IERJU1BMQVlfREVDSU1BTCB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBJdGVtVHlwZXMgZnJvbSAnLi4vdHlwZXMvSXRlbS50eXBlJ1xuaW1wb3J0IFdhbGxldCBmcm9tICcuLi9XYWxsZXQnXG5cbmNsYXNzIEl0ZW1QdXJjaGFzZSB7XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50XG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0XG4gIHByaXZhdGUgX2l0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnXG5cbiAgcHJpdmF0ZSBfaXNQdXJjaGFzaW5nOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBfb25QdXJjaGFzZWQ6ICgpID0+IHZvaWRcblxuICBjb25zdHJ1Y3RvciAoXG4gICAgaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcsXG4gICAgd2FsbGV0OiBXYWxsZXQsXG4gICAgb25QdXJjaGFzZWQ6ICgpID0+IHZvaWQsXG4gICkge1xuICAgIHRoaXMuX2l0ZW1Db25maWcgPSBpdGVtQ29uZmlnXG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0XG4gICAgdGhpcy5fb25QdXJjaGFzZWQgPSBvblB1cmNoYXNlZFxuXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSAnaXRlbSdcbiAgICB0aGlzLl9lbGVtZW50Lm9uY2xpY2sgPSB0aGlzLmhhbmRsZVB1cmNoYXNlXG4gICAgY29uc3QgcHVyY2hhc2VUZXh0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgcHVyY2hhc2VUZXh0RWxlbS5jbGFzc05hbWUgPSAncHVyY2hhc2UtdGV4dCdcbiAgICBwdXJjaGFzZVRleHRFbGVtLmlubmVyVGV4dCA9IGBwdXJjaGFzZSAke2l0ZW1Db25maWcubmFtZX0gZm9yICR7aXRlbUNvbmZpZy5wcmljZS50b0ZpeGVkKERJU1BMQVlfREVDSU1BTCl9YFxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQocHVyY2hhc2VUZXh0RWxlbSlcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUHVyY2hhc2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzUHVyY2hhc2luZykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuX2lzUHVyY2hhc2luZyA9IHRydWVcbiAgICBjb25zdCBwYXllZDogYm9vbGVhbiA9IGF3YWl0IHRoaXMuX3dhbGxldC5jaGFyZ2VNb25leSh0aGlzLl9pdGVtQ29uZmlnLnByaWNlKVxuICAgIGlmICghcGF5ZWQpIHtcbiAgICAgIHRoaXMuX2lzUHVyY2hhc2luZyA9IGZhbHNlXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5faXNQdXJjaGFzaW5nID0gZmFsc2VcbiAgICB0aGlzLl9vblB1cmNoYXNlZCgpXG4gIH1cblxuICBwdWJsaWMgZ2V0RWxlbWVudCA9ICgpID0+IHRoaXMuX2VsZW1lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgSXRlbVB1cmNoYXNlXG4iLCJpbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlJ1xuaW1wb3J0IFdhbGxldCBmcm9tICcuLi9XYWxsZXQnXG5cbmNsYXNzIEhpcmVNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlXG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50XG5cbiAgY29uc3RydWN0b3IgKFxuICAgIGNhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZSxcbiAgICB3YWxsZXQ6IFdhbGxldCxcbiAgICBjbG9zZUhpcmVNYW5hZ2VyOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlID0gY2FwaXRhbGlzbVNlcnZpY2VcbiAgICB0aGlzLl93YWxsZXQgPSB3YWxsZXRcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTmFtZSA9ICdoaXJlLW1hbmFnZXItd3JhcHBlcidcblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBjbG9zZUJ1dHRvbi5pbm5lclRleHQgPSAnQ2xvc2UnXG4gICAgY2xvc2VCdXR0b24ub25jbGljayA9IGNsb3NlSGlyZU1hbmFnZXJcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKVxuICAgIHRoaXMuYXBwZW5kTWFuYWdlckVsZW1lbnRzKClcbiAgfVxuXG4gIHByaXZhdGUgYXBwZW5kTWFuYWdlckVsZW1lbnRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWdzID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZEl0ZW1Db25maWdzKClcbiAgICBpdGVtQ29uZmlncy5mb3JFYWNoKChpdGVtQ29uZmlnKSA9PiB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ2hpcmUtbWFuYWdlcidcbiAgICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgICAgd3JhcHBlci5pbm5lclRleHQgPSBgSGlyZWQgTWFuYWdlciBmb3IgJHtpdGVtQ29uZmlnLm5hbWV9YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JhcHBlci5pbm5lclRleHQgPSBgTWFuYWdlciBmb3IgJHtpdGVtQ29uZmlnLm5hbWV9IChjb3N0ICQke2l0ZW1Db25maWcubWFuYWdlclByaWNlfSlgXG4gICAgICB9XG4gICAgICB3cmFwcGVyLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghaXRlbUNvbmZpZy5wdXJjaGFzZWQpIHtcbiAgICAgICAgICBhbGVydCgnUGxlYXNlIHB1cmNoYXNlIGl0ZW0gZmlyc3QnKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzUGFpZCA9IGF3YWl0IHRoaXMuX3dhbGxldC5jaGFyZ2VNb25leShpdGVtQ29uZmlnLm1hbmFnZXJQcmljZSlcbiAgICAgICAgaWYgKCFpc1BhaWQpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5oaXJlTWFuYWdlcihpdGVtQ29uZmlnLnV1aWQpXG4gICAgICAgIHdyYXBwZXIub25jbGljayA9IG51bGxcbiAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgKz0gJyBwdXJjaGFzZWQnXG4gICAgICAgIHdyYXBwZXIuaW5uZXJUZXh0ID0gYEhpcmVkIE1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWBcbiAgICAgIH1cbiAgICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQod3JhcHBlcilcbiAgICB9KVxuICB9XG5cbiAgcHVibGljIGdldEVsZW1lbnQgPSAoKTogSFRNTEVsZW1lbnQgPT4gdGhpcy5fZWxlbWVudFxufVxuXG5leHBvcnQgZGVmYXVsdCBIaXJlTWFuYWdlclxuIiwiaW1wb3J0IEl0ZW1UeXBlcyBmcm9tIFwiLi4vdHlwZXMvSXRlbS50eXBlXCJcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9jb21wb25lbnRzL0l0ZW1cIlxuaW1wb3J0IEl0ZW1QdXJjaGFzZSBmcm9tIFwiLi4vY29tcG9uZW50cy9JdGVtUHVyY2hhc2VcIlxuaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gXCIuLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2VcIlxuaW1wb3J0IFdhbGxldCBmcm9tIFwiLi4vV2FsbGV0XCJcbmltcG9ydCB7IERJU1BMQVlfREVDSU1BTCwgaXRlbUNvbmZpZ3MgfSBmcm9tIFwiLi4vY29uZmlnXCJcbmltcG9ydCBIaXJlTWFuYWdlciBmcm9tIFwiLi4vY29tcG9uZW50cy9IaXJlTWFuYWdlclwiXG50eXBlIEl0ZW1NYXBQcm9wZXJ0eSA9IHtcbiAgb3JkZXI6IG51bWJlclxuICBpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1xuICBpdGVtPzogSXRlbVxuICBpdGVtUHVyY2hhc2U/OiBJdGVtUHVyY2hhc2Vcbn1cblxuY2xhc3MgQ2FwaXRhbGlzbSB7XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50ID0gbnVsbFxuICBwcml2YXRlIF90b3RhbE1vbmV5RWxlbTogSFRNTEVsZW1lbnQgPSBudWxsXG4gIHByaXZhdGUgX2l0ZW1zV3JhcHBlckVsZW06IEhUTUxFbGVtZW50ID0gbnVsbFxuICBwcml2YXRlIF9pdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtdXG4gIHByaXZhdGUgX2l0ZW1zOiB7IFtrZXk6IHN0cmluZ106IEl0ZW1NYXBQcm9wZXJ0eSB9ID0ge31cblxuICBwcml2YXRlIF9jYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2UgPSBudWxsXG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0ID0gbnVsbFxuICBjb25zdHJ1Y3RvcihcbiAgICBjYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpLFxuICAgIHdhbGxldDogV2FsbGV0ID0gV2FsbGV0LmdldEluc3RhbmNlKClcbiAgKSB7XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UgPSBjYXBpdGFsaXNtU2VydmljZVxuICAgIHRoaXMuX3dhbGxldCA9IHdhbGxldFxuICAgIHRoaXMuX3RvdGFsTW9uZXlFbGVtID0gdGhpcy5yZW5kZXJUb3RhbE1vbmV5KClcbiAgICB0aGlzLl9pdGVtc1dyYXBwZXJFbGVtID0gdGhpcy5yZW5kZXJJdGVtV3JhcHBlcigpXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90b3RhbE1vbmV5RWxlbSlcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2l0ZW1zV3JhcHBlckVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlckhpcmVNYW5hZ2VyQnV0dG9uKCkpXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlSXRlbSA9IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBuZXcgSXRlbShpdGVtQ29uZmlnLCB0aGlzLl93YWxsZXQsIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlKVxuICAgIHJldHVybiBpdGVtXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUHVyY2hhc2VJdGVtID0gKGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlUHVyY2hhc2VJdGVtID0gKCkgPT4ge1xuICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UucHVyY2hhc2VJdGVtKGl0ZW1Db25maWcudXVpZClcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtQ29uZmlnID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuZ2V0SXRlbUNvbmZpZ0J5VXVpZChcbiAgICAgICAgaXRlbUNvbmZpZy51dWlkXG4gICAgICApXG4gICAgICBjb25zdCBjdXJyZW50UHJvcGVydHk6IEl0ZW1NYXBQcm9wZXJ0eSA9IHRoaXMuX2l0ZW1zW2l0ZW1Db25maWcudXVpZF1cbiAgICAgIGN1cnJlbnRQcm9wZXJ0eS5pdGVtQ29uZmlnID0gdXBkYXRlZEl0ZW1Db25maWdcbiAgICAgIHRoaXMuX2l0ZW1zW2l0ZW1Db25maWcudXVpZF0uaXRlbSA9IG5ldyBJdGVtKFxuICAgICAgICB1cGRhdGVkSXRlbUNvbmZpZyxcbiAgICAgICAgdGhpcy5fd2FsbGV0LFxuICAgICAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZVxuICAgICAgKVxuICAgICAgdGhpcy5faXRlbXNXcmFwcGVyRWxlbS5yZXBsYWNlQ2hpbGQoXG4gICAgICAgIHRoaXMuX2l0ZW1zW2l0ZW1Db25maWcudXVpZF0uaXRlbS5nZXRFbGVtZW50KCksXG4gICAgICAgIHRoaXMuX2l0ZW1zV3JhcHBlckVsZW0uY2hpbGROb2Rlc1tjdXJyZW50UHJvcGVydHkub3JkZXJdXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgaXRlbVB1cmNoYXNlID0gbmV3IEl0ZW1QdXJjaGFzZShcbiAgICAgIGl0ZW1Db25maWcsXG4gICAgICB0aGlzLl93YWxsZXQsXG4gICAgICBoYW5kbGVQdXJjaGFzZUl0ZW1cbiAgICApXG4gICAgcmV0dXJuIGl0ZW1QdXJjaGFzZVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJJdGVtV3JhcHBlciA9ICgpID0+IHtcbiAgICBjb25zdCBpdGVtc1dyYXBwZXJFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGNvbnN0IGl0ZW1Db25maWdzID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZEl0ZW1Db25maWdzKClcbiAgICBpdGVtQ29uZmlncy5mb3JFYWNoKChpdGVtQ29uZmlnLCBpZHgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0eTogSXRlbU1hcFByb3BlcnR5ID0ge1xuICAgICAgICBpdGVtQ29uZmlnOiBpdGVtQ29uZmlnLFxuICAgICAgICBvcmRlcjogaWR4LFxuICAgICAgfVxuICAgICAgaWYgKGl0ZW1Db25maWcucHVyY2hhc2VkKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmdlbmVyYXRlSXRlbShpdGVtQ29uZmlnKVxuICAgICAgICBjdXJyZW50UHJvcGVydHkuaXRlbSA9IGl0ZW1cbiAgICAgICAgaXRlbXNXcmFwcGVyRWxlbS5hcHBlbmRDaGlsZChpdGVtLmdldEVsZW1lbnQoKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1QdXJjaGFzZSA9IHRoaXMuZ2VuZXJhdGVQdXJjaGFzZUl0ZW0oaXRlbUNvbmZpZylcbiAgICAgICAgY3VycmVudFByb3BlcnR5Lml0ZW1QdXJjaGFzZSA9IGl0ZW1QdXJjaGFzZVxuICAgICAgICBpdGVtc1dyYXBwZXJFbGVtLmFwcGVuZENoaWxkKGl0ZW1QdXJjaGFzZS5nZXRFbGVtZW50KCkpXG4gICAgICB9XG4gICAgICB0aGlzLl9pdGVtc1tpdGVtQ29uZmlnLnV1aWRdID0gY3VycmVudFByb3BlcnR5XG4gICAgfSlcbiAgICByZXR1cm4gaXRlbXNXcmFwcGVyRWxlbVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUb3RhbE1vbmV5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHRvdGFsTW9uZXlFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIHRvdGFsTW9uZXlFbGVtLmNsYXNzTmFtZSA9IFwidG90YWwgbW9uZXlcIlxuICAgIHRvdGFsTW9uZXlFbGVtLmlubmVyVGV4dCA9IGB0b3RhbDogJHt0aGlzLl93YWxsZXQuZ2V0TW9uZXkoKX1gXG4gICAgdGhpcy5fd2FsbGV0LnN1YnNjcmliZU1vbmV5KChtb25leTogbnVtYmVyKSA9PiB7XG4gICAgICB0b3RhbE1vbmV5RWxlbS5pbm5lclRleHQgPSBgdG90YWw6ICR7bW9uZXkudG9GaXhlZChcbiAgICAgICAgRElTUExBWV9ERUNJTUFMXG4gICAgICApfWBcbiAgICB9KVxuICAgIHJldHVybiB0b3RhbE1vbmV5RWxlbVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIaXJlTWFuYWdlckJ1dHRvbiA9ICgpID0+IHtcbiAgICBjb25zdCBoaXJlTWFuYWdlckJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgaGlyZU1hbmFnZXJCdXR0b24uY2xhc3NOYW1lID0gJ2hpcmUtbWFuYWdlci1idXR0b24nXG4gICAgaGlyZU1hbmFnZXJCdXR0b24uaW5uZXJUZXh0ID0gJ0hpcmUgTWFuYWdlcidcbiAgICBoaXJlTWFuYWdlckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgaGlyZU1hbmFnZXJFbGVtOiBIVE1MRWxlbWVudFxuICAgICAgICBjb25zdCBoaXJlTWFuYWdlciA9IG5ldyBIaXJlTWFuYWdlcihcbiAgICAgICAgICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLFxuICAgICAgICAgICAgdGhpcy5fd2FsbGV0LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQ2hpbGQoaGlyZU1hbmFnZXJFbGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGhpcmVNYW5hZ2VyRWxlbSA9IGhpcmVNYW5hZ2VyLmdldEVsZW1lbnQoKVxuICAgICAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKGhpcmVNYW5hZ2VyRWxlbSlcbiAgICB9XG4gICAgcmV0dXJuIGhpcmVNYW5hZ2VyQnV0dG9uXG4gIH1cblxuICBwdWJsaWMgZ2V0RWxlbWVudCA9ICgpOiBIVE1MRWxlbWVudCA9PiB0aGlzLl9lbGVtZW50XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcGl0YWxpc21cbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSAnLi90eXBlcy9JdGVtLnR5cGUnXG5pbXBvcnQgV2FsbGV0IGZyb20gJy4vV2FsbGV0J1xuaW1wb3J0IHsgRElTUExBWV9ERUNJTUFMLCBpdGVtQ29uZmlncyB9IGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IEl0ZW0gZnJvbSAnLi9jb21wb25lbnRzL0l0ZW0nXG5pbXBvcnQgSXRlbVB1cmNoYXNlIGZyb20gJy4vY29tcG9uZW50cy9JdGVtUHVyY2hhc2UnXG5pbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2UnXG5pbXBvcnQgSGlyZU1hbmFnZXIgZnJvbSAnLi9jb21wb25lbnRzL0hpcmVNYW5hZ2VyJ1xuaW1wb3J0IENhcGl0YWxpc20gZnJvbSAnLi9jb250YWluZXJzL0NhcGl0YWxpc20nXG5cblxuXG5cbmNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJz09PT0gSW5pdGlhbGl6aW5nIHN0YXJ0ID09PT0nKVxuXG4gICAgY29uc3Qgd2FsbGV0ID0gV2FsbGV0LmdldEluc3RhbmNlKClcbiAgICBjb25zdCBjYXBpdGFsaXNtU2VydmljZSA9IENhcGl0YWxpc21TZXJ2aWNlLmdldEluc3RhbmNlKClcblxuICAgIGNvbnN0IGFwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxuICAgIGlmICghYXBwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gI2FwcCBlbGVtZW50IHRvIGF0dGFjaCBnYW1lIGVsZW1lbnRzJylcbiAgICB9XG4gICAgY29uc3QgY2FwaXRhbGlzbSA9IG5ldyBDYXBpdGFsaXNtKFxuICAgICAgY2FwaXRhbGlzbVNlcnZpY2UsXG4gICAgICB3YWxsZXQsXG4gICAgKVxuICAgIGFwcC5hcHBlbmRDaGlsZChjYXBpdGFsaXNtLmdldEVsZW1lbnQoKSlcbiAgICBjb25zb2xlLmxvZygnPT09PSBJbml0aWFsaXplZCA9PT09Jylcbn1cblxuaW5pdCgpXG4iXSwic291cmNlUm9vdCI6IiJ9