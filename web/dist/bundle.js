!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(e,t){return function(n){return e+n*t}},r=function(e,t){return function(n){return e+n*n*t}},o=[{uuid:"uuid-lemon",name:"Lemon",productionTime:1e3,revenueFn:i(1,.8),upgradeCostFn:r(1,.6),level:1,purchased:!0,price:0,hasManager:!1,managerPrice:100},{uuid:"uuid-ice-cream",name:"Ice cream",productionTime:3e3,revenueFn:i(10,5),upgradeCostFn:r(10,.6),level:1,purchased:!1,price:1,hasManager:!1,managerPrice:500},{uuid:"uuid-bicycle",name:"Bicycle",productionTime:1e4,revenueFn:i(20,10),upgradeCostFn:r(15,.6),level:1,purchased:!1,price:10,hasManager:!1,managerPrice:2e3},{uuid:"uuid-motor-bike",name:"Motor Bike",productionTime:36e5,revenueFn:i(30,15),upgradeCostFn:r(20,1),level:1,purchased:!1,price:50,hasManager:!1,managerPrice:4e3},{uuid:"uuid-car",name:"Car",productionTime:18e6,revenueFn:i(50,25),upgradeCostFn:r(40,2),level:1,purchased:!1,price:100,hasManager:!1,managerPrice:8e3}],a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u="capitalism-service-local-storage-key",s=function(){function e(){var e=this;this._itemConfigs=[],this._itemConfigListenersMap={},this._notifyItemConfigUpdated=function(t){e._itemConfigListenersMap[t.uuid]&&e._itemConfigListenersMap[t.uuid].forEach((function(e){e(t)}))},this._loadData=function(){var t=localStorage.getItem(u);if(t){var n=JSON.parse(t),i=[],r=0;n.itemConfigs.forEach((function(e){var t=o.find((function(t){return t.uuid===e.uuid})),u=a(a(a({},t),e),{productionStartAt:null});if(e.productionStartAt){u.productionStartAt=new Date(e.productionStartAt);var s=(new Date).getTime()-u.productionStartAt.getTime();if(u.hasManager){var c=Math.floor(s/u.productionTime);r+=c*u.revenueFn(u.level)}else{s>=u.productionTime&&u.productionStartAt.getTime()+u.productionTime>new Date(n.savedAt).getTime()&&(r+=u.revenueFn(u.level))}}i.push(u)})),e._itemConfigs=i,e._money=n.money+r}},this._saveData=function(){var t={itemConfigs:e._itemConfigs.map((function(e){return{uuid:e.uuid,level:e.level,purchased:e.purchased,hasManager:e.hasManager,productionStartAt:e.productionStartAt?e.productionStartAt.toISOString():null}})),money:e._money,savedAt:new Date};localStorage.setItem(u,JSON.stringify(t))},this.loadItemConfigs=function(){return e._itemConfigs.map((function(e){return a({},e)}))},this.loadMoney=function(){return e._money},this.updateMoney=function(t){e._money=t},this.updateItemProducingTime=function(t,n){void 0===n&&(n=new Date),e._itemConfigs.find((function(e){return e.uuid===t})).productionStartAt=n},this.getItemConfigByUuid=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));return a({},n)},this.subscribeItemConfig=function(t,n){e._itemConfigListenersMap[t]||(e._itemConfigListenersMap[t]=[]),e._itemConfigListenersMap[t].push(n)},this.purchaseItem=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));n.purchased=!0,e._notifyItemConfigUpdated(n)},this.upgradeItem=function(t){e._itemConfigs.find((function(e){return e.uuid===t})).level+=1},this.hireManager=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));if(!n)throw new Error("There is no item config for "+n.name);if(n.hasManager)throw new Error("Already have a manager for "+n.name);n.hasManager=!0,e._notifyItemConfigUpdated(n)},this._itemConfigs=o,this._money=1e3,this._loadData(),window.onbeforeunload=function(){e._saveData()}}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(),c=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},l=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},h=function(){function e(e){var t=this;this._moneyListener=[],this._lock=!1,this._notifyMoneyChange=function(){t._capitalismService.updateMoney(t._currentMoney),t._moneyListener.forEach((function(e){return e(t._currentMoney)}))},this.getMoney=function(){return t._currentMoney.toFixed(2)},this.onAddMoney=function(e){t._currentMoney+=e,t._notifyMoneyChange()},this.subscribeMoney=function(e){t._moneyListener.push(e)},this.chargeMoney=function(e){return c(t,void 0,void 0,(function(){return l(this,(function(t){return this._lock?[2,!1]:(this._lock=!0,this._currentMoney<e?(this._lock=!1,[2,!1]):(this._currentMoney-=e,this._lock=!1,this._notifyMoneyChange(),[2,!0]))}))}))},this._capitalismService=s.getInstance(),this._currentMoney=this._capitalismService.loadMoney()}return e.getInstance=function(){return e._instance||(e._instance=new e(1e3)),e._instance},e}(),m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},f=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},d=function(){function e(e,t,n){var i=this;this._element=null,this._titleElem=null,this._upgradeCostElem=null,this._revenueElem=null,this._progressElem=null,this._isProducing=!1,this._currentProducing=null,this.updateConfig=function(e){if(i._itemConfig.name!==e.name)throw new Error("Service updates with different item config");i._itemConfig=e,i.renderRevenueAndUpgradeCost(),e.hasManager&&i.initializeManager()},this.initializeManager=function(){return m(i,void 0,void 0,(function(){var e,t,n,i=this;return f(this,(function(r){switch(r.label){case 0:return this._titleElem.onclick=null,this._titleElem.innerText=this._itemConfig.name+" (has manager)",this._itemConfig=this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid),e=new Date,t=0,this._currentProducing?[4,this._currentProducing]:[3,2];case 1:return r.sent(),[3,3];case 2:this._itemConfig.productionStartAt&&this._itemConfig.productionStartAt.getTime()+this._itemConfig.productionTime>e.getTime()&&(t=e.getTime()-this._itemConfig.productionStartAt.getTime()),r.label=3;case 3:return(n=function(){return m(i,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this._produceItem(t)];case 1:return e.sent(),t=0,[2,n()]}}))}))})(),[2]}}))}))},this._produceItem=function(e){return void 0===e&&(e=0),m(i,void 0,void 0,(function(){var t=this;return f(this,(function(n){return[2,new Promise((function(n){if(!t._isProducing){t._isProducing=!0,0===e&&t._capitalismService.updateItemProducingTime(t._itemConfig.uuid),t._progressElem.innerText=(e/1e3).toFixed(1)+" s";var i=setInterval((function(){e+=100,t._progressElem.innerText=(e/1e3).toFixed(1)+" s"}),100);setTimeout((function(){clearInterval(i),t._progressElem.innerText="",t._wallet.onAddMoney(t._revenue),t._isProducing=!1,n()}),t._itemConfig.productionTime-e)}}))]}))}))},this.handleUpgrade=function(){return m(i,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this._wallet.chargeMoney(this._upgradeCost)];case 1:return e.sent()?(this._capitalismService.upgradeItem(this._itemConfig.uuid),this._itemConfig=this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid),this._revenue=this._itemConfig.revenueFn(this._itemConfig.level),this._upgradeCost=this._itemConfig.upgradeCostFn(this._itemConfig.level),this.renderRevenueAndUpgradeCost(),[2]):[2]}}))}))},this.handleProduce=function(){i._currentProducing=i._produceItem()},this.getElement=function(){return i._element},this._itemConfig=e,this._wallet=t,this._revenue=e.revenueFn(e.level),this._upgradeCost=e.upgradeCostFn(e.level),this._capitalismService=n,this._capitalismService.subscribeItemConfig(e.uuid,this.updateConfig),this.render(),this._itemConfig.hasManager&&this.initializeManager(),this.renderRevenueAndUpgradeCost()}return e.prototype.renderRevenueAndUpgradeCost=function(){this._upgradeCostElem.innerText="upgrade: "+this._upgradeCost.toFixed(2),this._revenueElem.innerText="$ "+this._revenue.toFixed(2)},e.prototype.render=function(){this._element=document.createElement("div"),this._element.className="item",this._element.id=this._itemConfig.name,this._titleElem=document.createElement("div"),this._titleElem.className="name",this._titleElem.innerText=this._itemConfig.name,this._titleElem.onclick=this.handleProduce;var e=document.createElement("div");e.className="production-time",e.innerText="take: "+(this._itemConfig.productionTime/1e3).toFixed(0)+" s",this._revenueElem=document.createElement("div"),this._revenueElem.className="revenue",this._upgradeCostElem=document.createElement("div"),this._upgradeCostElem.className="upgrade",this._upgradeCostElem.onclick=this.handleUpgrade,this._progressElem=document.createElement("div"),this._progressElem.className="progress",this._element.appendChild(this._titleElem),this._element.appendChild(this._revenueElem),this._element.appendChild(e),this._element.appendChild(this._upgradeCostElem),this._element.appendChild(this._progressElem)},e}(),p=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},g=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},_=function(e,t,n){var i=this;this._isPurchasing=!1,this.handlePurchase=function(){return p(i,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return this._isPurchasing?[2]:(this._isPurchasing=!0,[4,this._wallet.chargeMoney(this._itemConfig.price)]);case 1:return e.sent()?(this._isPurchasing=!1,this._onPurchased(),[2]):(this._isPurchasing=!1,[2])}}))}))},this.getElement=function(){return i._element},this._itemConfig=e,this._wallet=t,this._onPurchased=n,this._element=document.createElement("div"),this._element.className="item",this._element.onclick=this.handlePurchase;var r=document.createElement("div");r.className="purchase-text",r.innerText="purchase "+e.name+" for "+e.price.toFixed(2),this._element.appendChild(r)},v=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},y=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},C=function(e,t,n){var i=this;this.appendManagerElements=function(){i._capitalismService.loadItemConfigs().forEach((function(e){var t=document.createElement("div");t.className="hire-manager",e.hasManager?t.innerText="Hired Manager for "+e.name:t.innerText="Manager for "+e.name+" (cost $"+e.managerPrice+")",t.onclick=function(){return v(i,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e.purchased?[4,this._wallet.chargeMoney(e.managerPrice)]:(alert("Please purchase item first"),[2]);case 1:return n.sent()?(this._capitalismService.hireManager(e.uuid),t.onclick=null,t.className+=" purchased",t.innerText="Hired Manager for "+e.name,[2]):[2]}}))}))},i._element.appendChild(t)}))},this.getElement=function(){return i._element},this._capitalismService=e,this._wallet=t,this._element=document.createElement("div"),this._element.className="hire-manager-wrapper";var r=document.createElement("button");r.innerText="Close",r.onclick=n,this._element.appendChild(r),this.appendManagerElements()},b=function(e,t){var n=this;void 0===e&&(e=s.getInstance()),void 0===t&&(t=h.getInstance()),this._element=null,this._totalMoneyElem=null,this._itemsWrapperElem=null,this._items={},this._capitalismService=null,this._wallet=null,this.generateItem=function(e){return new d(e,n._wallet,n._capitalismService)},this.generatePurchaseItem=function(e){return new _(e,n._wallet,(function(){n._capitalismService.purchaseItem(e.uuid);var t=n._capitalismService.getItemConfigByUuid(e.uuid),i=n._items[e.uuid];i.itemConfig=t,n._items[e.uuid].item=new d(t,n._wallet,n._capitalismService),n._itemsWrapperElem.replaceChild(n._items[e.uuid].item.getElement(),n._itemsWrapperElem.childNodes[i.order])}))},this.renderItemWrapper=function(){var e=document.createElement("div");return n._capitalismService.loadItemConfigs().forEach((function(t,i){var r={itemConfig:t,order:i};if(t.purchased){var o=n.generateItem(t);r.item=o,e.appendChild(o.getElement())}else{var a=n.generatePurchaseItem(t);r.itemPurchase=a,e.appendChild(a.getElement())}n._items[t.uuid]=r})),e},this.renderTotalMoney=function(){var e=document.createElement("div");return e.className="total money",e.innerText="total: "+n._wallet.getMoney(),n._wallet.subscribeMoney((function(t){e.innerText="total: "+t.toFixed(2)})),e},this.renderHireManagerButton=function(){var e=document.createElement("button");return e.className="hire-manager-button",e.innerText="Hire Manager",e.onclick=function(){var e,t=new C(n._capitalismService,n._wallet,(function(){n._element.removeChild(e)}));e=t.getElement(),n._element.appendChild(e)},e},this.getElement=function(){return n._element},this._capitalismService=e,this._wallet=t,this._totalMoneyElem=this.renderTotalMoney(),this._itemsWrapperElem=this.renderItemWrapper(),this._element=document.createElement("div"),this._element.appendChild(this._totalMoneyElem),this._element.appendChild(this._itemsWrapperElem),this._element.appendChild(this.renderHireManagerButton())};!function(){console.log("==== Initializing start ====");var e=h.getInstance(),t=s.getInstance(),n=document.getElementById("app");if(!n)throw new Error("There is no #app element to attach game elements");var i=new b(t,e);n.appendChild(i.getElement()),console.log("==== Initialized ====")}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9zZXJ2aWNlcy9XYWxsZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9JdGVtUHVyY2hhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSGlyZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRhaW5lcnMvQ2FwaXRhbGlzbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZW5lcmF0ZVJldmVudWVGbiIsImJhc2UiLCJpbmNyZWFzaW5nUmV2ZW51ZSIsImxldmVsIiwiZ2VuZXJhdGVVcGdyYWRlQ29zdEZuIiwiaW5jcmVhc2luZ1JhdGlvIiwiaXRlbUNvbmZpZ3MiLCJ1dWlkIiwicHJvZHVjdGlvblRpbWUiLCJyZXZlbnVlRm4iLCJ1cGdyYWRlQ29zdEZuIiwicHVyY2hhc2VkIiwicHJpY2UiLCJoYXNNYW5hZ2VyIiwibWFuYWdlclByaWNlIiwiU1RPUkVfS0VZIiwiX2l0ZW1Db25maWdzIiwiX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXAiLCJfbm90aWZ5SXRlbUNvbmZpZ1VwZGF0ZWQiLCJpdGVtQ29uZmlnIiwiZm9yRWFjaCIsImZuIiwiX2xvYWREYXRhIiwianNvbkRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmVEYXRhIiwiSlNPTiIsInBhcnNlIiwibG9hZGVkSXRlbUNvbmZpZ3MiLCJhZGRpdGlvbmFsTW9uZXkiLCJzdG9yZWRJdGVtQ29uZmlnIiwiaW5pdGlhbEl0ZW1Db25maWciLCJmaW5kIiwicHJvZHVjdGlvblN0YXJ0QXQiLCJEYXRlIiwidGltZURpZmYiLCJnZXRUaW1lIiwicHJvZHVjZWRBbW91bnQiLCJNYXRoIiwiZmxvb3IiLCJzYXZlZEF0IiwicHVzaCIsIl9tb25leSIsIm1vbmV5IiwiX3NhdmVEYXRhIiwic3RvcmVkRGF0YSIsIm1hcCIsInRvSVNPU3RyaW5nIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImxvYWRJdGVtQ29uZmlncyIsImxvYWRNb25leSIsInVwZGF0ZU1vbmV5IiwidXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUiLCJpdGVtVXVpZCIsImRhdGUiLCJnZXRJdGVtQ29uZmlnQnlVdWlkIiwic3Vic2NyaWJlSXRlbUNvbmZpZyIsInB1cmNoYXNlSXRlbSIsInVwZ3JhZGVJdGVtIiwiaGlyZU1hbmFnZXIiLCJFcnJvciIsInRoaXMiLCJ3aW5kb3ciLCJvbmJlZm9yZXVubG9hZCIsImdldEluc3RhbmNlIiwiQ2FwaXRhbGlzbVNlcnZpY2UiLCJfaW5zdGFuY2UiLCJiYXNlTW9uZXkiLCJfbW9uZXlMaXN0ZW5lciIsIl9sb2NrIiwiX25vdGlmeU1vbmV5Q2hhbmdlIiwiX2NhcGl0YWxpc21TZXJ2aWNlIiwiX2N1cnJlbnRNb25leSIsImdldE1vbmV5IiwidG9GaXhlZCIsIm9uQWRkTW9uZXkiLCJzdWJzY3JpYmVNb25leSIsImNoYXJnZU1vbmV5IiwiV2FsbGV0Iiwid2FsbGV0IiwiY2FwaXRhbGlzbVNlcnZpY2UiLCJfZWxlbWVudCIsIl90aXRsZUVsZW0iLCJfdXBncmFkZUNvc3RFbGVtIiwiX3JldmVudWVFbGVtIiwiX3Byb2dyZXNzRWxlbSIsIl9pc1Byb2R1Y2luZyIsIl9jdXJyZW50UHJvZHVjaW5nIiwidXBkYXRlQ29uZmlnIiwiX2l0ZW1Db25maWciLCJyZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QiLCJpbml0aWFsaXplTWFuYWdlciIsIm9uY2xpY2siLCJpbm5lclRleHQiLCJub3ciLCJpbml0aWFsUHJvZ3Jlc3NUaW1lIiwicmVjdXJzaXZlUHJvZHVjaW5nIiwiX3Byb2R1Y2VJdGVtIiwicHJvZ3Jlc3NUaW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwic2V0VGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJfd2FsbGV0IiwiX3JldmVudWUiLCJoYW5kbGVVcGdyYWRlIiwiX3VwZ3JhZGVDb3N0IiwiaGFuZGxlUHJvZHVjZSIsImdldEVsZW1lbnQiLCJyZW5kZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpZCIsImFwcGVuZENoaWxkIiwib25QdXJjaGFzZWQiLCJfaXNQdXJjaGFzaW5nIiwiaGFuZGxlUHVyY2hhc2UiLCJfb25QdXJjaGFzZWQiLCJwdXJjaGFzZVRleHRFbGVtIiwiY2xvc2VIaXJlTWFuYWdlciIsImFwcGVuZE1hbmFnZXJFbGVtZW50cyIsIndyYXBwZXIiLCJhbGVydCIsImNsb3NlQnV0dG9uIiwiX3RvdGFsTW9uZXlFbGVtIiwiX2l0ZW1zV3JhcHBlckVsZW0iLCJfaXRlbXMiLCJnZW5lcmF0ZUl0ZW0iLCJnZW5lcmF0ZVB1cmNoYXNlSXRlbSIsInVwZGF0ZWRJdGVtQ29uZmlnIiwiY3VycmVudFByb3BlcnR5IiwiaXRlbSIsInJlcGxhY2VDaGlsZCIsImNoaWxkTm9kZXMiLCJvcmRlciIsInJlbmRlckl0ZW1XcmFwcGVyIiwiaXRlbXNXcmFwcGVyRWxlbSIsImlkeCIsIml0ZW1QdXJjaGFzZSIsInJlbmRlclRvdGFsTW9uZXkiLCJ0b3RhbE1vbmV5RWxlbSIsInJlbmRlckhpcmVNYW5hZ2VyQnV0dG9uIiwiaGlyZU1hbmFnZXJCdXR0b24iLCJoaXJlTWFuYWdlckVsZW0iLCJyZW1vdmVDaGlsZCIsImNvbnNvbGUiLCJsb2ciLCJhcHAiLCJnZXRFbGVtZW50QnlJZCIsImNhcGl0YWxpc20iLCJpbml0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVB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RSxZQUFZRCxNQUdsQ0EsRUFBa0J2RixFQUFZbUQsYUFDOUIsRUFBSzdCLFNBQVNtQyxZQUFZOEIsSUFFdkJELEdBR0YsS0FBQW5DLFdBQWEsV0FBbUIsU0FBSzdCLFVBL0YxQ3BCLEtBQUtVLG1CQUFxQlMsRUFDMUJuQixLQUFLNEMsUUFBVTFCLEVBQ2ZsQixLQUFLa0UsZ0JBQWtCbEUsS0FBS2lGLG1CQUM1QmpGLEtBQUttRSxrQkFBb0JuRSxLQUFLNkUsb0JBQzlCN0UsS0FBS29CLFNBQVcrQixTQUFTQyxjQUFjLE9BQ3ZDcEQsS0FBS29CLFNBQVNtQyxZQUFZdkQsS0FBS2tFLGlCQUMvQmxFLEtBQUtvQixTQUFTbUMsWUFBWXZELEtBQUttRSxtQkFDL0JuRSxLQUFLb0IsU0FBU21DLFlBQVl2RCxLQUFLbUYsNkJDN0J0QixXQUNYSSxRQUFRQyxJQUFJLGdDQUVaLElBQU10RSxFQUFTLEVBQU9mLGNBQ2hCZ0IsRUFBb0IsRUFBa0JoQixjQUV0Q3NGLEVBQU10QyxTQUFTdUMsZUFBZSxPQUNwQyxJQUFLRCxFQUNILE1BQU0sSUFBSTFGLE1BQU0sb0RBRWxCLElBQU00RixFQUFhLElBQUksRUFBV3hFLEVBQW1CRCxHQUNyRHVFLEVBQUlsQyxZQUFZb0MsRUFBVzFDLGNBQzNCc0MsUUFBUUMsSUFBSSx5QkFHZEkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IEl0ZW1UeXBlcyBmcm9tIFwiLi90eXBlcy9JdGVtLnR5cGVcIlxuXG5leHBvcnQgY29uc3QgRElTUExBWV9ERUNJTUFMID0gMlxuXG5jb25zdCBnZW5lcmF0ZVJldmVudWVGbiA9IChiYXNlOiBudW1iZXIsIGluY3JlYXNpbmdSZXZlbnVlOiBudW1iZXIpID0+IChsZXZlbDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIGJhc2UgKyAobGV2ZWwgKiBpbmNyZWFzaW5nUmV2ZW51ZSlcbn1cbmNvbnN0IGdlbmVyYXRlVXBncmFkZUNvc3RGbiA9IChiYXNlOiBudW1iZXIsIGluY3JlYXNpbmdSYXRpbzogbnVtYmVyKSA9PiAobGV2ZWw6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiBiYXNlICsgKGxldmVsICogbGV2ZWwgKiBpbmNyZWFzaW5nUmF0aW8pXG59XG5cbmV4cG9ydCBjb25zdCBpdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtbGVtb24nLFxuICAgICAgbmFtZTogJ0xlbW9uJyxcbiAgICAgIHByb2R1Y3Rpb25UaW1lOiAxMDAwLFxuICAgICAgcmV2ZW51ZUZuOiBnZW5lcmF0ZVJldmVudWVGbigxLCAwLjgpLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDEsIDAuNiksXG4gICAgICBsZXZlbDogMSxcbiAgICAgIHB1cmNoYXNlZDogdHJ1ZSxcbiAgICAgIHByaWNlOiAwLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDEwMFxuICB9LFxuICB7XG4gICAgICB1dWlkOiAndXVpZC1pY2UtY3JlYW0nLFxuICAgICAgbmFtZTogJ0ljZSBjcmVhbScsXG4gICAgICBwcm9kdWN0aW9uVGltZTogMzAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMTAsIDUpLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDEwLCAwLjYpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDEsXG4gICAgICBoYXNNYW5hZ2VyOiBmYWxzZSxcbiAgICAgIG1hbmFnZXJQcmljZTogNTAwXG4gIH0sXG4gIHtcbiAgICAgIHV1aWQ6ICd1dWlkLWJpY3ljbGUnLFxuICAgICAgbmFtZTogJ0JpY3ljbGUnLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDEwMDAwLFxuICAgICAgcmV2ZW51ZUZuOiBnZW5lcmF0ZVJldmVudWVGbigyMCwgMTApLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDE1LCAwLjYpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDEwLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDIwMDBcbiAgfSxcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtbW90b3ItYmlrZScsXG4gICAgICBuYW1lOiAnTW90b3IgQmlrZScsXG4gICAgICBwcm9kdWN0aW9uVGltZTogNjAgKiA2MDAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMzAsIDE1KSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigyMCwgMSksXG4gICAgICBsZXZlbDogMSxcbiAgICAgIHB1cmNoYXNlZDogZmFsc2UsXG4gICAgICBwcmljZTogNTAsXG4gICAgICBoYXNNYW5hZ2VyOiBmYWxzZSxcbiAgICAgIG1hbmFnZXJQcmljZTogNDAwMFxuICB9LFxuICB7XG4gICAgICB1dWlkOiAndXVpZC1jYXInLFxuICAgICAgbmFtZTogJ0NhcicsXG4gICAgICBwcm9kdWN0aW9uVGltZTogNjAgKiA2MCAqIDUwMDAsXG4gICAgICByZXZlbnVlRm46IGdlbmVyYXRlUmV2ZW51ZUZuKDUwLCAyNSksXG4gICAgICB1cGdyYWRlQ29zdEZuOiBnZW5lcmF0ZVVwZ3JhZGVDb3N0Rm4oNDAsIDIpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDEwMCxcbiAgICAgIGhhc01hbmFnZXI6IGZhbHNlLFxuICAgICAgbWFuYWdlclByaWNlOiA4MDAwXG4gIH1cbl1cbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSBcIi4uL3R5cGVzL0l0ZW0udHlwZVwiXG5pbXBvcnQgeyBpdGVtQ29uZmlncyB9IGZyb20gXCIuLi9jb25maWdcIlxuXG5jb25zdCBTVE9SRV9LRVkgPSBcImNhcGl0YWxpc20tc2VydmljZS1sb2NhbC1zdG9yYWdlLWtleVwiXG5jb25zdCBTVEFSVF9NT05FWSA9IDEwMDBcblxudHlwZSBJdGVtUHJvZHVjaW5nU2NoZWR1bGVkID0ge1xuICBba2V5OiBzdHJpbmddOiBEYXRlXG59XG5cbnR5cGUgU3RvcmVkRGF0YSA9IHtcbiAgaXRlbUNvbmZpZ3M6IHtcbiAgICB1dWlkOiBzdHJpbmdcbiAgICBsZXZlbDogbnVtYmVyXG4gICAgcHVyY2hhc2VkOiBib29sZWFuXG4gICAgaGFzTWFuYWdlcjogYm9vbGVhblxuICAgIHByb2R1Y3Rpb25TdGFydEF0OiBzdHJpbmdcbiAgfVtdXG4gIG1vbmV5OiBudW1iZXJcbiAgc2F2ZWRBdDogRGF0ZSB8IHN0cmluZ1xufVxuXG5jbGFzcyBDYXBpdGFsaXNtU2VydmljZSB7XG4gIHByaXZhdGUgc3RhdGljIF9pbnN0YW5jZTogQ2FwaXRhbGlzbVNlcnZpY2VcblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IENhcGl0YWxpc21TZXJ2aWNlIHtcbiAgICBpZiAoIUNhcGl0YWxpc21TZXJ2aWNlLl9pbnN0YW5jZSkge1xuICAgICAgQ2FwaXRhbGlzbVNlcnZpY2UuX2luc3RhbmNlID0gbmV3IENhcGl0YWxpc21TZXJ2aWNlKClcbiAgICB9XG4gICAgcmV0dXJuIENhcGl0YWxpc21TZXJ2aWNlLl9pbnN0YW5jZVxuICB9XG5cbiAgcHJpdmF0ZSBfbW9uZXk6IG51bWJlclxuICBwcml2YXRlIF9pdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtdXG4gIHByaXZhdGUgX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXA6IHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTwoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHZvaWQ+XG4gIH0gPSB7fVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2l0ZW1Db25maWdzID0gaXRlbUNvbmZpZ3NcbiAgICB0aGlzLl9tb25leSA9IFNUQVJUX01PTkVZXG4gICAgdGhpcy5fbG9hZERhdGEoKVxuICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuX3NhdmVEYXRhKClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZCA9IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4ge1xuICAgIGlmICghdGhpcy5faXRlbUNvbmZpZ0xpc3RlbmVyc01hcFtpdGVtQ29uZmlnLnV1aWRdKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5faXRlbUNvbmZpZ0xpc3RlbmVyc01hcFtpdGVtQ29uZmlnLnV1aWRdLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICBmbihpdGVtQ29uZmlnKVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIF9sb2FkRGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCBqc29uRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JFX0tFWSlcbiAgICBpZiAoIWpzb25EYXRhKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3Qgc3RvcmVEYXRhOiBTdG9yZWREYXRhID0gSlNPTi5wYXJzZShqc29uRGF0YSlcblxuICAgIGNvbnN0IGxvYWRlZEl0ZW1Db25maWdzOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1tdID0gW11cbiAgICBsZXQgaXRlbVByb2R1Y2luZ1NjaGVkdWxlZDogSXRlbVByb2R1Y2luZ1NjaGVkdWxlZCA9IHt9XG4gICAgbGV0IGFkZGl0aW9uYWxNb25leSA9IDBcbiAgICBzdG9yZURhdGEuaXRlbUNvbmZpZ3MuZm9yRWFjaCgoc3RvcmVkSXRlbUNvbmZpZykgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbEl0ZW1Db25maWcgPSBpdGVtQ29uZmlncy5maW5kKFxuICAgICAgICAoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBzdG9yZWRJdGVtQ29uZmlnLnV1aWRcbiAgICAgIClcbiAgICAgIGNvbnN0IGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnID0ge1xuICAgICAgICAuLi5pbml0aWFsSXRlbUNvbmZpZyxcbiAgICAgICAgLi4uc3RvcmVkSXRlbUNvbmZpZyxcbiAgICAgICAgcHJvZHVjdGlvblN0YXJ0QXQ6IG51bGwsXG4gICAgICB9XG4gICAgICBpZiAoc3RvcmVkSXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdCkge1xuICAgICAgICBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0ID0gbmV3IERhdGUoXG4gICAgICAgICAgc3RvcmVkSXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdFxuICAgICAgICApXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmY6IG51bWJlciA9XG4gICAgICAgICAgbm93LmdldFRpbWUoKSAtIGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQuZ2V0VGltZSgpXG4gICAgICAgIGxldCBjdXJyZW50UHJvZHVjdGlvblNlY29uZHMgPSBudWxsXG4gICAgICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgICAgICBjb25zdCBwcm9kdWNlZEFtb3VudCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICB0aW1lRGlmZiAvIGl0ZW1Db25maWcucHJvZHVjdGlvblRpbWVcbiAgICAgICAgICApXG4gICAgICAgICAgYWRkaXRpb25hbE1vbmV5ICs9XG4gICAgICAgICAgICBwcm9kdWNlZEFtb3VudCAqIGl0ZW1Db25maWcucmV2ZW51ZUZuKGl0ZW1Db25maWcubGV2ZWwpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZmluaXNoZWQgPVxuICAgICAgICAgICAgdGltZURpZmYgPj0gaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSAmJlxuICAgICAgICAgICAgaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC5nZXRUaW1lKCkgKyBpdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lID5cbiAgICAgICAgICAgICAgbmV3IERhdGUoc3RvcmVEYXRhLnNhdmVkQXQpLmdldFRpbWUoKVxuICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgYWRkaXRpb25hbE1vbmV5ICs9IGl0ZW1Db25maWcucmV2ZW51ZUZuKGl0ZW1Db25maWcubGV2ZWwpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsb2FkZWRJdGVtQ29uZmlncy5wdXNoKGl0ZW1Db25maWcpXG4gICAgfSlcbiAgICA7KHRoaXMuX2l0ZW1Db25maWdzID0gbG9hZGVkSXRlbUNvbmZpZ3MpLFxuICAgICAgKHRoaXMuX21vbmV5ID0gc3RvcmVEYXRhLm1vbmV5ICsgYWRkaXRpb25hbE1vbmV5KVxuICB9XG5cbiAgcHJpdmF0ZSBfc2F2ZURhdGEgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmVkRGF0YTogU3RvcmVkRGF0YSA9IHtcbiAgICAgIGl0ZW1Db25maWdzOiB0aGlzLl9pdGVtQ29uZmlncy5tYXAoKGl0ZW1Db25maWcpID0+ICh7XG4gICAgICAgIHV1aWQ6IGl0ZW1Db25maWcudXVpZCxcbiAgICAgICAgbGV2ZWw6IGl0ZW1Db25maWcubGV2ZWwsXG4gICAgICAgIHB1cmNoYXNlZDogaXRlbUNvbmZpZy5wdXJjaGFzZWQsXG4gICAgICAgIGhhc01hbmFnZXI6IGl0ZW1Db25maWcuaGFzTWFuYWdlcixcbiAgICAgICAgcHJvZHVjdGlvblN0YXJ0QXQ6IGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXRcbiAgICAgICAgICA/IGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQudG9JU09TdHJpbmcoKVxuICAgICAgICAgIDogbnVsbCxcbiAgICAgIH0pKSxcbiAgICAgIG1vbmV5OiB0aGlzLl9tb25leSxcbiAgICAgIHNhdmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JFX0tFWSwgSlNPTi5zdHJpbmdpZnkoc3RvcmVkRGF0YSkpXG4gIH1cblxuICBwdWJsaWMgbG9hZEl0ZW1Db25maWdzID0gKCkgPT5cbiAgICB0aGlzLl9pdGVtQ29uZmlncy5tYXAoKGl0ZW1Db25maWcpID0+ICh7IC4uLml0ZW1Db25maWcgfSkpXG5cbiAgcHVibGljIGxvYWRNb25leSA9ICgpID0+IHRoaXMuX21vbmV5XG5cbiAgcHVibGljIHVwZGF0ZU1vbmV5ID0gKG1vbmV5OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLl9tb25leSA9IG1vbmV5XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUgPSAoXG4gICAgaXRlbVV1aWQ6IHN0cmluZyxcbiAgICBkYXRlOiBEYXRlID0gbmV3IERhdGUoKVxuICApID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZChcbiAgICAgIChpdGVtQ29uZmlnKSA9PiBpdGVtQ29uZmlnLnV1aWQgPT09IGl0ZW1VdWlkXG4gICAgKVxuICAgIGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQgPSBkYXRlXG4gIH1cblxuICBwdWJsaWMgZ2V0SXRlbUNvbmZpZ0J5VXVpZCA9IChpdGVtVXVpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaXRlbUNvbmZpZyA9IHRoaXMuX2l0ZW1Db25maWdzLmZpbmQoXG4gICAgICAoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZFxuICAgIClcbiAgICByZXR1cm4geyAuLi5pdGVtQ29uZmlnIH1cbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVJdGVtQ29uZmlnID0gKFxuICAgIGl0ZW1VdWlkOiBzdHJpbmcsXG4gICAgZm46IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4gdm9pZFxuICApID0+IHtcbiAgICBpZiAoIXRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdKSB7XG4gICAgICB0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1VdWlkXSA9IFtdXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdLnB1c2goZm4pXG4gIH1cblxuICBwdWJsaWMgcHVyY2hhc2VJdGVtID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZChcbiAgICAgIChpdGVtQ29uZmlnKSA9PiBpdGVtQ29uZmlnLnV1aWQgPT09IGl0ZW1VdWlkXG4gICAgKVxuICAgIGl0ZW1Db25maWcucHVyY2hhc2VkID0gdHJ1ZVxuICAgIHRoaXMuX25vdGlmeUl0ZW1Db25maWdVcGRhdGVkKGl0ZW1Db25maWcpXG4gIH1cblxuICBwdWJsaWMgdXBncmFkZUl0ZW0gPSAoaXRlbVV1aWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWcgPSB0aGlzLl9pdGVtQ29uZmlncy5maW5kKFxuICAgICAgKGl0ZW1Db25maWcpID0+IGl0ZW1Db25maWcudXVpZCA9PT0gaXRlbVV1aWRcbiAgICApXG4gICAgaXRlbUNvbmZpZy5sZXZlbCArPSAxXG4gIH1cblxuICBwdWJsaWMgaGlyZU1hbmFnZXIgPSAoaXRlbVV1aWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWcgPSB0aGlzLl9pdGVtQ29uZmlncy5maW5kKFxuICAgICAgKGl0ZW1Db25maWcpID0+IGl0ZW1Db25maWcudXVpZCA9PT0gaXRlbVV1aWRcbiAgICApXG4gICAgaWYgKCFpdGVtQ29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIGl0ZW0gY29uZmlnIGZvciAke2l0ZW1Db25maWcubmFtZX1gKVxuICAgIH1cbiAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgaGF2ZSBhIG1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWApXG4gICAgfVxuICAgIGl0ZW1Db25maWcuaGFzTWFuYWdlciA9IHRydWVcbiAgICB0aGlzLl9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZChpdGVtQ29uZmlnKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcGl0YWxpc21TZXJ2aWNlXG4iLCJpbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi9jYXBpdGFsaXNtLnNlcnZpY2UnXG5jbGFzcyBXYWxsZXQge1xuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IFdhbGxldFxuICBwcml2YXRlIF9jYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2VcbiAgcHJpdmF0ZSBfY3VycmVudE1vbmV5OiBudW1iZXJcbiAgcHJpdmF0ZSBfbW9uZXlMaXN0ZW5lcjogQXJyYXk8KG1vbmV5OiBudW1iZXIpID0+IHZvaWQ+ID0gW11cbiAgcHJpdmF0ZSBfbG9jazogQm9vbGVhbiA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IgKGJhc2VNb25leTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpXG4gICAgdGhpcy5fY3VycmVudE1vbmV5ID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZE1vbmV5KClcbiAgfVxuXG4gIHByaXZhdGUgX25vdGlmeU1vbmV5Q2hhbmdlID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLnVwZGF0ZU1vbmV5KHRoaXMuX2N1cnJlbnRNb25leSlcbiAgICB0aGlzLl9tb25leUxpc3RlbmVyLmZvckVhY2goKGZuKSA9PiBmbih0aGlzLl9jdXJyZW50TW9uZXkpKVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSA9ICgpID0+IHtcbiAgICBpZiAoIVdhbGxldC5faW5zdGFuY2UpIHtcbiAgICAgIFdhbGxldC5faW5zdGFuY2UgPSBuZXcgV2FsbGV0KDEwMDApXG4gICAgfVxuICAgIHJldHVybiBXYWxsZXQuX2luc3RhbmNlXG4gIH1cblxuICBwdWJsaWMgZ2V0TW9uZXkgPSAoKSA9PiB0aGlzLl9jdXJyZW50TW9uZXkudG9GaXhlZCgyKVxuXG4gIHB1YmxpYyBvbkFkZE1vbmV5ID0gKG1vbmV5OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgKz0gbW9uZXlcbiAgICB0aGlzLl9ub3RpZnlNb25leUNoYW5nZSgpXG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlTW9uZXkgPSAoZm46IChtb25leTogbnVtYmVyKSA9PiB2b2lkKSA9PiB7XG4gICAgdGhpcy5fbW9uZXlMaXN0ZW5lci5wdXNoKGZuKVxuICB9XG5cbiAgLy8gU2ltcGxlIGxvY2tpbmdcbiAgcHVibGljIGNoYXJnZU1vbmV5ID0gYXN5bmMgKG1vbmV5OiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAodGhpcy5fbG9jaykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMuX2xvY2sgPSB0cnVlXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRNb25leSA8IG1vbmV5KSB7XG4gICAgICB0aGlzLl9sb2NrID0gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgLT0gbW9uZXlcbiAgICB0aGlzLl9sb2NrID0gZmFsc2VcbiAgICB0aGlzLl9ub3RpZnlNb25leUNoYW5nZSgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXYWxsZXRcbiIsImltcG9ydCB7IERJU1BMQVlfREVDSU1BTCB9IGZyb20gXCIuLi9jb25maWdcIlxuaW1wb3J0IEl0ZW1UeXBlcyBmcm9tIFwiLi4vdHlwZXMvSXRlbS50eXBlXCJcbmltcG9ydCBXYWxsZXQgZnJvbSBcIi4uL3NlcnZpY2VzL1dhbGxldFwiXG5pbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL2NhcGl0YWxpc20uc2VydmljZVwiXG5cbmNsYXNzIEl0ZW0ge1xuICBwcml2YXRlIF9pdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1xuICBwcml2YXRlIF93YWxsZXQ6IFdhbGxldFxuICBwcml2YXRlIF9jYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2VcblxuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGxcbiAgcHJpdmF0ZSBfdGl0bGVFbGVtOiBIVE1MRWxlbWVudCA9IG51bGxcbiAgcHJpdmF0ZSBfdXBncmFkZUNvc3RFbGVtOiBIVE1MRWxlbWVudCA9IG51bGxcbiAgcHJpdmF0ZSBfcmV2ZW51ZUVsZW06IEhUTUxFbGVtZW50ID0gbnVsbFxuICBwcml2YXRlIF9wcm9ncmVzc0VsZW06IEhUTUxFbGVtZW50ID0gbnVsbFxuXG4gIHByaXZhdGUgX3JldmVudWU6IG51bWJlclxuICBwcml2YXRlIF91cGdyYWRlQ29zdDogbnVtYmVyXG4gIHByaXZhdGUgX2lzUHJvZHVjaW5nOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBfY3VycmVudFByb2R1Y2luZzogUHJvbWlzZTx2b2lkPiA9IG51bGxcblxuICBjb25zdHJ1Y3RvcihcbiAgICBpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZyxcbiAgICB3YWxsZXQ6IFdhbGxldCxcbiAgICBjYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2VcbiAgKSB7XG4gICAgLy8gQ29weSBDb25maWdcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0gaXRlbUNvbmZpZ1xuICAgIHRoaXMuX3dhbGxldCA9IHdhbGxldFxuICAgIHRoaXMuX3JldmVudWUgPSBpdGVtQ29uZmlnLnJldmVudWVGbihpdGVtQ29uZmlnLmxldmVsKVxuICAgIHRoaXMuX3VwZ3JhZGVDb3N0ID0gaXRlbUNvbmZpZy51cGdyYWRlQ29zdEZuKGl0ZW1Db25maWcubGV2ZWwpXG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UgPSBjYXBpdGFsaXNtU2VydmljZVxuXG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2Uuc3Vic2NyaWJlSXRlbUNvbmZpZyhcbiAgICAgIGl0ZW1Db25maWcudXVpZCxcbiAgICAgIHRoaXMudXBkYXRlQ29uZmlnXG4gICAgKVxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIGNvbXBvbmVudFxuICAgIHRoaXMucmVuZGVyKClcbiAgICBpZiAodGhpcy5faXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVNYW5hZ2VyKClcbiAgICB9XG5cbiAgICAvLyBSZW5kZXIgdXBkYXRlIGNvc3QgYW5kIHJldmVudWVcbiAgICB0aGlzLnJlbmRlclJldmVudWVBbmRVcGdyYWRlQ29zdCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNvbmZpZyA9IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4ge1xuICAgIGlmICh0aGlzLl9pdGVtQ29uZmlnLm5hbWUgIT09IGl0ZW1Db25maWcubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2VydmljZSB1cGRhdGVzIHdpdGggZGlmZmVyZW50IGl0ZW0gY29uZmlnXCIpXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSBpdGVtQ29uZmlnXG4gICAgdGhpcy5yZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QoKVxuICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1hbmFnZXIoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1hbmFnZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgdGhpcy5fdGl0bGVFbGVtLm9uY2xpY2sgPSBudWxsXG4gICAgdGhpcy5fdGl0bGVFbGVtLmlubmVyVGV4dCA9IGAke3RoaXMuX2l0ZW1Db25maWcubmFtZX0gKGhhcyBtYW5hZ2VyKWBcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuZ2V0SXRlbUNvbmZpZ0J5VXVpZChcbiAgICAgIHRoaXMuX2l0ZW1Db25maWcudXVpZFxuICAgIClcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgbGV0IGluaXRpYWxQcm9ncmVzc1RpbWUgPSAwXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRQcm9kdWNpbmcpIHtcbiAgICAgIGF3YWl0IHRoaXMuX2N1cnJlbnRQcm9kdWNpbmdcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQpIHtcbiAgICAgIGNvbnN0IHVuZGVyUHJvZHVjaW5nID1cbiAgICAgICAgdGhpcy5faXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC5nZXRUaW1lKCkgK1xuICAgICAgICAgIHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblRpbWUgPlxuICAgICAgICBub3cuZ2V0VGltZSgpXG4gICAgICBpZiAodW5kZXJQcm9kdWNpbmcpIHtcbiAgICAgICAgaW5pdGlhbFByb2dyZXNzVGltZSA9XG4gICAgICAgICAgbm93LmdldFRpbWUoKSAtIHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQuZ2V0VGltZSgpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlY3Vyc2l2ZVByb2R1Y2luZyA9IGFzeW5jICgpOiBQcm9taXNlPCgpID0+IHZvaWQ+ID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuX3Byb2R1Y2VJdGVtKGluaXRpYWxQcm9ncmVzc1RpbWUpXG4gICAgICBpbml0aWFsUHJvZ3Jlc3NUaW1lID0gMFxuICAgICAgcmV0dXJuIHJlY3Vyc2l2ZVByb2R1Y2luZygpXG4gICAgfVxuICAgIHJlY3Vyc2l2ZVByb2R1Y2luZygpXG4gICAgcmV0dXJuXG4gIH1cblxuICBwcml2YXRlIF9wcm9kdWNlSXRlbSA9IGFzeW5jIChwcm9ncmVzc1RpbWUgPSAwKTogUHJvbWlzZTx2b2lkPiA9PlxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBpZiAodGhpcy5faXNQcm9kdWNpbmcpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0aGlzLl9pc1Byb2R1Y2luZyA9IHRydWVcbiAgICAgIGlmIChwcm9ncmVzc1RpbWUgPT09IDApIHtcbiAgICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUodGhpcy5faXRlbUNvbmZpZy51dWlkKVxuICAgICAgfVxuICAgICAgdGhpcy5fcHJvZ3Jlc3NFbGVtLmlubmVyVGV4dCA9IGAkeyhwcm9ncmVzc1RpbWUgLyAxMDAwKS50b0ZpeGVkKDEpfSBzYFxuICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHByb2dyZXNzVGltZSArPSAxMDBcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NFbGVtLmlubmVyVGV4dCA9IGAkeyhwcm9ncmVzc1RpbWUgLyAxMDAwKS50b0ZpeGVkKDEpfSBzYFxuICAgICAgfSwgMTAwKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzRWxlbS5pbm5lclRleHQgPSBcIlwiXG4gICAgICAgIHRoaXMuX3dhbGxldC5vbkFkZE1vbmV5KHRoaXMuX3JldmVudWUpXG4gICAgICAgIHRoaXMuX2lzUHJvZHVjaW5nID0gZmFsc2VcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9LCB0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lIC0gcHJvZ3Jlc3NUaW1lKVxuICAgIH0pXG5cbiAgcHJpdmF0ZSBoYW5kbGVVcGdyYWRlID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGlzUGF5ZWQgPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkodGhpcy5fdXBncmFkZUNvc3QpXG4gICAgaWYgKCFpc1BheWVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBncmFkZUl0ZW0odGhpcy5faXRlbUNvbmZpZy51dWlkKVxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5nZXRJdGVtQ29uZmlnQnlVdWlkKFxuICAgICAgdGhpcy5faXRlbUNvbmZpZy51dWlkXG4gICAgKVxuICAgIHRoaXMuX3JldmVudWUgPSB0aGlzLl9pdGVtQ29uZmlnLnJldmVudWVGbih0aGlzLl9pdGVtQ29uZmlnLmxldmVsKVxuICAgIHRoaXMuX3VwZ3JhZGVDb3N0ID0gdGhpcy5faXRlbUNvbmZpZy51cGdyYWRlQ29zdEZuKHRoaXMuX2l0ZW1Db25maWcubGV2ZWwpXG4gICAgdGhpcy5yZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QoKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQcm9kdWNlID0gKCkgPT4ge1xuICAgIHRoaXMuX2N1cnJlbnRQcm9kdWNpbmcgPSB0aGlzLl9wcm9kdWNlSXRlbSgpXG4gIH1cblxuICBwcml2YXRlIHJlbmRlclJldmVudWVBbmRVcGdyYWRlQ29zdCgpIHtcbiAgICB0aGlzLl91cGdyYWRlQ29zdEVsZW0uaW5uZXJUZXh0ID0gYHVwZ3JhZGU6ICR7dGhpcy5fdXBncmFkZUNvc3QudG9GaXhlZChcbiAgICAgIERJU1BMQVlfREVDSU1BTFxuICAgICl9YFxuICAgIHRoaXMuX3JldmVudWVFbGVtLmlubmVyVGV4dCA9IGAkICR7dGhpcy5fcmV2ZW51ZS50b0ZpeGVkKERJU1BMQVlfREVDSU1BTCl9YFxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSBcIml0ZW1cIlxuICAgIHRoaXMuX2VsZW1lbnQuaWQgPSB0aGlzLl9pdGVtQ29uZmlnLm5hbWVcblxuICAgIHRoaXMuX3RpdGxlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICB0aGlzLl90aXRsZUVsZW0uY2xhc3NOYW1lID0gXCJuYW1lXCJcbiAgICB0aGlzLl90aXRsZUVsZW0uaW5uZXJUZXh0ID0gdGhpcy5faXRlbUNvbmZpZy5uYW1lXG4gICAgdGhpcy5fdGl0bGVFbGVtLm9uY2xpY2sgPSB0aGlzLmhhbmRsZVByb2R1Y2VcblxuICAgIGNvbnN0IHByb2R1Y3Rpb25UaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIHByb2R1Y3Rpb25UaW1lLmNsYXNzTmFtZSA9IFwicHJvZHVjdGlvbi10aW1lXCJcbiAgICBwcm9kdWN0aW9uVGltZS5pbm5lclRleHQgPSBgdGFrZTogJHsoXG4gICAgICB0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lIC8gMTAwMFxuICAgICkudG9GaXhlZCgwKX0gc2BcblxuICAgIHRoaXMuX3JldmVudWVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIHRoaXMuX3JldmVudWVFbGVtLmNsYXNzTmFtZSA9IFwicmV2ZW51ZVwiXG5cbiAgICB0aGlzLl91cGdyYWRlQ29zdEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtLmNsYXNzTmFtZSA9IFwidXBncmFkZVwiXG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtLm9uY2xpY2sgPSB0aGlzLmhhbmRsZVVwZ3JhZGVcblxuICAgIHRoaXMuX3Byb2dyZXNzRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICB0aGlzLl9wcm9ncmVzc0VsZW0uY2xhc3NOYW1lID0gXCJwcm9ncmVzc1wiXG5cbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RpdGxlRWxlbSlcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3JldmVudWVFbGVtKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQocHJvZHVjdGlvblRpbWUpXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl91cGdyYWRlQ29zdEVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9wcm9ncmVzc0VsZW0pXG4gIH1cblxuICBwdWJsaWMgZ2V0RWxlbWVudCA9ICgpID0+IHRoaXMuX2VsZW1lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgSXRlbVxuIiwiaW1wb3J0IHsgRElTUExBWV9ERUNJTUFMIH0gZnJvbSBcIi4uL2NvbmZpZ1wiXG5pbXBvcnQgSXRlbVR5cGVzIGZyb20gXCIuLi90eXBlcy9JdGVtLnR5cGVcIlxuaW1wb3J0IFdhbGxldCBmcm9tIFwiLi4vc2VydmljZXMvV2FsbGV0XCJcblxuY2xhc3MgSXRlbVB1cmNoYXNlIHtcbiAgcHJpdmF0ZSBfZWxlbWVudDogSFRNTEVsZW1lbnRcbiAgcHJpdmF0ZSBfd2FsbGV0OiBXYWxsZXRcbiAgcHJpdmF0ZSBfaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWdcblxuICBwcml2YXRlIF9pc1B1cmNoYXNpbmc6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIF9vblB1cmNoYXNlZDogKCkgPT4gdm9pZFxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnLFxuICAgIHdhbGxldDogV2FsbGV0LFxuICAgIG9uUHVyY2hhc2VkOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMuX2l0ZW1Db25maWcgPSBpdGVtQ29uZmlnXG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0XG4gICAgdGhpcy5fb25QdXJjaGFzZWQgPSBvblB1cmNoYXNlZFxuXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTmFtZSA9IFwiaXRlbVwiXG4gICAgdGhpcy5fZWxlbWVudC5vbmNsaWNrID0gdGhpcy5oYW5kbGVQdXJjaGFzZVxuICAgIGNvbnN0IHB1cmNoYXNlVGV4dEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgcHVyY2hhc2VUZXh0RWxlbS5jbGFzc05hbWUgPSBcInB1cmNoYXNlLXRleHRcIlxuICAgIHB1cmNoYXNlVGV4dEVsZW0uaW5uZXJUZXh0ID0gYHB1cmNoYXNlICR7XG4gICAgICBpdGVtQ29uZmlnLm5hbWVcbiAgICB9IGZvciAke2l0ZW1Db25maWcucHJpY2UudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHB1cmNoYXNlVGV4dEVsZW0pXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVB1cmNoYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc1B1cmNoYXNpbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9pc1B1cmNoYXNpbmcgPSB0cnVlXG4gICAgY29uc3QgcGF5ZWQ6IGJvb2xlYW4gPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkoXG4gICAgICB0aGlzLl9pdGVtQ29uZmlnLnByaWNlXG4gICAgKVxuICAgIGlmICghcGF5ZWQpIHtcbiAgICAgIHRoaXMuX2lzUHVyY2hhc2luZyA9IGZhbHNlXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5faXNQdXJjaGFzaW5nID0gZmFsc2VcbiAgICB0aGlzLl9vblB1cmNoYXNlZCgpXG4gIH1cblxuICBwdWJsaWMgZ2V0RWxlbWVudCA9ICgpID0+IHRoaXMuX2VsZW1lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgSXRlbVB1cmNoYXNlXG4iLCJpbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlJ1xuaW1wb3J0IFdhbGxldCBmcm9tICcuLi9zZXJ2aWNlcy9XYWxsZXQnXG5cbmNsYXNzIEhpcmVNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlXG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50XG5cbiAgY29uc3RydWN0b3IgKFxuICAgIGNhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZSxcbiAgICB3YWxsZXQ6IFdhbGxldCxcbiAgICBjbG9zZUhpcmVNYW5hZ2VyOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlID0gY2FwaXRhbGlzbVNlcnZpY2VcbiAgICB0aGlzLl93YWxsZXQgPSB3YWxsZXRcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTmFtZSA9ICdoaXJlLW1hbmFnZXItd3JhcHBlcidcblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBjbG9zZUJ1dHRvbi5pbm5lclRleHQgPSAnQ2xvc2UnXG4gICAgY2xvc2VCdXR0b24ub25jbGljayA9IGNsb3NlSGlyZU1hbmFnZXJcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKVxuICAgIHRoaXMuYXBwZW5kTWFuYWdlckVsZW1lbnRzKClcbiAgfVxuXG4gIHByaXZhdGUgYXBwZW5kTWFuYWdlckVsZW1lbnRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGl0ZW1Db25maWdzID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZEl0ZW1Db25maWdzKClcbiAgICBpdGVtQ29uZmlncy5mb3JFYWNoKChpdGVtQ29uZmlnKSA9PiB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ2hpcmUtbWFuYWdlcidcbiAgICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgICAgd3JhcHBlci5pbm5lclRleHQgPSBgSGlyZWQgTWFuYWdlciBmb3IgJHtpdGVtQ29uZmlnLm5hbWV9YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JhcHBlci5pbm5lclRleHQgPSBgTWFuYWdlciBmb3IgJHtpdGVtQ29uZmlnLm5hbWV9IChjb3N0ICQke2l0ZW1Db25maWcubWFuYWdlclByaWNlfSlgXG4gICAgICB9XG4gICAgICB3cmFwcGVyLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghaXRlbUNvbmZpZy5wdXJjaGFzZWQpIHtcbiAgICAgICAgICBhbGVydCgnUGxlYXNlIHB1cmNoYXNlIGl0ZW0gZmlyc3QnKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzUGFpZCA9IGF3YWl0IHRoaXMuX3dhbGxldC5jaGFyZ2VNb25leShpdGVtQ29uZmlnLm1hbmFnZXJQcmljZSlcbiAgICAgICAgaWYgKCFpc1BhaWQpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5oaXJlTWFuYWdlcihpdGVtQ29uZmlnLnV1aWQpXG4gICAgICAgIHdyYXBwZXIub25jbGljayA9IG51bGxcbiAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgKz0gJyBwdXJjaGFzZWQnXG4gICAgICAgIHdyYXBwZXIuaW5uZXJUZXh0ID0gYEhpcmVkIE1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWBcbiAgICAgIH1cbiAgICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQod3JhcHBlcilcbiAgICB9KVxuICB9XG5cbiAgcHVibGljIGdldEVsZW1lbnQgPSAoKTogSFRNTEVsZW1lbnQgPT4gdGhpcy5fZWxlbWVudFxufVxuXG5leHBvcnQgZGVmYXVsdCBIaXJlTWFuYWdlclxuIiwiaW1wb3J0IEl0ZW1UeXBlcyBmcm9tIFwiLi4vdHlwZXMvSXRlbS50eXBlXCJcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9jb21wb25lbnRzL0l0ZW1cIlxuaW1wb3J0IEl0ZW1QdXJjaGFzZSBmcm9tIFwiLi4vY29tcG9uZW50cy9JdGVtUHVyY2hhc2VcIlxuaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gXCIuLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2VcIlxuaW1wb3J0IFdhbGxldCBmcm9tIFwiLi4vc2VydmljZXMvV2FsbGV0XCJcbmltcG9ydCB7IERJU1BMQVlfREVDSU1BTCB9IGZyb20gXCIuLi9jb25maWdcIlxuaW1wb3J0IEhpcmVNYW5hZ2VyIGZyb20gXCIuLi9jb21wb25lbnRzL0hpcmVNYW5hZ2VyXCJcbnR5cGUgSXRlbU1hcFByb3BlcnR5ID0ge1xuICBvcmRlcjogbnVtYmVyXG4gIGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnXG4gIGl0ZW0/OiBJdGVtXG4gIGl0ZW1QdXJjaGFzZT86IEl0ZW1QdXJjaGFzZVxufVxuXG5jbGFzcyBDYXBpdGFsaXNtIHtcbiAgcHJpdmF0ZSBfZWxlbWVudDogSFRNTEVsZW1lbnQgPSBudWxsXG4gIHByaXZhdGUgX3RvdGFsTW9uZXlFbGVtOiBIVE1MRWxlbWVudCA9IG51bGxcbiAgcHJpdmF0ZSBfaXRlbXNXcmFwcGVyRWxlbTogSFRNTEVsZW1lbnQgPSBudWxsXG4gIHByaXZhdGUgX2l0ZW1zOiB7IFtrZXk6IHN0cmluZ106IEl0ZW1NYXBQcm9wZXJ0eSB9ID0ge31cblxuICBwcml2YXRlIF9jYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2UgPSBudWxsXG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0ID0gbnVsbFxuICBjb25zdHJ1Y3RvcihcbiAgICBjYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpLFxuICAgIHdhbGxldDogV2FsbGV0ID0gV2FsbGV0LmdldEluc3RhbmNlKClcbiAgKSB7XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UgPSBjYXBpdGFsaXNtU2VydmljZVxuICAgIHRoaXMuX3dhbGxldCA9IHdhbGxldFxuICAgIHRoaXMuX3RvdGFsTW9uZXlFbGVtID0gdGhpcy5yZW5kZXJUb3RhbE1vbmV5KClcbiAgICB0aGlzLl9pdGVtc1dyYXBwZXJFbGVtID0gdGhpcy5yZW5kZXJJdGVtV3JhcHBlcigpXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90b3RhbE1vbmV5RWxlbSlcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2l0ZW1zV3JhcHBlckVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlckhpcmVNYW5hZ2VyQnV0dG9uKCkpXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlSXRlbSA9IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBuZXcgSXRlbShpdGVtQ29uZmlnLCB0aGlzLl93YWxsZXQsIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlKVxuICAgIHJldHVybiBpdGVtXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUHVyY2hhc2VJdGVtID0gKGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlUHVyY2hhc2VJdGVtID0gKCkgPT4ge1xuICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UucHVyY2hhc2VJdGVtKGl0ZW1Db25maWcudXVpZClcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtQ29uZmlnID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuZ2V0SXRlbUNvbmZpZ0J5VXVpZChcbiAgICAgICAgaXRlbUNvbmZpZy51dWlkXG4gICAgICApXG4gICAgICBjb25zdCBjdXJyZW50UHJvcGVydHk6IEl0ZW1NYXBQcm9wZXJ0eSA9IHRoaXMuX2l0ZW1zW2l0ZW1Db25maWcudXVpZF1cbiAgICAgIGN1cnJlbnRQcm9wZXJ0eS5pdGVtQ29uZmlnID0gdXBkYXRlZEl0ZW1Db25maWdcbiAgICAgIHRoaXMuX2l0ZW1zW2l0ZW1Db25maWcudXVpZF0uaXRlbSA9IG5ldyBJdGVtKFxuICAgICAgICB1cGRhdGVkSXRlbUNvbmZpZyxcbiAgICAgICAgdGhpcy5fd2FsbGV0LFxuICAgICAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZVxuICAgICAgKVxuICAgICAgdGhpcy5faXRlbXNXcmFwcGVyRWxlbS5yZXBsYWNlQ2hpbGQoXG4gICAgICAgIHRoaXMuX2l0ZW1zW2l0ZW1Db25maWcudXVpZF0uaXRlbS5nZXRFbGVtZW50KCksXG4gICAgICAgIHRoaXMuX2l0ZW1zV3JhcHBlckVsZW0uY2hpbGROb2Rlc1tjdXJyZW50UHJvcGVydHkub3JkZXJdXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgaXRlbVB1cmNoYXNlID0gbmV3IEl0ZW1QdXJjaGFzZShcbiAgICAgIGl0ZW1Db25maWcsXG4gICAgICB0aGlzLl93YWxsZXQsXG4gICAgICBoYW5kbGVQdXJjaGFzZUl0ZW1cbiAgICApXG4gICAgcmV0dXJuIGl0ZW1QdXJjaGFzZVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJJdGVtV3JhcHBlciA9ICgpID0+IHtcbiAgICBjb25zdCBpdGVtc1dyYXBwZXJFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGNvbnN0IGl0ZW1Db25maWdzID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZEl0ZW1Db25maWdzKClcbiAgICBpdGVtQ29uZmlncy5mb3JFYWNoKChpdGVtQ29uZmlnLCBpZHgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0eTogSXRlbU1hcFByb3BlcnR5ID0ge1xuICAgICAgICBpdGVtQ29uZmlnOiBpdGVtQ29uZmlnLFxuICAgICAgICBvcmRlcjogaWR4LFxuICAgICAgfVxuICAgICAgaWYgKGl0ZW1Db25maWcucHVyY2hhc2VkKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmdlbmVyYXRlSXRlbShpdGVtQ29uZmlnKVxuICAgICAgICBjdXJyZW50UHJvcGVydHkuaXRlbSA9IGl0ZW1cbiAgICAgICAgaXRlbXNXcmFwcGVyRWxlbS5hcHBlbmRDaGlsZChpdGVtLmdldEVsZW1lbnQoKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1QdXJjaGFzZSA9IHRoaXMuZ2VuZXJhdGVQdXJjaGFzZUl0ZW0oaXRlbUNvbmZpZylcbiAgICAgICAgY3VycmVudFByb3BlcnR5Lml0ZW1QdXJjaGFzZSA9IGl0ZW1QdXJjaGFzZVxuICAgICAgICBpdGVtc1dyYXBwZXJFbGVtLmFwcGVuZENoaWxkKGl0ZW1QdXJjaGFzZS5nZXRFbGVtZW50KCkpXG4gICAgICB9XG4gICAgICB0aGlzLl9pdGVtc1tpdGVtQ29uZmlnLnV1aWRdID0gY3VycmVudFByb3BlcnR5XG4gICAgfSlcbiAgICByZXR1cm4gaXRlbXNXcmFwcGVyRWxlbVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUb3RhbE1vbmV5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHRvdGFsTW9uZXlFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIHRvdGFsTW9uZXlFbGVtLmNsYXNzTmFtZSA9IFwidG90YWwgbW9uZXlcIlxuICAgIHRvdGFsTW9uZXlFbGVtLmlubmVyVGV4dCA9IGB0b3RhbDogJHt0aGlzLl93YWxsZXQuZ2V0TW9uZXkoKX1gXG4gICAgdGhpcy5fd2FsbGV0LnN1YnNjcmliZU1vbmV5KChtb25leTogbnVtYmVyKSA9PiB7XG4gICAgICB0b3RhbE1vbmV5RWxlbS5pbm5lclRleHQgPSBgdG90YWw6ICR7bW9uZXkudG9GaXhlZChcbiAgICAgICAgRElTUExBWV9ERUNJTUFMXG4gICAgICApfWBcbiAgICB9KVxuICAgIHJldHVybiB0b3RhbE1vbmV5RWxlbVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIaXJlTWFuYWdlckJ1dHRvbiA9ICgpID0+IHtcbiAgICBjb25zdCBoaXJlTWFuYWdlckJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgaGlyZU1hbmFnZXJCdXR0b24uY2xhc3NOYW1lID0gJ2hpcmUtbWFuYWdlci1idXR0b24nXG4gICAgaGlyZU1hbmFnZXJCdXR0b24uaW5uZXJUZXh0ID0gJ0hpcmUgTWFuYWdlcidcbiAgICBoaXJlTWFuYWdlckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgaGlyZU1hbmFnZXJFbGVtOiBIVE1MRWxlbWVudFxuICAgICAgICBjb25zdCBoaXJlTWFuYWdlciA9IG5ldyBIaXJlTWFuYWdlcihcbiAgICAgICAgICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLFxuICAgICAgICAgICAgdGhpcy5fd2FsbGV0LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQ2hpbGQoaGlyZU1hbmFnZXJFbGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGhpcmVNYW5hZ2VyRWxlbSA9IGhpcmVNYW5hZ2VyLmdldEVsZW1lbnQoKVxuICAgICAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKGhpcmVNYW5hZ2VyRWxlbSlcbiAgICB9XG4gICAgcmV0dXJuIGhpcmVNYW5hZ2VyQnV0dG9uXG4gIH1cblxuICBwdWJsaWMgZ2V0RWxlbWVudCA9ICgpOiBIVE1MRWxlbWVudCA9PiB0aGlzLl9lbGVtZW50XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcGl0YWxpc21cbiIsImltcG9ydCBXYWxsZXQgZnJvbSBcIi4vc2VydmljZXMvV2FsbGV0XCJcbmltcG9ydCBDYXBpdGFsaXNtU2VydmljZSBmcm9tIFwiLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2VcIlxuaW1wb3J0IENhcGl0YWxpc20gZnJvbSBcIi4vY29udGFpbmVycy9DYXBpdGFsaXNtXCJcblxuY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coXCI9PT09IEluaXRpYWxpemluZyBzdGFydCA9PT09XCIpXG5cbiAgY29uc3Qgd2FsbGV0ID0gV2FsbGV0LmdldEluc3RhbmNlKClcbiAgY29uc3QgY2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpXG5cbiAgY29uc3QgYXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIilcbiAgaWYgKCFhcHApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyAjYXBwIGVsZW1lbnQgdG8gYXR0YWNoIGdhbWUgZWxlbWVudHNcIilcbiAgfVxuICBjb25zdCBjYXBpdGFsaXNtID0gbmV3IENhcGl0YWxpc20oY2FwaXRhbGlzbVNlcnZpY2UsIHdhbGxldClcbiAgYXBwLmFwcGVuZENoaWxkKGNhcGl0YWxpc20uZ2V0RWxlbWVudCgpKVxuICBjb25zb2xlLmxvZyhcIj09PT0gSW5pdGlhbGl6ZWQgPT09PVwiKVxufVxuXG5pbml0KClcbiJdLCJzb3VyY2VSb290IjoiIn0=