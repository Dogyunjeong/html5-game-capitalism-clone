!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(e,t){return function(n){return e+n*t}},r=function(e,t){return function(n){return e+n*n*t}},o=[{uuid:"uuid-lemon",name:"Lemon",productionTime:1e3,revenueFn:i(1,.8),upgradeCostFn:r(1,.6),level:1,purchased:!0,price:0,hasManager:!1,managerPrice:100},{uuid:"uuid-ice-cream",name:"Ice cream",productionTime:3e3,revenueFn:i(10,5),upgradeCostFn:r(10,.6),level:1,purchased:!1,price:1,hasManager:!1,managerPrice:500},{uuid:"uuid-bicycle",name:"Bicycle",productionTime:1e4,revenueFn:i(20,10),upgradeCostFn:r(15,.6),level:1,purchased:!1,price:10,hasManager:!1,managerPrice:2e3},{uuid:"uuid-motor-bike",name:"Motor Bike",productionTime:36e5,revenueFn:i(30,15),upgradeCostFn:r(20,1),level:1,purchased:!1,price:50,hasManager:!1,managerPrice:4e3},{uuid:"uuid-car",name:"Car",productionTime:18e6,revenueFn:i(50,25),upgradeCostFn:r(40,2),level:1,purchased:!1,price:100,hasManager:!1,managerPrice:8e3}],a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u="capitalism-service-local-storage-key",s=function(){function e(){var e=this;this._itemConfigs=[],this._itemConfigListenersMap={},this._notifyItemConfigUpdated=function(t){e._itemConfigListenersMap[t.uuid]&&e._itemConfigListenersMap[t.uuid].forEach((function(e){e(t)}))},this._loadData=function(){var t=localStorage.getItem(u);if(t){var n=JSON.parse(t),i=[],r=0;n.itemConfigs.forEach((function(e){var t=o.find((function(t){return t.uuid===e.uuid})),u=a(a(a({},t),e),{productionStartAt:null});if(e.productionStartAt){u.productionStartAt=new Date(e.productionStartAt);var s=(new Date).getTime()-u.productionStartAt.getTime();if(u.hasManager){var c=Math.floor(s/u.productionTime);r+=c*u.revenueFn(u.level)}else{s>=u.productionTime&&u.productionStartAt.getTime()+u.productionTime>new Date(n.savedAt).getTime()&&(r+=u.revenueFn(u.level))}}i.push(u)})),e._itemConfigs=i,e._money=n.money+r}},this._saveData=function(){var t={itemConfigs:e._itemConfigs.map((function(e){return{uuid:e.uuid,level:e.level,purchased:e.purchased,hasManager:e.hasManager,productionStartAt:e.productionStartAt?e.productionStartAt.toISOString():null}})),money:e._money,savedAt:new Date};localStorage.setItem(u,JSON.stringify(t))},this.loadItemConfigs=function(){return e._itemConfigs},this.loadMoney=function(){return e._money},this.updateMoney=function(t){e._money=t},this.updateItemProducingTime=function(t,n){void 0===n&&(n=new Date),e._itemConfigs.find((function(e){return e.uuid===t})).productionStartAt=n},this.getItemConfigByUuid=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));return a({},n)},this.subscribeItemConfig=function(t,n){e._itemConfigListenersMap[t]||(e._itemConfigListenersMap[t]=[]),e._itemConfigListenersMap[t].push(n)},this.purchaseItem=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));n.purchased=!0,e._notifyItemConfigUpdated(n)},this.upgradeItem=function(t){e._itemConfigs.find((function(e){return e.uuid===t})).level+=1},this.hireManager=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));if(!n)throw new Error("There is no item config for "+n.name);if(n.hasManager)throw new Error("Already have a manager for "+n.name);n.hasManager=!0,e._notifyItemConfigUpdated(n)},this._itemConfigs=o,this._money=1e3,this._loadData(),window.onbeforeunload=function(){e._saveData()}}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(),c=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},l=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},h=function(){function e(e){var t=this;this._moneyListener=[],this._lock=!1,this._notifyMoneyChange=function(){t._capitalismService.updateMoney(t._currentMoney),t._moneyListener.forEach((function(e){return e(t._currentMoney)}))},this.getMoney=function(){return t._currentMoney.toFixed(2)},this.onAddMoney=function(e){t._currentMoney+=e,t._notifyMoneyChange()},this.subscribeMoney=function(e){t._moneyListener.push(e)},this.chargeMoney=function(e){return c(t,void 0,void 0,(function(){return l(this,(function(t){return this._lock?[2,!1]:(this._lock=!0,this._currentMoney<e?(this._lock=!1,[2,!1]):(this._currentMoney-=e,this._lock=!1,this._notifyMoneyChange(),[2,!0]))}))}))},this._capitalismService=s.getInstance(),this._currentMoney=this._capitalismService.loadMoney()}return e.getInstance=function(){return e._instance||(e._instance=new e(1e3)),e._instance},e}(),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},d=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},p=function(){function e(e,t,n){var i=this;this._isProducing=!1,this._currentProducing=null,this.updateConfig=function(e){if(i._itemConfig.name!==e.name)throw new Error("Service updates with different item config");i._itemConfig=e,i.renderRevenueAndUpgradeCost(),e.hasManager&&i.initializeManager()},this.initializeManager=function(){return m(i,void 0,void 0,(function(){var e,t,n,i=this;return d(this,(function(r){switch(r.label){case 0:return this._titleElem.onclick=null,this._titleElem.innerText=this._itemConfig.name+" (has manager)",this._itemConfig=this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid),e=new Date,t=0,this._currentProducing?[4,this._currentProducing]:[3,2];case 1:return r.sent(),[3,3];case 2:this._itemConfig.productionStartAt&&this._itemConfig.productionStartAt.getTime()+this._itemConfig.productionTime>e.getTime()&&(t=e.getTime()-this._itemConfig.productionStartAt.getTime()),r.label=3;case 3:return(n=function(){return m(i,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this._produceItem(t)];case 1:return e.sent(),t=0,[2,n()]}}))}))})(),[2]}}))}))},this._produceItem=function(e){return void 0===e&&(e=0),m(i,void 0,void 0,(function(){var t=this;return d(this,(function(n){return[2,new Promise((function(n){if(!t._isProducing){t._isProducing=!0,0===e&&t._capitalismService.updateItemProducingTime(t._itemConfig.uuid),t._progressElem.innerText=(e/1e3).toFixed(1)+" s";var i=setInterval((function(){e+=100,t._progressElem.innerText=(e/1e3).toFixed(1)+" s"}),100);setTimeout((function(){clearInterval(i),t._progressElem.innerText="",t._wallet.onAddMoney(t._revenue),t._isProducing=!1,n()}),t._itemConfig.productionTime-e)}}))]}))}))},this.handleUpgrade=function(){return m(i,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this._wallet.chargeMoney(this._upgradeCost)];case 1:return e.sent()?(this._capitalismService.upgradeItem(this._itemConfig.uuid),this._itemConfig=this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid),this._revenue=this._itemConfig.revenueFn(this._itemConfig.level),this._upgradeCost=this._itemConfig.upgradeCostFn(this._itemConfig.level),this.renderRevenueAndUpgradeCost(),[2]):[2]}}))}))},this.handleProduce=function(){i._currentProducing=i._produceItem()},this.getElement=function(){return i._element},this._itemConfig=f({},e),this._wallet=t,this._revenue=e.revenueFn(e.level),this._upgradeCost=e.upgradeCostFn(e.level),this._capitalismService=n,this._capitalismService.subscribeItemConfig(e.uuid,this.updateConfig),this._element=document.createElement("div"),this._element.className="item",this._element.id=this._itemConfig.name,this._titleElem=document.createElement("div"),this._titleElem.className="name",this._titleElem.innerText=this._itemConfig.name,this._titleElem.onclick=this.handleProduce;var r=document.createElement("div");r.className="production-time",r.innerText="take: "+(this._itemConfig.productionTime/1e3).toFixed(0)+" s",this._revenueElem=document.createElement("div"),this._revenueElem.className="revenue",this._upgradeCostElem=document.createElement("div"),this._upgradeCostElem.className="upgrade",this._upgradeCostElem.onclick=this.handleUpgrade,this._progressElem=document.createElement("div"),this._progressElem.className="progress",this._element.appendChild(this._titleElem),this._element.appendChild(this._revenueElem),this._element.appendChild(r),this._element.appendChild(this._upgradeCostElem),this._element.appendChild(this._progressElem),this._itemConfig.hasManager&&this.initializeManager(),this.renderRevenueAndUpgradeCost()}return e.prototype.renderRevenueAndUpgradeCost=function(){this._upgradeCostElem.innerText="upgrade: "+this._upgradeCost.toFixed(2),this._revenueElem.innerText="$ "+this._revenue.toFixed(2)},e}(),g=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},_=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v=function(e,t,n){var i=this;this._isPurchasing=!1,this.handlePurchase=function(){return g(i,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return this._isPurchasing?[2]:(this._isPurchasing=!0,[4,this._wallet.chargeMoney(this._itemConfig.price)]);case 1:return e.sent()?(this._isPurchasing=!1,this._onPurchased(),[2]):(this._isPurchasing=!1,[2])}}))}))},this.getElement=function(){return i._element},this._itemConfig=e,this._wallet=t,this._onPurchased=n,this._element=document.createElement("div"),this._element.className="item",this._element.onclick=this.handlePurchase;var r=document.createElement("div");r.className="purchase-text",r.innerText="purchase "+e.name+" for "+e.price.toFixed(2),this._element.appendChild(r)},y=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},C=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},b=function(e,t,n){var i=this;this.appendManagerElements=function(){i._capitalismService.loadItemConfigs().forEach((function(e){var t=document.createElement("div");t.className="hire-manager",e.hasManager?t.innerText="Hired Manager for "+e.name:t.innerText="Manager for "+e.name+" (cost $"+e.managerPrice+")",t.onclick=function(){return y(i,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return e.purchased?[4,this._wallet.chargeMoney(e.managerPrice)]:(alert("Please purchase item first"),[2]);case 1:return n.sent()?(this._capitalismService.hireManager(e.uuid),t.onclick=null,t.className+=" purchased",t.innerText="Hired Manager for "+e.name,[2]):[2]}}))}))},i._element.appendChild(t)}))},this.getElement=function(){return i._element},this._capitalismService=e,this._wallet=t,this._element=document.createElement("div"),this._element.className="hire-manager-wrapper";var r=document.createElement("button");r.innerText="Close",r.onclick=n,this._element.appendChild(r),this.appendManagerElements()},w=function(e,t){var n=this;void 0===e&&(e=s.getInstance()),void 0===t&&(t=h.getInstance()),this._element=null,this._totalMoneyElem=null,this._itemsWrapperElem=null,this._itemConfigs=[],this._items={},this._capitalismService=null,this._wallet=null,this.generateItem=function(e){return new p(e,n._wallet,n._capitalismService)},this.generatePurchaseItem=function(e){return new v(e,n._wallet,(function(){n._capitalismService.purchaseItem(e.uuid);var t=n._capitalismService.getItemConfigByUuid(e.uuid),i=n._items[e.uuid];i.itemConfig=t,n._items[e.uuid].item=new p(t,n._wallet,n._capitalismService),n._itemsWrapperElem.replaceChild(n._items[e.uuid].item.getElement(),n._itemsWrapperElem.childNodes[i.order])}))},this.renderItemWrapper=function(){var e=document.createElement("div");return n._capitalismService.loadItemConfigs().forEach((function(t,i){var r={itemConfig:t,order:i};if(t.purchased){var o=n.generateItem(t);r.item=o,e.appendChild(o.getElement())}else{var a=n.generatePurchaseItem(t);r.itemPurchase=a,e.appendChild(a.getElement())}n._items[t.uuid]=r})),e},this.renderTotalMoney=function(){var e=document.createElement("div");return e.className="total money",e.innerText="total: "+n._wallet.getMoney(),n._wallet.subscribeMoney((function(t){e.innerText="total: "+t.toFixed(2)})),e},this.renderHireManagerButton=function(){var e=document.createElement("button");return e.className="hire-manager-button",e.innerText="Hire Manager",e.onclick=function(){var e,t=new b(n._capitalismService,n._wallet,(function(){n._element.removeChild(e)}));e=t.getElement(),n._element.appendChild(e)},e},this.getElement=function(){return n._element},this._capitalismService=e,this._wallet=t,this._totalMoneyElem=this.renderTotalMoney(),this._itemsWrapperElem=this.renderItemWrapper(),this._element=document.createElement("div"),this._element.appendChild(this._totalMoneyElem),this._element.appendChild(this._itemsWrapperElem),this._element.appendChild(this.renderHireManagerButton())};!function(){console.log("==== Initializing start ====");var e=h.getInstance(),t=s.getInstance(),n=document.getElementById("app");if(!n)throw new Error("There is no #app element to attach game elements");var i=new w(t,e);n.appendChild(i.getElement()),console.log("==== Initialized ====")}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9XYWxsZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9JdGVtUHVyY2hhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSGlyZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRhaW5lcnMvQ2FwaXRhbGlzbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZW5lcmF0ZVJldmVudWVGbiIsImJhc2UiLCJpbmNyZWFzaW5nUmV2ZW51ZSIsImxldmVsIiwiZ2VuZXJhdGVVcGdyYWRlQ29zdEZuIiwiaW5jcmVhc2luZ1JhdGlvIiwiaXRlbUNvbmZpZ3MiLCJ1dWlkIiwicHJvZHVjdGlvblRpbWUiLCJyZXZlbnVlRm4iLCJ1cGdyYWRlQ29zdEZuIiwicHVyY2hhc2VkIiwicHJpY2UiLCJoYXNNYW5hZ2VyIiwibWFuYWdlclByaWNlIiwiU1RPUkVfS0VZIiwiX2l0ZW1Db25maWdzIiwiX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXAiLCJfbm90aWZ5SXRlbUNvbmZpZ1VwZGF0ZWQiLCJpdGVtQ29uZmlnIiwiZm9yRWFjaCIsImZuIiwiX2xvYWREYXRhIiwianNvbkRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmVEYXRhIiwiSlNPTiIsInBhcnNlIiwibG9hZGVkSXRlbUNvbmZpZ3MiLCJhZGRpdGlvbmFsTW9uZXkiLCJzdG9yZWRJdGVtQ29uZmlnIiwiaW5pdGlhbEl0ZW1Db25maWciLCJmaW5kIiwicHJvZHVjdGlvblN0YXJ0QXQiLCJEYXRlIiwidGltZURpZmYiLCJnZXRUaW1lIiwicHJvZHVjZWRBbW91bnQiLCJNYXRoIiwiZmxvb3IiLCJzYXZlZEF0IiwicHVzaCIsIl9tb25leSIsIm1vbmV5IiwiX3NhdmVEYXRhIiwic3RvcmVkRGF0YSIsIm1hcCIsInRvSVNPU3RyaW5nIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImxvYWRJdGVtQ29uZmlncyIsImxvYWRNb25leSIsInVwZGF0ZU1vbmV5IiwidXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUiLCJpdGVtVXVpZCIsImRhdGUiLCJnZXRJdGVtQ29uZmlnQnlVdWlkIiwic3Vic2NyaWJlSXRlbUNvbmZpZyIsInB1cmNoYXNlSXRlbSIsInVwZ3JhZGVJdGVtIiwiaGlyZU1hbmFnZXIiLCJFcnJvciIsInRoaXMiLCJ3aW5kb3ciLCJvbmJlZm9yZXVubG9hZCIsImdldEluc3RhbmNlIiwiQ2FwaXRhbGlzbVNlcnZpY2UiLCJfaW5zdGFuY2UiLCJiYXNlTW9uZXkiLCJfbW9uZXlMaXN0ZW5lciIsIl9sb2NrIiwiX25vdGlmeU1vbmV5Q2hhbmdlIiwiX2NhcGl0YWxpc21TZXJ2aWNlIiwiX2N1cnJlbnRNb25leSIsImdldE1vbmV5IiwidG9GaXhlZCIsIm9uQWRkTW9uZXkiLCJzdWJzY3JpYmVNb25leSIsImNoYXJnZU1vbmV5IiwiV2FsbGV0Iiwid2FsbGV0IiwiY2FwaXRhbGlzbVNlcnZpY2UiLCJfaXNQcm9kdWNpbmciLCJfY3VycmVudFByb2R1Y2luZyIsInVwZGF0ZUNvbmZpZyIsIl9pdGVtQ29uZmlnIiwicmVuZGVyUmV2ZW51ZUFuZFVwZ3JhZGVDb3N0IiwiaW5pdGlhbGl6ZU1hbmFnZXIiLCJfdGl0bGVFbGVtIiwib25jbGljayIsImlubmVyVGV4dCIsIm5vdyIsImluaXRpYWxQcm9ncmVzc1RpbWUiLCJyZWN1cnNpdmVQcm9kdWNpbmciLCJfcHJvZHVjZUl0ZW0iLCJwcm9ncmVzc1RpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl9wcm9ncmVzc0VsZW0iLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwic2V0VGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJfd2FsbGV0IiwiX3JldmVudWUiLCJoYW5kbGVVcGdyYWRlIiwiX3VwZ3JhZGVDb3N0IiwiaGFuZGxlUHJvZHVjZSIsImdldEVsZW1lbnQiLCJfZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlkIiwiX3JldmVudWVFbGVtIiwiX3VwZ3JhZGVDb3N0RWxlbSIsImFwcGVuZENoaWxkIiwib25QdXJjaGFzZWQiLCJfaXNQdXJjaGFzaW5nIiwiaGFuZGxlUHVyY2hhc2UiLCJfb25QdXJjaGFzZWQiLCJwdXJjaGFzZVRleHRFbGVtIiwiY2xvc2VIaXJlTWFuYWdlciIsImFwcGVuZE1hbmFnZXJFbGVtZW50cyIsIndyYXBwZXIiLCJhbGVydCIsImNsb3NlQnV0dG9uIiwiX3RvdGFsTW9uZXlFbGVtIiwiX2l0ZW1zV3JhcHBlckVsZW0iLCJfaXRlbXMiLCJnZW5lcmF0ZUl0ZW0iLCJnZW5lcmF0ZVB1cmNoYXNlSXRlbSIsInVwZGF0ZWRJdGVtQ29uZmlnIiwiY3VycmVudFByb3BlcnR5IiwiaXRlbSIsInJlcGxhY2VDaGlsZCIsImNoaWxkTm9kZXMiLCJvcmRlciIsInJlbmRlckl0ZW1XcmFwcGVyIiwiaXRlbXNXcmFwcGVyRWxlbSIsImlkeCIsIml0ZW1QdXJjaGFzZSIsInJlbmRlclRvdGFsTW9uZXkiLCJ0b3RhbE1vbmV5RWxlbSIsInJlbmRlckhpcmVNYW5hZ2VyQnV0dG9uIiwiaGlyZU1hbmFnZXJCdXR0b24iLCJoaXJlTWFuYWdlckVsZW0iLCJyZW1vdmVDaGlsZCIsImNvbnNvbGUiLCJsb2ciLCJhcHAiLCJnZXRFbGVtZW50QnlJZCIsImNhcGl0YWxpc20iLCJpbml0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFH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aEYsS0FBS2tFLGtCQUFvQmxFLEtBQUs0RSxvQkFDOUI1RSxLQUFLK0MsU0FBV0MsU0FBU0MsY0FBYyxPQUN2Q2pELEtBQUsrQyxTQUFTTyxZQUFZdEQsS0FBS2lFLGlCQUMvQmpFLEtBQUsrQyxTQUFTTyxZQUFZdEQsS0FBS2tFLG1CQUMvQmxFLEtBQUsrQyxTQUFTTyxZQUFZdEQsS0FBS2tGLDZCQ3RCdEIsV0FDVEksUUFBUUMsSUFBSSxnQ0FFWixJQUFNckUsRUFBUyxFQUFPZixjQUNoQmdCLEVBQW9CLEVBQWtCaEIsY0FFdENxRixFQUFNeEMsU0FBU3lDLGVBQWUsT0FDcEMsSUFBS0QsRUFDRCxNQUFNLElBQUl6RixNQUFNLG9EQUVwQixJQUFNMkYsRUFBYSxJQUFJLEVBQ3JCdkUsRUFDQUQsR0FFRnNFLEVBQUlsQyxZQUFZb0MsRUFBVzVDLGNBQzNCd0MsUUFBUUMsSUFBSSx5QkFHaEJJIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSBcIi4vdHlwZXMvSXRlbS50eXBlXCJcblxuZXhwb3J0IGNvbnN0IERJU1BMQVlfREVDSU1BTCA9IDJcblxuY29uc3QgZ2VuZXJhdGVSZXZlbnVlRm4gPSAoYmFzZTogbnVtYmVyLCBpbmNyZWFzaW5nUmV2ZW51ZTogbnVtYmVyKSA9PiAobGV2ZWw6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiBiYXNlICsgKGxldmVsICogaW5jcmVhc2luZ1JldmVudWUpXG59XG5jb25zdCBnZW5lcmF0ZVVwZ3JhZGVDb3N0Rm4gPSAoYmFzZTogbnVtYmVyLCBpbmNyZWFzaW5nUmF0aW86IG51bWJlcikgPT4gKGxldmVsOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gYmFzZSArIChsZXZlbCAqIGxldmVsICogaW5jcmVhc2luZ1JhdGlvKVxufVxuXG5leHBvcnQgY29uc3QgaXRlbUNvbmZpZ3M6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnW10gPSBbXG4gIHtcbiAgICAgIHV1aWQ6ICd1dWlkLWxlbW9uJyxcbiAgICAgIG5hbWU6ICdMZW1vbicsXG4gICAgICBwcm9kdWN0aW9uVGltZTogMTAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMSwgMC44KSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigxLCAwLjYpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IHRydWUsXG4gICAgICBwcmljZTogMCxcbiAgICAgIGhhc01hbmFnZXI6IGZhbHNlLFxuICAgICAgbWFuYWdlclByaWNlOiAxMDBcbiAgfSxcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtaWNlLWNyZWFtJyxcbiAgICAgIG5hbWU6ICdJY2UgY3JlYW0nLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDMwMDAsXG4gICAgICByZXZlbnVlRm46IGdlbmVyYXRlUmV2ZW51ZUZuKDEwLCA1KSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigxMCwgMC42KSxcbiAgICAgIGxldmVsOiAxLFxuICAgICAgcHVyY2hhc2VkOiBmYWxzZSxcbiAgICAgIHByaWNlOiAxLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDUwMFxuICB9LFxuICB7XG4gICAgICB1dWlkOiAndXVpZC1iaWN5Y2xlJyxcbiAgICAgIG5hbWU6ICdCaWN5Y2xlJyxcbiAgICAgIHByb2R1Y3Rpb25UaW1lOiAxMDAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMjAsIDEwKSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigxNSwgMC42KSxcbiAgICAgIGxldmVsOiAxLFxuICAgICAgcHVyY2hhc2VkOiBmYWxzZSxcbiAgICAgIHByaWNlOiAxMCxcbiAgICAgIGhhc01hbmFnZXI6IGZhbHNlLFxuICAgICAgbWFuYWdlclByaWNlOiAyMDAwXG4gIH0sXG4gIHtcbiAgICAgIHV1aWQ6ICd1dWlkLW1vdG9yLWJpa2UnLFxuICAgICAgbmFtZTogJ01vdG9yIEJpa2UnLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDYwICogNjAwMDAsXG4gICAgICByZXZlbnVlRm46IGdlbmVyYXRlUmV2ZW51ZUZuKDMwLCAxNSksXG4gICAgICB1cGdyYWRlQ29zdEZuOiBnZW5lcmF0ZVVwZ3JhZGVDb3N0Rm4oMjAsIDEpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDUwLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDQwMDBcbiAgfSxcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtY2FyJyxcbiAgICAgIG5hbWU6ICdDYXInLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDYwICogNjAgKiA1MDAwLFxuICAgICAgcmV2ZW51ZUZuOiBnZW5lcmF0ZVJldmVudWVGbig1MCwgMjUpLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDQwLCAyKSxcbiAgICAgIGxldmVsOiAxLFxuICAgICAgcHVyY2hhc2VkOiBmYWxzZSxcbiAgICAgIHByaWNlOiAxMDAsXG4gICAgICBoYXNNYW5hZ2VyOiBmYWxzZSxcbiAgICAgIG1hbmFnZXJQcmljZTogODAwMFxuICB9XG5dXG4iLCJpbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4uL3R5cGVzL0l0ZW0udHlwZSdcbmltcG9ydCB7IGl0ZW1Db25maWdzIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG5jb25zdCBTVE9SRV9LRVkgPSAnY2FwaXRhbGlzbS1zZXJ2aWNlLWxvY2FsLXN0b3JhZ2Uta2V5J1xuY29uc3QgU1RBUlRfTU9ORVkgPSAxMDAwXG5cblxudHlwZSBJdGVtUHJvZHVjaW5nU2NoZWR1bGVkID0ge1xuICBba2V5OiBzdHJpbmddOiBEYXRlXG59XG5cbnR5cGUgU3RvcmVkRGF0YSA9IHtcbiAgaXRlbUNvbmZpZ3M6IHsgdXVpZDogc3RyaW5nLCBsZXZlbDogbnVtYmVyLCBwdXJjaGFzZWQ6IGJvb2xlYW4sIGhhc01hbmFnZXI6IGJvb2xlYW4sIHByb2R1Y3Rpb25TdGFydEF0OiBzdHJpbmcgfVtdXG4gIG1vbmV5OiBudW1iZXJcbiAgc2F2ZWRBdDogRGF0ZSB8IHN0cmluZ1xufVxuXG5jbGFzcyBDYXBpdGFsaXNtU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBDYXBpdGFsaXNtU2VydmljZVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UgKCk6IENhcGl0YWxpc21TZXJ2aWNlIHtcbiAgICBpZiAoIUNhcGl0YWxpc21TZXJ2aWNlLl9pbnN0YW5jZSkge1xuICAgICAgQ2FwaXRhbGlzbVNlcnZpY2UuX2luc3RhbmNlID0gbmV3IENhcGl0YWxpc21TZXJ2aWNlKClcbiAgICB9XG4gICAgcmV0dXJuIENhcGl0YWxpc21TZXJ2aWNlLl9pbnN0YW5jZVxuICB9XG5cbiAgcHJpdmF0ZSBfbW9uZXk6IG51bWJlclxuICBwcml2YXRlIF9pdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtdXG4gIHByaXZhdGUgX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXA6IHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTwoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHZvaWQ+LFxuICB9ID0ge31cblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5faXRlbUNvbmZpZ3MgPSBpdGVtQ29uZmlnc1xuICAgIHRoaXMuX21vbmV5ID0gU1RBUlRfTU9ORVlcbiAgICB0aGlzLl9sb2FkRGF0YSgpXG4gICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gKCkgPT4ge1xuICAgICAgdGhpcy5fc2F2ZURhdGEoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX25vdGlmeUl0ZW1Db25maWdVcGRhdGVkID0gKGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnKSA9PiB7XG4gICAgaWYgKCF0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1Db25maWcudXVpZF0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1Db25maWcudXVpZF0uZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgIGZuKGl0ZW1Db25maWcpXG4gICAgfSlcbiAgfVxuXG5cbiAgcHJpdmF0ZSBfbG9hZERhdGEgPSAoKSA9PiB7XG4gICAgY29uc3QganNvbkRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SRV9LRVkpXG4gICAgaWYgKCFqc29uRGF0YSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHN0b3JlRGF0YTogU3RvcmVkRGF0YSA9IEpTT04ucGFyc2UoanNvbkRhdGEpXG5cbiAgICBjb25zdCBsb2FkZWRJdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtdXG4gICAgbGV0IGl0ZW1Qcm9kdWNpbmdTY2hlZHVsZWQ6IEl0ZW1Qcm9kdWNpbmdTY2hlZHVsZWQgPSB7fVxuICAgIGxldCBhZGRpdGlvbmFsTW9uZXkgPSAwXG4gICAgc3RvcmVEYXRhLml0ZW1Db25maWdzLmZvckVhY2goKHN0b3JlZEl0ZW1Db25maWcpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxJdGVtQ29uZmlnID0gaXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBzdG9yZWRJdGVtQ29uZmlnLnV1aWQpXG4gICAgICBjb25zdCBpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZyA9IHtcbiAgICAgICAgLi4uaW5pdGlhbEl0ZW1Db25maWcsXG4gICAgICAgIC4uLnN0b3JlZEl0ZW1Db25maWcsXG4gICAgICAgIHByb2R1Y3Rpb25TdGFydEF0OiBudWxsLFxuICAgICAgfVxuICAgICAgaWYgKHN0b3JlZEl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQpIHtcbiAgICAgICAgaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdCA9IG5ldyBEYXRlKHN0b3JlZEl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQpXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmY6IG51bWJlciA9IG5vdy5nZXRUaW1lKCkgLSBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0LmdldFRpbWUoKVxuICAgICAgICBsZXQgY3VycmVudFByb2R1Y3Rpb25TZWNvbmRzID0gbnVsbFxuICAgICAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICAgICAgY29uc3QgcHJvZHVjZWRBbW91bnQgPSBNYXRoLmZsb29yKHRpbWVEaWZmIC8gaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSlcbiAgICAgICAgICBhZGRpdGlvbmFsTW9uZXkgKz0gcHJvZHVjZWRBbW91bnQgKiBpdGVtQ29uZmlnLnJldmVudWVGbihpdGVtQ29uZmlnLmxldmVsKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGZpbmlzaGVkID0gdGltZURpZmYgPj0gaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZVxuICAgICAgICAgICAgJiYgKGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQuZ2V0VGltZSgpICsgaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSA+IG5ldyBEYXRlKHN0b3JlRGF0YS5zYXZlZEF0KS5nZXRUaW1lKCkpXG4gICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsTW9uZXkgKz0gaXRlbUNvbmZpZy5yZXZlbnVlRm4oaXRlbUNvbmZpZy5sZXZlbClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxvYWRlZEl0ZW1Db25maWdzLnB1c2goaXRlbUNvbmZpZylcbiAgICB9KVxuICAgIHRoaXMuX2l0ZW1Db25maWdzID0gbG9hZGVkSXRlbUNvbmZpZ3MsXG4gICAgdGhpcy5fbW9uZXkgPSBzdG9yZURhdGEubW9uZXkgKyBhZGRpdGlvbmFsTW9uZXlcbiAgfVxuXG4gIHByaXZhdGUgX3NhdmVEYXRhID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlZERhdGE6IFN0b3JlZERhdGEgPSB7XG4gICAgICBpdGVtQ29uZmlnczogdGhpcy5faXRlbUNvbmZpZ3MubWFwKChpdGVtQ29uZmlnKSA9PiAoe1xuICAgICAgICB1dWlkOiBpdGVtQ29uZmlnLnV1aWQsXG4gICAgICAgIGxldmVsOiBpdGVtQ29uZmlnLmxldmVsLFxuICAgICAgICBwdXJjaGFzZWQ6IGl0ZW1Db25maWcucHVyY2hhc2VkLFxuICAgICAgICBoYXNNYW5hZ2VyOiBpdGVtQ29uZmlnLmhhc01hbmFnZXIsXG4gICAgICAgIHByb2R1Y3Rpb25TdGFydEF0OiBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0ID8gaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC50b0lTT1N0cmluZygpIDogbnVsbCxcbiAgICAgIH0pKSxcbiAgICAgIG1vbmV5OiB0aGlzLl9tb25leSxcbiAgICAgIHNhdmVkQXQ6IG5ldyBEYXRlKClcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkVfS0VZLCBKU09OLnN0cmluZ2lmeShzdG9yZWREYXRhKSlcbiAgfVxuXG4gIHB1YmxpYyBsb2FkSXRlbUNvbmZpZ3MgPSAoKSA9PiB0aGlzLl9pdGVtQ29uZmlnc1xuXG4gIHB1YmxpYyBsb2FkTW9uZXkgPSAoKSA9PiB0aGlzLl9tb25leVxuXG4gIHB1YmxpYyB1cGRhdGVNb25leSA9IChtb25leTogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5fbW9uZXkgPSBtb25leVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUl0ZW1Qcm9kdWNpbmdUaW1lID0gKGl0ZW1VdWlkOiBzdHJpbmcsIGRhdGU6IERhdGUgPSBuZXcgRGF0ZSgpKSA9PiB7XG4gICAgY29uc3QgaXRlbUNvbmZpZyA9IHRoaXMuX2l0ZW1Db25maWdzLmZpbmQoKGl0ZW1Db25maWcpID0+IGl0ZW1Db25maWcudXVpZCA9PT0gaXRlbVV1aWQpXG4gICAgaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdCA9IGRhdGVcbiAgfVxuXG4gIHB1YmxpYyBnZXRJdGVtQ29uZmlnQnlVdWlkID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICByZXR1cm4geyAuLi5pdGVtQ29uZmlnIH1cbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVJdGVtQ29uZmlnID0gKGl0ZW1VdWlkOiBzdHJpbmcsIGZuOiAoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHZvaWQpID0+IHtcbiAgICBpZiAoIXRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdKSB7XG4gICAgICB0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1VdWlkXSA9IFtdXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdLnB1c2goZm4pXG4gIH1cblxuICBwdWJsaWMgcHVyY2hhc2VJdGVtID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICBpdGVtQ29uZmlnLnB1cmNoYXNlZCA9IHRydWVcbiAgICB0aGlzLl9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZChpdGVtQ29uZmlnKVxuICB9XG5cbiAgcHVibGljIHVwZ3JhZGVJdGVtID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICBpdGVtQ29uZmlnLmxldmVsICs9IDFcbiAgfVxuXG4gIHB1YmxpYyBoaXJlTWFuYWdlciA9IChpdGVtVXVpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaXRlbUNvbmZpZyA9IHRoaXMuX2l0ZW1Db25maWdzLmZpbmQoKGl0ZW1Db25maWcpID0+IGl0ZW1Db25maWcudXVpZCA9PT0gaXRlbVV1aWQpXG4gICAgaWYgKCFpdGVtQ29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIGl0ZW0gY29uZmlnIGZvciAke2l0ZW1Db25maWcubmFtZX1gKVxuICAgIH1cbiAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgaGF2ZSBhIG1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWApXG4gICAgfVxuICAgIGl0ZW1Db25maWcuaGFzTWFuYWdlciA9IHRydWVcbiAgICB0aGlzLl9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZChpdGVtQ29uZmlnKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcGl0YWxpc21TZXJ2aWNlXG4iLCJpbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2UnXG5jbGFzcyBXYWxsZXQge1xuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IFdhbGxldFxuICBwcml2YXRlIF9jYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2VcbiAgcHJpdmF0ZSBfY3VycmVudE1vbmV5OiBudW1iZXJcbiAgcHJpdmF0ZSBfbW9uZXlMaXN0ZW5lcjogQXJyYXk8KG1vbmV5OiBudW1iZXIpID0+IHZvaWQ+ID0gW11cbiAgcHJpdmF0ZSBfbG9jazogQm9vbGVhbiA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IgKGJhc2VNb25leTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpXG4gICAgdGhpcy5fY3VycmVudE1vbmV5ID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZE1vbmV5KClcbiAgfVxuXG4gIHByaXZhdGUgX25vdGlmeU1vbmV5Q2hhbmdlID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLnVwZGF0ZU1vbmV5KHRoaXMuX2N1cnJlbnRNb25leSlcbiAgICB0aGlzLl9tb25leUxpc3RlbmVyLmZvckVhY2goKGZuKSA9PiBmbih0aGlzLl9jdXJyZW50TW9uZXkpKVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSA9ICgpID0+IHtcbiAgICBpZiAoIVdhbGxldC5faW5zdGFuY2UpIHtcbiAgICAgIFdhbGxldC5faW5zdGFuY2UgPSBuZXcgV2FsbGV0KDEwMDApXG4gICAgfVxuICAgIHJldHVybiBXYWxsZXQuX2luc3RhbmNlXG4gIH1cblxuICBwdWJsaWMgZ2V0TW9uZXkgPSAoKSA9PiB0aGlzLl9jdXJyZW50TW9uZXkudG9GaXhlZCgyKVxuXG4gIHB1YmxpYyBvbkFkZE1vbmV5ID0gKG1vbmV5OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgKz0gbW9uZXlcbiAgICB0aGlzLl9ub3RpZnlNb25leUNoYW5nZSgpXG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlTW9uZXkgPSAoZm46IChtb25leTogbnVtYmVyKSA9PiB2b2lkKSA9PiB7XG4gICAgdGhpcy5fbW9uZXlMaXN0ZW5lci5wdXNoKGZuKVxuICB9XG5cbiAgLy8gU2ltcGxlIGxvY2tpbmdcbiAgcHVibGljIGNoYXJnZU1vbmV5ID0gYXN5bmMgKG1vbmV5OiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAodGhpcy5fbG9jaykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMuX2xvY2sgPSB0cnVlXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRNb25leSA8IG1vbmV5KSB7XG4gICAgICB0aGlzLl9sb2NrID0gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgLT0gbW9uZXlcbiAgICB0aGlzLl9sb2NrID0gZmFsc2VcbiAgICB0aGlzLl9ub3RpZnlNb25leUNoYW5nZSgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXYWxsZXRcbiIsImltcG9ydCB7IERJU1BMQVlfREVDSU1BTCwgaXRlbUNvbmZpZ3MgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4uL3R5cGVzL0l0ZW0udHlwZSdcbmltcG9ydCBXYWxsZXQgZnJvbSAnLi4vV2FsbGV0J1xuaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2NhcGl0YWxpc20uc2VydmljZSdcblxuY2xhc3MgSXRlbSB7XG4gIHByaXZhdGUgX2l0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnXG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0XG4gIHByaXZhdGUgX2NhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZVxuXG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50XG4gIHByaXZhdGUgX3RpdGxlRWxlbTogSFRNTEVsZW1lbnRcbiAgcHJpdmF0ZSBfdXBncmFkZUNvc3RFbGVtOiBIVE1MRWxlbWVudFxuICBwcml2YXRlIF9yZXZlbnVlRWxlbTogSFRNTEVsZW1lbnRcbiAgcHJpdmF0ZSBfcHJvZ3Jlc3NFbGVtOiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgX3JldmVudWU6IG51bWJlclxuICBwcml2YXRlIF91cGdyYWRlQ29zdDogbnVtYmVyXG4gIHByaXZhdGUgX2lzUHJvZHVjaW5nOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBfY3VycmVudFByb2R1Y2luZzogUHJvbWlzZTx2b2lkPiA9IG51bGxcblxuICBjb25zdHJ1Y3RvciAoXG4gICAgaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcsXG4gICAgd2FsbGV0OiBXYWxsZXQsXG4gICAgY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlXG4gICkge1xuICAgIC8vIENvcHkgQ29uZmlnXG4gICAgdGhpcy5faXRlbUNvbmZpZyA9IHsgLi4uaXRlbUNvbmZpZyB9XG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0XG4gICAgdGhpcy5fcmV2ZW51ZSA9IGl0ZW1Db25maWcucmV2ZW51ZUZuKGl0ZW1Db25maWcubGV2ZWwpXG4gICAgdGhpcy5fdXBncmFkZUNvc3QgPSBpdGVtQ29uZmlnLnVwZ3JhZGVDb3N0Rm4oaXRlbUNvbmZpZy5sZXZlbClcbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSA9IGNhcGl0YWxpc21TZXJ2aWNlXG5cbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5zdWJzY3JpYmVJdGVtQ29uZmlnKGl0ZW1Db25maWcudXVpZCwgdGhpcy51cGRhdGVDb25maWcpXG5cbiAgICAvLyBJbml0aWFsaXppbmcgY29tcG9uZW50XG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSAnaXRlbSdcbiAgICB0aGlzLl9lbGVtZW50LmlkID0gdGhpcy5faXRlbUNvbmZpZy5uYW1lXG5cbiAgICB0aGlzLl90aXRsZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX3RpdGxlRWxlbS5jbGFzc05hbWUgPSAnbmFtZSdcbiAgICB0aGlzLl90aXRsZUVsZW0uaW5uZXJUZXh0ID0gdGhpcy5faXRlbUNvbmZpZy5uYW1lXG4gICAgdGhpcy5fdGl0bGVFbGVtLm9uY2xpY2sgPSB0aGlzLmhhbmRsZVByb2R1Y2VcblxuICAgIGNvbnN0IHByb2R1Y3Rpb25UaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9kdWN0aW9uVGltZS5jbGFzc05hbWUgPSAncHJvZHVjdGlvbi10aW1lJ1xuICAgIHByb2R1Y3Rpb25UaW1lLmlubmVyVGV4dCA9IGB0YWtlOiAkeyh0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lIC8gMTAwMCkudG9GaXhlZCgwKX0gc2BcblxuICAgIHRoaXMuX3JldmVudWVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLl9yZXZlbnVlRWxlbS5jbGFzc05hbWUgPSAncmV2ZW51ZSdcblxuICAgIHRoaXMuX3VwZ3JhZGVDb3N0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtLmNsYXNzTmFtZSA9ICd1cGdyYWRlJ1xuICAgIHRoaXMuX3VwZ3JhZGVDb3N0RWxlbS5vbmNsaWNrID0gdGhpcy5oYW5kbGVVcGdyYWRlXG5cbiAgICB0aGlzLl9wcm9ncmVzc0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX3Byb2dyZXNzRWxlbSAuY2xhc3NOYW1lID0gJ3Byb2dyZXNzJ1xuXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90aXRsZUVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9yZXZlbnVlRWxlbSlcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHByb2R1Y3Rpb25UaW1lKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdXBncmFkZUNvc3RFbGVtKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcHJvZ3Jlc3NFbGVtKVxuICAgIGlmICh0aGlzLl9pdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1hbmFnZXIoKVxuICAgIH1cblxuICAgIC8vIFJlbmRlciB1cGRhdGUgY29zdCBhbmQgcmV2ZW51ZVxuICAgIHRoaXMucmVuZGVyUmV2ZW51ZUFuZFVwZ3JhZGVDb3N0KClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29uZmlnID0gKGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnKSA9PiB7XG4gICAgaWYgKHRoaXMuX2l0ZW1Db25maWcubmFtZSAhPT0gaXRlbUNvbmZpZy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcnZpY2UgdXBkYXRlcyB3aXRoIGRpZmZlcmVudCBpdGVtIGNvbmZpZycpXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSBpdGVtQ29uZmlnXG4gICAgdGhpcy5yZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QoKVxuICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1hbmFnZXIoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1hbmFnZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgdGhpcy5fdGl0bGVFbGVtLm9uY2xpY2sgPSBudWxsXG4gICAgdGhpcy5fdGl0bGVFbGVtLmlubmVyVGV4dCA9IGAke3RoaXMuX2l0ZW1Db25maWcubmFtZX0gKGhhcyBtYW5hZ2VyKWBcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuZ2V0SXRlbUNvbmZpZ0J5VXVpZCh0aGlzLl9pdGVtQ29uZmlnLnV1aWQpXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGxldCBpbml0aWFsUHJvZ3Jlc3NUaW1lID0gMFxuICAgIGlmICh0aGlzLl9jdXJyZW50UHJvZHVjaW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLl9jdXJyZW50UHJvZHVjaW5nXG4gICAgfSBlbHNlIGlmICh0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0KSB7XG4gICAgICBjb25zdCB1bmRlclByb2R1Y2luZyA9ICh0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0LmdldFRpbWUoKSArIHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblRpbWUpID4gbm93LmdldFRpbWUoKVxuICAgICAgaWYgKHVuZGVyUHJvZHVjaW5nKSB7XG4gICAgICAgIGluaXRpYWxQcm9ncmVzc1RpbWUgPSBub3cuZ2V0VGltZSgpIC0gdGhpcy5faXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC5nZXRUaW1lKClcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVjdXJzaXZlUHJvZHVjaW5nID0gYXN5bmMgKCk6IFByb21pc2U8KCkgPT4gdm9pZD4gPT4ge1xuICAgICAgYXdhaXQgdGhpcy5fcHJvZHVjZUl0ZW0oaW5pdGlhbFByb2dyZXNzVGltZSlcbiAgICAgIGluaXRpYWxQcm9ncmVzc1RpbWUgPSAwXG4gICAgICByZXR1cm4gcmVjdXJzaXZlUHJvZHVjaW5nKClcbiAgICB9XG4gICAgcmVjdXJzaXZlUHJvZHVjaW5nKClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHByaXZhdGUgX3Byb2R1Y2VJdGVtID0gYXN5bmMgKHByb2dyZXNzVGltZSA9IDApOiBQcm9taXNlPHZvaWQ+ID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzUHJvZHVjaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5faXNQcm9kdWNpbmcgPSB0cnVlXG4gICAgaWYgKHByb2dyZXNzVGltZSA9PT0gMCkge1xuICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUodGhpcy5faXRlbUNvbmZpZy51dWlkKVxuICAgIH1cbiAgICB0aGlzLl9wcm9ncmVzc0VsZW0uaW5uZXJUZXh0ID0gYCR7KHByb2dyZXNzVGltZSAvIDEwMDApLnRvRml4ZWQoMSl9IHNgXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBwcm9ncmVzc1RpbWUgKz0gMTAwXG4gICAgICB0aGlzLl9wcm9ncmVzc0VsZW0uaW5uZXJUZXh0ID0gYCR7KHByb2dyZXNzVGltZSAvIDEwMDApLnRvRml4ZWQoMSl9IHNgXG4gICAgfSwgMTAwKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbClcbiAgICAgIHRoaXMuX3Byb2dyZXNzRWxlbS5pbm5lclRleHQgPSAnJ1xuICAgICAgdGhpcy5fd2FsbGV0Lm9uQWRkTW9uZXkodGhpcy5fcmV2ZW51ZSlcbiAgICAgIHRoaXMuX2lzUHJvZHVjaW5nID0gZmFsc2VcbiAgICAgIHJlc29sdmUoKVxuICAgIH0sIHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblRpbWUgLSBwcm9ncmVzc1RpbWUpXG4gIH0pXG5cbiAgcHJpdmF0ZSBoYW5kbGVVcGdyYWRlID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGlzUGF5ZWQgPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkodGhpcy5fdXBncmFkZUNvc3QpXG4gICAgaWYgKCFpc1BheWVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBncmFkZUl0ZW0odGhpcy5faXRlbUNvbmZpZy51dWlkKVxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5nZXRJdGVtQ29uZmlnQnlVdWlkKHRoaXMuX2l0ZW1Db25maWcudXVpZClcbiAgICB0aGlzLl9yZXZlbnVlID0gdGhpcy5faXRlbUNvbmZpZy5yZXZlbnVlRm4odGhpcy5faXRlbUNvbmZpZy5sZXZlbClcbiAgICB0aGlzLl91cGdyYWRlQ29zdCA9IHRoaXMuX2l0ZW1Db25maWcudXBncmFkZUNvc3RGbih0aGlzLl9pdGVtQ29uZmlnLmxldmVsKVxuICAgIHRoaXMucmVuZGVyUmV2ZW51ZUFuZFVwZ3JhZGVDb3N0KClcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUHJvZHVjZSA9ICgpID0+IHtcbiAgICB0aGlzLl9jdXJyZW50UHJvZHVjaW5nID0gdGhpcy5fcHJvZHVjZUl0ZW0oKVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QgKCkge1xuICAgIHRoaXMuX3VwZ3JhZGVDb3N0RWxlbS5pbm5lclRleHQgPSAgYHVwZ3JhZGU6ICR7dGhpcy5fdXBncmFkZUNvc3QudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgICB0aGlzLl9yZXZlbnVlRWxlbS5pbm5lclRleHQgPSBgJCAke3RoaXMuX3JldmVudWUudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbGVtZW50ID0gKCkgPT4gdGhpcy5fZWxlbWVudFxufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtXG4iLCJpbXBvcnQgeyBESVNQTEFZX0RFQ0lNQUwgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4uL3R5cGVzL0l0ZW0udHlwZSdcbmltcG9ydCBXYWxsZXQgZnJvbSAnLi4vV2FsbGV0J1xuXG5jbGFzcyBJdGVtUHVyY2hhc2Uge1xuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudFxuICBwcml2YXRlIF93YWxsZXQ6IFdhbGxldFxuICBwcml2YXRlIF9pdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1xuXG4gIHByaXZhdGUgX2lzUHVyY2hhc2luZzogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgX29uUHVyY2hhc2VkOiAoKSA9PiB2b2lkXG5cbiAgY29uc3RydWN0b3IgKFxuICAgIGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnLFxuICAgIHdhbGxldDogV2FsbGV0LFxuICAgIG9uUHVyY2hhc2VkOiAoKSA9PiB2b2lkLFxuICApIHtcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0gaXRlbUNvbmZpZ1xuICAgIHRoaXMuX3dhbGxldCA9IHdhbGxldFxuICAgIHRoaXMuX29uUHVyY2hhc2VkID0gb25QdXJjaGFzZWRcblxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NOYW1lID0gJ2l0ZW0nXG4gICAgdGhpcy5fZWxlbWVudC5vbmNsaWNrID0gdGhpcy5oYW5kbGVQdXJjaGFzZVxuICAgIGNvbnN0IHB1cmNoYXNlVGV4dEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHB1cmNoYXNlVGV4dEVsZW0uY2xhc3NOYW1lID0gJ3B1cmNoYXNlLXRleHQnXG4gICAgcHVyY2hhc2VUZXh0RWxlbS5pbm5lclRleHQgPSBgcHVyY2hhc2UgJHtpdGVtQ29uZmlnLm5hbWV9IGZvciAke2l0ZW1Db25maWcucHJpY2UudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHB1cmNoYXNlVGV4dEVsZW0pXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVB1cmNoYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc1B1cmNoYXNpbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9pc1B1cmNoYXNpbmcgPSB0cnVlXG4gICAgY29uc3QgcGF5ZWQ6IGJvb2xlYW4gPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkodGhpcy5faXRlbUNvbmZpZy5wcmljZSlcbiAgICBpZiAoIXBheWVkKSB7XG4gICAgICB0aGlzLl9pc1B1cmNoYXNpbmcgPSBmYWxzZVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuX2lzUHVyY2hhc2luZyA9IGZhbHNlXG4gICAgdGhpcy5fb25QdXJjaGFzZWQoKVxuICB9XG5cbiAgcHVibGljIGdldEVsZW1lbnQgPSAoKSA9PiB0aGlzLl9lbGVtZW50XG59XG5cbmV4cG9ydCBkZWZhdWx0IEl0ZW1QdXJjaGFzZVxuIiwiaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2NhcGl0YWxpc20uc2VydmljZSdcbmltcG9ydCBXYWxsZXQgZnJvbSAnLi4vV2FsbGV0J1xuXG5jbGFzcyBIaXJlTWFuYWdlciB7XG4gIHByaXZhdGUgX2NhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZVxuICBwcml2YXRlIF93YWxsZXQ6IFdhbGxldFxuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChcbiAgICBjYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2UsXG4gICAgd2FsbGV0OiBXYWxsZXQsXG4gICAgY2xvc2VIaXJlTWFuYWdlcjogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSA9IGNhcGl0YWxpc21TZXJ2aWNlXG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0XG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSAnaGlyZS1tYW5hZ2VyLXdyYXBwZXInXG5cbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgY2xvc2VCdXR0b24uaW5uZXJUZXh0ID0gJ0Nsb3NlJ1xuICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSBjbG9zZUhpcmVNYW5hZ2VyXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbilcbiAgICB0aGlzLmFwcGVuZE1hbmFnZXJFbGVtZW50cygpXG4gIH1cblxuICBwcml2YXRlIGFwcGVuZE1hbmFnZXJFbGVtZW50cyA9ICgpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlncyA9IHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLmxvYWRJdGVtQ29uZmlncygpXG4gICAgaXRlbUNvbmZpZ3MuZm9yRWFjaCgoaXRlbUNvbmZpZykgPT4ge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9ICdoaXJlLW1hbmFnZXInXG4gICAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJUZXh0ID0gYEhpcmVkIE1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJUZXh0ID0gYE1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfSAoY29zdCAkJHtpdGVtQ29uZmlnLm1hbmFnZXJQcmljZX0pYFxuICAgICAgfVxuICAgICAgd3JhcHBlci5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWl0ZW1Db25maWcucHVyY2hhc2VkKSB7XG4gICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwdXJjaGFzZSBpdGVtIGZpcnN0JylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1BhaWQgPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkoaXRlbUNvbmZpZy5tYW5hZ2VyUHJpY2UpXG4gICAgICAgIGlmICghaXNQYWlkKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuaGlyZU1hbmFnZXIoaXRlbUNvbmZpZy51dWlkKVxuICAgICAgICB3cmFwcGVyLm9uY2xpY2sgPSBudWxsXG4gICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lICs9ICcgcHVyY2hhc2VkJ1xuICAgICAgICB3cmFwcGVyLmlubmVyVGV4dCA9IGBIaXJlZCBNYW5hZ2VyIGZvciAke2l0ZW1Db25maWcubmFtZX1gXG4gICAgICB9XG4gICAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHdyYXBwZXIpXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbGVtZW50ID0gKCk6IEhUTUxFbGVtZW50ID0+IHRoaXMuX2VsZW1lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgSGlyZU1hbmFnZXJcbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSBcIi4uL3R5cGVzL0l0ZW0udHlwZVwiXG5pbXBvcnQgSXRlbSBmcm9tIFwiLi4vY29tcG9uZW50cy9JdGVtXCJcbmltcG9ydCBJdGVtUHVyY2hhc2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvSXRlbVB1cmNoYXNlXCJcbmltcG9ydCBDYXBpdGFsaXNtU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlXCJcbmltcG9ydCBXYWxsZXQgZnJvbSBcIi4uL1dhbGxldFwiXG5pbXBvcnQgeyBESVNQTEFZX0RFQ0lNQUwsIGl0ZW1Db25maWdzIH0gZnJvbSBcIi4uL2NvbmZpZ1wiXG5pbXBvcnQgSGlyZU1hbmFnZXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvSGlyZU1hbmFnZXJcIlxudHlwZSBJdGVtTWFwUHJvcGVydHkgPSB7XG4gIG9yZGVyOiBudW1iZXJcbiAgaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWdcbiAgaXRlbT86IEl0ZW1cbiAgaXRlbVB1cmNoYXNlPzogSXRlbVB1cmNoYXNlXG59XG5cbmNsYXNzIENhcGl0YWxpc20ge1xuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGxcbiAgcHJpdmF0ZSBfdG90YWxNb25leUVsZW06IEhUTUxFbGVtZW50ID0gbnVsbFxuICBwcml2YXRlIF9pdGVtc1dyYXBwZXJFbGVtOiBIVE1MRWxlbWVudCA9IG51bGxcbiAgcHJpdmF0ZSBfaXRlbUNvbmZpZ3M6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnW10gPSBbXVxuICBwcml2YXRlIF9pdGVtczogeyBba2V5OiBzdHJpbmddOiBJdGVtTWFwUHJvcGVydHkgfSA9IHt9XG5cbiAgcHJpdmF0ZSBfY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlID0gbnVsbFxuICBwcml2YXRlIF93YWxsZXQ6IFdhbGxldCA9IG51bGxcbiAgY29uc3RydWN0b3IoXG4gICAgY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlID0gQ2FwaXRhbGlzbVNlcnZpY2UuZ2V0SW5zdGFuY2UoKSxcbiAgICB3YWxsZXQ6IFdhbGxldCA9IFdhbGxldC5nZXRJbnN0YW5jZSgpXG4gICkge1xuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlID0gY2FwaXRhbGlzbVNlcnZpY2VcbiAgICB0aGlzLl93YWxsZXQgPSB3YWxsZXRcbiAgICB0aGlzLl90b3RhbE1vbmV5RWxlbSA9IHRoaXMucmVuZGVyVG90YWxNb25leSgpXG4gICAgdGhpcy5faXRlbXNXcmFwcGVyRWxlbSA9IHRoaXMucmVuZGVySXRlbVdyYXBwZXIoKVxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdG90YWxNb25leUVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9pdGVtc1dyYXBwZXJFbGVtKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJIaXJlTWFuYWdlckJ1dHRvbigpKVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUl0ZW0gPSAoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHtcbiAgICBjb25zdCBpdGVtID0gbmV3IEl0ZW0oaXRlbUNvbmZpZywgdGhpcy5fd2FsbGV0LCB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSlcbiAgICByZXR1cm4gaXRlbVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVB1cmNoYXNlSXRlbSA9IChpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZykgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVB1cmNoYXNlSXRlbSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLnB1cmNoYXNlSXRlbShpdGVtQ29uZmlnLnV1aWQpXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbUNvbmZpZyA9IHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLmdldEl0ZW1Db25maWdCeVV1aWQoXG4gICAgICAgIGl0ZW1Db25maWcudXVpZFxuICAgICAgKVxuICAgICAgY29uc3QgY3VycmVudFByb3BlcnR5OiBJdGVtTWFwUHJvcGVydHkgPSB0aGlzLl9pdGVtc1tpdGVtQ29uZmlnLnV1aWRdXG4gICAgICBjdXJyZW50UHJvcGVydHkuaXRlbUNvbmZpZyA9IHVwZGF0ZWRJdGVtQ29uZmlnXG4gICAgICB0aGlzLl9pdGVtc1tpdGVtQ29uZmlnLnV1aWRdLml0ZW0gPSBuZXcgSXRlbShcbiAgICAgICAgdXBkYXRlZEl0ZW1Db25maWcsXG4gICAgICAgIHRoaXMuX3dhbGxldCxcbiAgICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2VcbiAgICAgIClcbiAgICAgIHRoaXMuX2l0ZW1zV3JhcHBlckVsZW0ucmVwbGFjZUNoaWxkKFxuICAgICAgICB0aGlzLl9pdGVtc1tpdGVtQ29uZmlnLnV1aWRdLml0ZW0uZ2V0RWxlbWVudCgpLFxuICAgICAgICB0aGlzLl9pdGVtc1dyYXBwZXJFbGVtLmNoaWxkTm9kZXNbY3VycmVudFByb3BlcnR5Lm9yZGVyXVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGl0ZW1QdXJjaGFzZSA9IG5ldyBJdGVtUHVyY2hhc2UoXG4gICAgICBpdGVtQ29uZmlnLFxuICAgICAgdGhpcy5fd2FsbGV0LFxuICAgICAgaGFuZGxlUHVyY2hhc2VJdGVtXG4gICAgKVxuICAgIHJldHVybiBpdGVtUHVyY2hhc2VcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySXRlbVdyYXBwZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgaXRlbXNXcmFwcGVyRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBjb25zdCBpdGVtQ29uZmlncyA9IHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLmxvYWRJdGVtQ29uZmlncygpXG4gICAgaXRlbUNvbmZpZ3MuZm9yRWFjaCgoaXRlbUNvbmZpZywgaWR4KSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50UHJvcGVydHk6IEl0ZW1NYXBQcm9wZXJ0eSA9IHtcbiAgICAgICAgaXRlbUNvbmZpZzogaXRlbUNvbmZpZyxcbiAgICAgICAgb3JkZXI6IGlkeCxcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtQ29uZmlnLnB1cmNoYXNlZCkge1xuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5nZW5lcmF0ZUl0ZW0oaXRlbUNvbmZpZylcbiAgICAgICAgY3VycmVudFByb3BlcnR5Lml0ZW0gPSBpdGVtXG4gICAgICAgIGl0ZW1zV3JhcHBlckVsZW0uYXBwZW5kQ2hpbGQoaXRlbS5nZXRFbGVtZW50KCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtUHVyY2hhc2UgPSB0aGlzLmdlbmVyYXRlUHVyY2hhc2VJdGVtKGl0ZW1Db25maWcpXG4gICAgICAgIGN1cnJlbnRQcm9wZXJ0eS5pdGVtUHVyY2hhc2UgPSBpdGVtUHVyY2hhc2VcbiAgICAgICAgaXRlbXNXcmFwcGVyRWxlbS5hcHBlbmRDaGlsZChpdGVtUHVyY2hhc2UuZ2V0RWxlbWVudCgpKVxuICAgICAgfVxuICAgICAgdGhpcy5faXRlbXNbaXRlbUNvbmZpZy51dWlkXSA9IGN1cnJlbnRQcm9wZXJ0eVxuICAgIH0pXG4gICAgcmV0dXJuIGl0ZW1zV3JhcHBlckVsZW1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVG90YWxNb25leSA9ICgpID0+IHtcbiAgICBjb25zdCB0b3RhbE1vbmV5RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICB0b3RhbE1vbmV5RWxlbS5jbGFzc05hbWUgPSBcInRvdGFsIG1vbmV5XCJcbiAgICB0b3RhbE1vbmV5RWxlbS5pbm5lclRleHQgPSBgdG90YWw6ICR7dGhpcy5fd2FsbGV0LmdldE1vbmV5KCl9YFxuICAgIHRoaXMuX3dhbGxldC5zdWJzY3JpYmVNb25leSgobW9uZXk6IG51bWJlcikgPT4ge1xuICAgICAgdG90YWxNb25leUVsZW0uaW5uZXJUZXh0ID0gYHRvdGFsOiAke21vbmV5LnRvRml4ZWQoXG4gICAgICAgIERJU1BMQVlfREVDSU1BTFxuICAgICAgKX1gXG4gICAgfSlcbiAgICByZXR1cm4gdG90YWxNb25leUVsZW1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySGlyZU1hbmFnZXJCdXR0b24gPSAoKSA9PiB7XG4gICAgY29uc3QgaGlyZU1hbmFnZXJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGhpcmVNYW5hZ2VyQnV0dG9uLmNsYXNzTmFtZSA9ICdoaXJlLW1hbmFnZXItYnV0dG9uJ1xuICAgIGhpcmVNYW5hZ2VyQnV0dG9uLmlubmVyVGV4dCA9ICdIaXJlIE1hbmFnZXInXG4gICAgaGlyZU1hbmFnZXJCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgbGV0IGhpcmVNYW5hZ2VyRWxlbTogSFRNTEVsZW1lbnRcbiAgICAgICAgY29uc3QgaGlyZU1hbmFnZXIgPSBuZXcgSGlyZU1hbmFnZXIoXG4gICAgICAgICAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSxcbiAgICAgICAgICAgIHRoaXMuX3dhbGxldCxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUNoaWxkKGhpcmVNYW5hZ2VyRWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBoaXJlTWFuYWdlckVsZW0gPSBoaXJlTWFuYWdlci5nZXRFbGVtZW50KClcbiAgICAgICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZChoaXJlTWFuYWdlckVsZW0pXG4gICAgfVxuICAgIHJldHVybiBoaXJlTWFuYWdlckJ1dHRvblxuICB9XG5cbiAgcHVibGljIGdldEVsZW1lbnQgPSAoKTogSFRNTEVsZW1lbnQgPT4gdGhpcy5fZWxlbWVudFxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXBpdGFsaXNtXG4iLCJpbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4vdHlwZXMvSXRlbS50eXBlJ1xuaW1wb3J0IFdhbGxldCBmcm9tICcuL1dhbGxldCdcbmltcG9ydCB7IERJU1BMQVlfREVDSU1BTCwgaXRlbUNvbmZpZ3MgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCBJdGVtIGZyb20gJy4vY29tcG9uZW50cy9JdGVtJ1xuaW1wb3J0IEl0ZW1QdXJjaGFzZSBmcm9tICcuL2NvbXBvbmVudHMvSXRlbVB1cmNoYXNlJ1xuaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gJy4vc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlJ1xuaW1wb3J0IEhpcmVNYW5hZ2VyIGZyb20gJy4vY29tcG9uZW50cy9IaXJlTWFuYWdlcidcbmltcG9ydCBDYXBpdGFsaXNtIGZyb20gJy4vY29udGFpbmVycy9DYXBpdGFsaXNtJ1xuXG5cblxuXG5jb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCc9PT09IEluaXRpYWxpemluZyBzdGFydCA9PT09JylcblxuICAgIGNvbnN0IHdhbGxldCA9IFdhbGxldC5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3QgY2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpXG5cbiAgICBjb25zdCBhcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJylcbiAgICBpZiAoIWFwcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vICNhcHAgZWxlbWVudCB0byBhdHRhY2ggZ2FtZSBlbGVtZW50cycpXG4gICAgfVxuICAgIGNvbnN0IGNhcGl0YWxpc20gPSBuZXcgQ2FwaXRhbGlzbShcbiAgICAgIGNhcGl0YWxpc21TZXJ2aWNlLFxuICAgICAgd2FsbGV0LFxuICAgIClcbiAgICBhcHAuYXBwZW5kQ2hpbGQoY2FwaXRhbGlzbS5nZXRFbGVtZW50KCkpXG4gICAgY29uc29sZS5sb2coJz09PT0gSW5pdGlhbGl6ZWQgPT09PScpXG59XG5cbmluaXQoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==