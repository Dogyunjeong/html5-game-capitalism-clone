!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(e,t){return function(n){return e+n*t}},r=function(e,t){return function(n){return e+n*n*t}},o=[{uuid:"uuid-lemon",name:"Lemon",productionTime:1e3,revenueFn:i(1,.8),upgradeCostFn:r(1,.6),level:1,purchased:!0,price:0,hasManager:!1,managerPrice:100},{uuid:"uuid-ice-cream",name:"Ice cream",productionTime:3e3,revenueFn:i(10,5),upgradeCostFn:r(10,.6),level:1,purchased:!1,price:1,hasManager:!1,managerPrice:500},{uuid:"uuid-bicycle",name:"Bicycle",productionTime:1e4,revenueFn:i(20,10),upgradeCostFn:r(15,.6),level:1,purchased:!1,price:10,hasManager:!1,managerPrice:2e3},{uuid:"uuid-motor-bike",name:"Motor Bike",productionTime:36e5,revenueFn:i(30,15),upgradeCostFn:r(20,1),level:1,purchased:!1,price:50,hasManager:!1,managerPrice:4e3},{uuid:"uuid-car",name:"Car",productionTime:18e6,revenueFn:i(50,25),upgradeCostFn:r(40,2),level:1,purchased:!1,price:100,hasManager:!1,managerPrice:8e3}],a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u="capitalism-service-local-storage-key",c=function(){function e(){var e=this;this._itemConfigs=[],this._itemConfigListenersMap={},this._notifyItemConfigUpdated=function(t){e._itemConfigListenersMap[t.uuid]&&e._itemConfigListenersMap[t.uuid].forEach((function(e){e(t)}))},this._loadData=function(){var t=localStorage.getItem(u);if(t){var n=JSON.parse(t),i=[],r=0;n.itemConfigs.forEach((function(e){var t=o.find((function(t){return t.uuid===e.uuid})),u=a(a(a({},t),e),{productionStartAt:null});if(e.productionStartAt){u.productionStartAt=new Date(e.productionStartAt);var c=(new Date).getTime()-u.productionStartAt.getTime();if(u.hasManager){var s=Math.floor(c/u.productionTime);r+=s*u.revenueFn(u.level)}else{c>=u.productionTime&&u.productionStartAt.getTime()+u.productionTime>new Date(n.savedAt).getTime()&&(r+=u.revenueFn(u.level))}}i.push(u)})),e._itemConfigs=i,e._money=n.money+r}},this._saveData=function(){var t={itemConfigs:e._itemConfigs.map((function(e){return{uuid:e.uuid,level:e.level,purchased:e.purchased,hasManager:e.hasManager,productionStartAt:e.productionStartAt?e.productionStartAt.toISOString():null}})),money:e._money,savedAt:new Date};localStorage.setItem(u,JSON.stringify(t))},this.loadItemConfigs=function(){return e._itemConfigs},this.loadMoney=function(){return e._money},this.updateMoney=function(t){e._money=t},this.updateItemProducingTime=function(t,n){void 0===n&&(n=new Date),e._itemConfigs.find((function(e){return e.uuid===t})).productionStartAt=n},this.getItemConfigByUuid=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));return a({},n)},this.subscribeItemConfig=function(t,n){e._itemConfigListenersMap[t]||(e._itemConfigListenersMap[t]=[]),e._itemConfigListenersMap[t].push(n)},this.purchaseItem=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));n.purchased=!0,e._notifyItemConfigUpdated(n)},this.upgradeItem=function(t){e._itemConfigs.find((function(e){return e.uuid===t})).level+=1},this.hireManager=function(t){var n=e._itemConfigs.find((function(e){return e.uuid===t}));if(!n)throw new Error("There is no item config for "+n.name);if(n.hasManager)throw new Error("Already have a manager for "+n.name);n.hasManager=!0,e._notifyItemConfigUpdated(n)},this._itemConfigs=o,this._money=1e3,this._loadData(),window.onbeforeunload=function(){e._saveData()}}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function u(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((i=i.apply(e,t||[])).next())}))},l=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},h=function(){function e(e){var t=this;this._moneyListener=[],this._lock=!1,this._notifyMoneyChange=function(){t._capitalismService.updateMoney(t._currentMoney),t._moneyListener.forEach((function(e){return e(t._currentMoney)}))},this.getMoney=function(){return t._currentMoney.toFixed(2)},this.onAddMoney=function(e){t._currentMoney+=e,t._notifyMoneyChange()},this.subscribeMoney=function(e){t._moneyListener.push(e)},this.chargeMoney=function(e){return s(t,void 0,void 0,(function(){return l(this,(function(t){return this._lock?[2,!1]:(this._lock=!0,this._currentMoney<e?(this._lock=!1,[2,!1]):(this._currentMoney-=e,this._lock=!1,this._notifyMoneyChange(),[2,!0]))}))}))},this._capitalismService=c.getInstance(),this._currentMoney=this._capitalismService.loadMoney()}return e.getInstance=function(){return e._instance||(e._instance=new e(1e3)),e._instance},e}(),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function u(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((i=i.apply(e,t||[])).next())}))},m=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},p=function(){function e(e,t,n){var i=this;this._isProducing=!1,this._currentProducing=null,this.updateConfig=function(e){if(i._itemConfig.name!==e.name)throw new Error("Service updates with different item config");i._itemConfig=e,i.renderRevenueAndUpgradeCost(),e.hasManager&&i.initializeManager()},this.initializeManager=function(){return d(i,void 0,void 0,(function(){var e,t,n,i=this;return m(this,(function(r){switch(r.label){case 0:return this._titleElem.onclick=null,this._titleElem.innerText=this._itemConfig.name+" (has manager)",this._itemConfig=this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid),e=new Date,t=0,this._currentProducing?[4,this._currentProducing]:[3,2];case 1:return r.sent(),[3,3];case 2:this._itemConfig.productionStartAt&&this._itemConfig.productionStartAt.getTime()+this._itemConfig.productionTime>e.getTime()&&(t=e.getTime()-this._itemConfig.productionStartAt.getTime()),r.label=3;case 3:return(n=function(){return d(i,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this._produceItem(t)];case 1:return e.sent(),t=0,[2,n()]}}))}))})(),[2]}}))}))},this._produceItem=function(e){return void 0===e&&(e=0),d(i,void 0,void 0,(function(){var t=this;return m(this,(function(n){return[2,new Promise((function(n){if(!t._isProducing){t._isProducing=!0,0===e&&t._capitalismService.updateItemProducingTime(t._itemConfig.uuid),t._progressElem.innerText=(e/1e3).toFixed(1)+" s";var i=setInterval((function(){e+=100,t._progressElem.innerText=(e/1e3).toFixed(1)+" s"}),100);setTimeout((function(){clearInterval(i),t._progressElem.innerText="",t._wallet.onAddMoney(t._revenue),t._isProducing=!1,n()}),t._itemConfig.productionTime-e)}}))]}))}))},this.handleUpgrade=function(){return d(i,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this._wallet.chargeMoney(this._upgradeCost)];case 1:return e.sent()?(this._capitalismService.upgradeItem(this._itemConfig.uuid),this._itemConfig=f({},this._capitalismService.getItemConfigByUuid(this._itemConfig.uuid)),this.renderRevenueAndUpgradeCost(),this._revenue=this._itemConfig.revenueFn(this._itemConfig.level),this._upgradeCost=this._itemConfig.upgradeCostFn(this._itemConfig.level),[2]):[2]}}))}))},this.handleProduce=function(){i._currentProducing=i._produceItem()},this.getElement=function(){return i._element},this._itemConfig=f({},e),this._wallet=t,this._revenue=e.revenueFn(e.level),this._upgradeCost=e.upgradeCostFn(e.level),this._capitalismService=n,this._capitalismService.subscribeItemConfig(e.uuid,this.updateConfig),this._element=document.createElement("div"),this._element.className="item",this._element.id=this._itemConfig.name,this._titleElem=document.createElement("div"),this._titleElem.className="name",this._titleElem.innerText=this._itemConfig.name,this._titleElem.onclick=this.handleProduce;var r=document.createElement("div");r.className="production-time",r.innerText="take: "+(this._itemConfig.productionTime/1e3).toFixed(0)+" s",this._revenueElem=document.createElement("div"),this._revenueElem.className="revenue",this._upgradeCostElem=document.createElement("div"),this._upgradeCostElem.className="upgrade",this._upgradeCostElem.onclick=this.handleUpgrade,this._progressElem=document.createElement("div"),this._progressElem.className="progress",this._element.appendChild(this._titleElem),this._element.appendChild(this._revenueElem),this._element.appendChild(r),this._element.appendChild(this._upgradeCostElem),this._element.appendChild(this._progressElem),this._itemConfig.hasManager&&this.initializeManager(),this.renderRevenueAndUpgradeCost()}return e.prototype.renderRevenueAndUpgradeCost=function(){this._upgradeCostElem.innerText="upgrade: "+this._upgradeCost.toFixed(2),this._revenueElem.innerText="$ "+this._revenue.toFixed(2)},e}(),g=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function u(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((i=i.apply(e,t||[])).next())}))},_=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v=function(e,t,n){var i=this;this._isPurchasing=!1,this.handlePurchase=function(){return g(i,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return this._isPurchasing?[2]:(this._isPurchasing=!0,[4,this._wallet.chargeMoney(this._itemConfig.price)]);case 1:return e.sent()?(this._isPurchasing=!1,this._onPurchased(),[2]):(this._isPurchasing=!1,[2])}}))}))},this.getElement=function(){return i._element},this._itemConfig=e,this._wallet=t,this._onPurchased=n,this._element=document.createElement("div"),this._element.className="item",this._element.onclick=this.handlePurchase;var r=document.createElement("div");r.className="purchase-text",r.innerText="purchase "+e.name+" for "+e.price.toFixed(2),this._element.appendChild(r)},y=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function u(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((i=i.apply(e,t||[])).next())}))},C=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},b=function(e,t,n){var i=this;this.appendManagerElements=function(){i._capitalismService.loadItemConfigs().forEach((function(e){var t=document.createElement("div");t.className="hire-manager",e.hasManager?t.innerText="Hired Manager for "+e.name:t.innerText="Manager for "+e.name+" (cost $"+e.managerPrice+")",t.onclick=function(){return y(i,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return e.purchased?[4,this._wallet.chargeMoney(e.managerPrice)]:(alert("Please purchase item first"),[2]);case 1:return n.sent()?(this._capitalismService.hireManager(e.uuid),t.onclick=null,t.className+=" purchased",t.innerText="Hired Manager for "+e.name,[2]):[2]}}))}))},i._element.appendChild(t)}))},this.getElement=function(){return i._element},this._capitalismService=e,this._wallet=t,this._element=document.createElement("div"),this._element.className="hire-manager-wrapper";var r=document.createElement("button");r.innerText="Close",r.onclick=n,this._element.appendChild(r),this.appendManagerElements()};!function(){console.log("==== Initializing start ====");var e={},t=h.getInstance(),n=c.getInstance(),i=document.getElementById("app");if(!i)throw new Error("There is no #app element to attach game elements");var r=document.createElement("div");r.className="total money",r.innerText="total: "+t.getMoney(),i.appendChild(r),t.subscribeMoney((function(e){r.innerText="total: "+e.toFixed(2)}));var o=document.createElement("div");i.appendChild(o),n.loadItemConfigs().forEach((function(i,r){var a={config:i,order:r};i.purchased?(a.item=new p(i,t,n),o.appendChild(a.item.getElement())):(a.itemPurchase=new v(i,t,(function(){n.purchaseItem(i.uuid),e[i.uuid].item=new p(i,t,n),o.replaceChild(e[i.uuid].item.getElement(),o.childNodes[r])})),o.appendChild(a.itemPurchase.getElement())),e[i.uuid]=a}));var a=document.createElement("button");a.className="hire-manager-button",a.innerText="Hire Manager",a.onclick=function(){var e,r=new b(n,t,(function(){i.removeChild(e)}));e=r.getElement(),i.appendChild(e)},i.appendChild(a),console.log("==== Initialized ====")}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmljZXMvY2FwaXRhbGlzbS5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9XYWxsZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9JdGVtUHVyY2hhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSGlyZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZ2VuZXJhdGVSZXZlbnVlRm4iLCJiYXNlIiwiaW5jcmVhc2luZ1JldmVudWUiLCJsZXZlbCIsImdlbmVyYXRlVXBncmFkZUNvc3RGbiIsImluY3JlYXNpbmdSYXRpbyIsInV1aWQiLCJwcm9kdWN0aW9uVGltZSIsInJldmVudWVGbiIsInVwZ3JhZGVDb3N0Rm4iLCJwdXJjaGFzZWQiLCJwcmljZSIsImhhc01hbmFnZXIiLCJtYW5hZ2VyUHJpY2UiLCJTVE9SRV9LRVkiLCJfaXRlbUNvbmZpZ3MiLCJfaXRlbUNvbmZpZ0xpc3RlbmVyc01hcCIsIl9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZCIsIml0ZW1Db25maWciLCJmb3JFYWNoIiwiZm4iLCJfbG9hZERhdGEiLCJqc29uRGF0YSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdG9yZURhdGEiLCJKU09OIiwicGFyc2UiLCJsb2FkZWRJdGVtQ29uZmlncyIsImFkZGl0aW9uYWxNb25leSIsIml0ZW1Db25maWdzIiwic3RvcmVkSXRlbUNvbmZpZyIsImluaXRpYWxJdGVtQ29uZmlnIiwiZmluZCIsInByb2R1Y3Rpb25TdGFydEF0IiwiRGF0ZSIsInRpbWVEaWZmIiwiZ2V0VGltZSIsInByb2R1Y2VkQW1vdW50IiwiTWF0aCIsImZsb29yIiwic2F2ZWRBdCIsInB1c2giLCJfbW9uZXkiLCJtb25leSIsIl9zYXZlRGF0YSIsInN0b3JlZERhdGEiLCJtYXAiLCJ0b0lTT1N0cmluZyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJsb2FkSXRlbUNvbmZpZ3MiLCJsb2FkTW9uZXkiLCJ1cGRhdGVNb25leSIsInVwZGF0ZUl0ZW1Qcm9kdWNpbmdUaW1lIiwiaXRlbVV1aWQiLCJkYXRlIiwiZ2V0SXRlbUNvbmZpZ0J5VXVpZCIsInN1YnNjcmliZUl0ZW1Db25maWciLCJwdXJjaGFzZUl0ZW0iLCJ1cGdyYWRlSXRlbSIsImhpcmVNYW5hZ2VyIiwiRXJyb3IiLCJ0aGlzIiwid2luZG93Iiwib25iZWZvcmV1bmxvYWQiLCJnZXRJbnN0YW5jZSIsIkNhcGl0YWxpc21TZXJ2aWNlIiwiX2luc3RhbmNlIiwiYmFzZU1vbmV5IiwiX21vbmV5TGlzdGVuZXIiLCJfbG9jayIsIl9ub3RpZnlNb25leUNoYW5nZSIsIl9jYXBpdGFsaXNtU2VydmljZSIsIl9jdXJyZW50TW9uZXkiLCJnZXRNb25leSIsInRvRml4ZWQiLCJvbkFkZE1vbmV5Iiwic3Vic2NyaWJlTW9uZXkiLCJjaGFyZ2VNb25leSIsIldhbGxldCIsIndhbGxldCIsImNhcGl0YWxpc21TZXJ2aWNlIiwiX2lzUHJvZHVjaW5nIiwiX2N1cnJlbnRQcm9kdWNpbmciLCJ1cGRhdGVDb25maWciLCJfaXRlbUNvbmZpZyIsInJlbmRlclJldmVudWVBbmRVcGdyYWRlQ29zdCIsImluaXRpYWxpemVNYW5hZ2VyIiwiX3RpdGxlRWxlbSIsIm9uY2xpY2siLCJpbm5lclRleHQiLCJub3ciLCJpbml0aWFsUHJvZ3Jlc3NUaW1lIiwicmVjdXJzaXZlUHJvZHVjaW5nIiwiX3Byb2R1Y2VJdGVtIiwicHJvZ3Jlc3NUaW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJfcHJvZ3Jlc3NFbGVtIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInNldFRpbWVvdXQiLCJjbGVhckludGVydmFsIiwiX3dhbGxldCIsIl9yZXZlbnVlIiwiaGFuZGxlVXBncmFkZSIsIl91cGdyYWRlQ29zdCIsImhhbmRsZVByb2R1Y2UiLCJnZXRFbGVtZW50IiwiX2VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpZCIsIl9yZXZlbnVlRWxlbSIsIl91cGdyYWRlQ29zdEVsZW0iLCJhcHBlbmRDaGlsZCIsIm9uUHVyY2hhc2VkIiwiX2lzUHVyY2hhc2luZyIsImhhbmRsZVB1cmNoYXNlIiwiX29uUHVyY2hhc2VkIiwicHVyY2hhc2VUZXh0RWxlbSIsImNsb3NlSGlyZU1hbmFnZXIiLCJhcHBlbmRNYW5hZ2VyRWxlbWVudHMiLCJ3cmFwcGVyIiwiYWxlcnQiLCJjbG9zZUJ1dHRvbiIsImNvbnNvbGUiLCJsb2ciLCJpdGVtcyIsImFwcCIsImdldEVsZW1lbnRCeUlkIiwidG90YWxNb25leSIsIml0ZW1zV3JhcHBlciIsImlkeCIsImN1cnJlbnRQcm9wZXJ0eSIsImNvbmZpZyIsIm9yZGVyIiwiaXRlbSIsIml0ZW1QdXJjaGFzZSIsInJlcGxhY2VDaGlsZCIsImNoaWxkTm9kZXMiLCJoaXJlTWFuYWdlckJ1dHRvbiIsImhpcmVNYW5hZ2VyRWxlbSIsInJlbW92ZUNoaWxkIiwiaW5pdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JD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QWMsSUFBSSxFQUNwQnFCLEVBQ0FELEdBQ0EsV0FDSWtELEVBQUljLFlBQVlELE1BR3hCQSxFQUFrQm5GLEVBQVlnRCxhQUM5QnNCLEVBQUlkLFlBQVkyQixJQUVwQmIsRUFBSWQsWUFBWTBCLEdBQ2hCZixRQUFRQyxJQUFJLHlCQUdoQmlCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSBcIi4vdHlwZXMvSXRlbS50eXBlXCJcblxuZXhwb3J0IGNvbnN0IERJU1BMQVlfREVDSU1BTCA9IDJcblxuY29uc3QgZ2VuZXJhdGVSZXZlbnVlRm4gPSAoYmFzZTogbnVtYmVyLCBpbmNyZWFzaW5nUmV2ZW51ZTogbnVtYmVyKSA9PiAobGV2ZWw6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiBiYXNlICsgKGxldmVsICogaW5jcmVhc2luZ1JldmVudWUpXG59XG5jb25zdCBnZW5lcmF0ZVVwZ3JhZGVDb3N0Rm4gPSAoYmFzZTogbnVtYmVyLCBpbmNyZWFzaW5nUmF0aW86IG51bWJlcikgPT4gKGxldmVsOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gYmFzZSArIChsZXZlbCAqIGxldmVsICogaW5jcmVhc2luZ1JhdGlvKVxufVxuXG5leHBvcnQgY29uc3QgaXRlbUNvbmZpZ3M6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnW10gPSBbXG4gIHtcbiAgICAgIHV1aWQ6ICd1dWlkLWxlbW9uJyxcbiAgICAgIG5hbWU6ICdMZW1vbicsXG4gICAgICBwcm9kdWN0aW9uVGltZTogMTAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMSwgMC44KSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigxLCAwLjYpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IHRydWUsXG4gICAgICBwcmljZTogMCxcbiAgICAgIGhhc01hbmFnZXI6IGZhbHNlLFxuICAgICAgbWFuYWdlclByaWNlOiAxMDBcbiAgfSxcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtaWNlLWNyZWFtJyxcbiAgICAgIG5hbWU6ICdJY2UgY3JlYW0nLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDMwMDAsXG4gICAgICByZXZlbnVlRm46IGdlbmVyYXRlUmV2ZW51ZUZuKDEwLCA1KSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigxMCwgMC42KSxcbiAgICAgIGxldmVsOiAxLFxuICAgICAgcHVyY2hhc2VkOiBmYWxzZSxcbiAgICAgIHByaWNlOiAxLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDUwMFxuICB9LFxuICB7XG4gICAgICB1dWlkOiAndXVpZC1iaWN5Y2xlJyxcbiAgICAgIG5hbWU6ICdCaWN5Y2xlJyxcbiAgICAgIHByb2R1Y3Rpb25UaW1lOiAxMDAwMCxcbiAgICAgIHJldmVudWVGbjogZ2VuZXJhdGVSZXZlbnVlRm4oMjAsIDEwKSxcbiAgICAgIHVwZ3JhZGVDb3N0Rm46IGdlbmVyYXRlVXBncmFkZUNvc3RGbigxNSwgMC42KSxcbiAgICAgIGxldmVsOiAxLFxuICAgICAgcHVyY2hhc2VkOiBmYWxzZSxcbiAgICAgIHByaWNlOiAxMCxcbiAgICAgIGhhc01hbmFnZXI6IGZhbHNlLFxuICAgICAgbWFuYWdlclByaWNlOiAyMDAwXG4gIH0sXG4gIHtcbiAgICAgIHV1aWQ6ICd1dWlkLW1vdG9yLWJpa2UnLFxuICAgICAgbmFtZTogJ01vdG9yIEJpa2UnLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDYwICogNjAwMDAsXG4gICAgICByZXZlbnVlRm46IGdlbmVyYXRlUmV2ZW51ZUZuKDMwLCAxNSksXG4gICAgICB1cGdyYWRlQ29zdEZuOiBnZW5lcmF0ZVVwZ3JhZGVDb3N0Rm4oMjAsIDEpLFxuICAgICAgbGV2ZWw6IDEsXG4gICAgICBwdXJjaGFzZWQ6IGZhbHNlLFxuICAgICAgcHJpY2U6IDUwLFxuICAgICAgaGFzTWFuYWdlcjogZmFsc2UsXG4gICAgICBtYW5hZ2VyUHJpY2U6IDQwMDBcbiAgfSxcbiAge1xuICAgICAgdXVpZDogJ3V1aWQtY2FyJyxcbiAgICAgIG5hbWU6ICdDYXInLFxuICAgICAgcHJvZHVjdGlvblRpbWU6IDYwICogNjAgKiA1MDAwLFxuICAgICAgcmV2ZW51ZUZuOiBnZW5lcmF0ZVJldmVudWVGbig1MCwgMjUpLFxuICAgICAgdXBncmFkZUNvc3RGbjogZ2VuZXJhdGVVcGdyYWRlQ29zdEZuKDQwLCAyKSxcbiAgICAgIGxldmVsOiAxLFxuICAgICAgcHVyY2hhc2VkOiBmYWxzZSxcbiAgICAgIHByaWNlOiAxMDAsXG4gICAgICBoYXNNYW5hZ2VyOiBmYWxzZSxcbiAgICAgIG1hbmFnZXJQcmljZTogODAwMFxuICB9XG5dXG4iLCJpbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4uL3R5cGVzL0l0ZW0udHlwZSdcbmltcG9ydCB7IGl0ZW1Db25maWdzIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG5jb25zdCBTVE9SRV9LRVkgPSAnY2FwaXRhbGlzbS1zZXJ2aWNlLWxvY2FsLXN0b3JhZ2Uta2V5J1xuY29uc3QgU1RBUlRfTU9ORVkgPSAxMDAwXG5cblxudHlwZSBJdGVtUHJvZHVjaW5nU2NoZWR1bGVkID0ge1xuICBba2V5OiBzdHJpbmddOiBEYXRlXG59XG5cbnR5cGUgU3RvcmVkRGF0YSA9IHtcbiAgaXRlbUNvbmZpZ3M6IHsgdXVpZDogc3RyaW5nLCBsZXZlbDogbnVtYmVyLCBwdXJjaGFzZWQ6IGJvb2xlYW4sIGhhc01hbmFnZXI6IGJvb2xlYW4sIHByb2R1Y3Rpb25TdGFydEF0OiBzdHJpbmcgfVtdXG4gIG1vbmV5OiBudW1iZXJcbiAgc2F2ZWRBdDogRGF0ZSB8IHN0cmluZ1xufVxuXG5jbGFzcyBDYXBpdGFsaXNtU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBDYXBpdGFsaXNtU2VydmljZVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UgKCk6IENhcGl0YWxpc21TZXJ2aWNlIHtcbiAgICBpZiAoIUNhcGl0YWxpc21TZXJ2aWNlLl9pbnN0YW5jZSkge1xuICAgICAgQ2FwaXRhbGlzbVNlcnZpY2UuX2luc3RhbmNlID0gbmV3IENhcGl0YWxpc21TZXJ2aWNlKClcbiAgICB9XG4gICAgcmV0dXJuIENhcGl0YWxpc21TZXJ2aWNlLl9pbnN0YW5jZVxuICB9XG5cbiAgcHJpdmF0ZSBfbW9uZXk6IG51bWJlclxuICBwcml2YXRlIF9pdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtdXG4gIHByaXZhdGUgX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXA6IHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTwoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHZvaWQ+LFxuICB9ID0ge31cblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5faXRlbUNvbmZpZ3MgPSBpdGVtQ29uZmlnc1xuICAgIHRoaXMuX21vbmV5ID0gU1RBUlRfTU9ORVlcbiAgICB0aGlzLl9sb2FkRGF0YSgpXG4gICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gKCkgPT4ge1xuICAgICAgdGhpcy5fc2F2ZURhdGEoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX25vdGlmeUl0ZW1Db25maWdVcGRhdGVkID0gKGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnKSA9PiB7XG4gICAgaWYgKCF0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1Db25maWcudXVpZF0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1Db25maWcudXVpZF0uZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgIGZuKGl0ZW1Db25maWcpXG4gICAgfSlcbiAgfVxuXG5cbiAgcHJpdmF0ZSBfbG9hZERhdGEgPSAoKSA9PiB7XG4gICAgY29uc3QganNvbkRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SRV9LRVkpXG4gICAgaWYgKCFqc29uRGF0YSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHN0b3JlRGF0YTogU3RvcmVkRGF0YSA9IEpTT04ucGFyc2UoanNvbkRhdGEpXG5cbiAgICBjb25zdCBsb2FkZWRJdGVtQ29uZmlnczogSXRlbVR5cGVzLkl0ZW1Db25maWdbXSA9IFtdXG4gICAgbGV0IGl0ZW1Qcm9kdWNpbmdTY2hlZHVsZWQ6IEl0ZW1Qcm9kdWNpbmdTY2hlZHVsZWQgPSB7fVxuICAgIGxldCBhZGRpdGlvbmFsTW9uZXkgPSAwXG4gICAgc3RvcmVEYXRhLml0ZW1Db25maWdzLmZvckVhY2goKHN0b3JlZEl0ZW1Db25maWcpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxJdGVtQ29uZmlnID0gaXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBzdG9yZWRJdGVtQ29uZmlnLnV1aWQpXG4gICAgICBjb25zdCBpdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZyA9IHtcbiAgICAgICAgLi4uaW5pdGlhbEl0ZW1Db25maWcsXG4gICAgICAgIC4uLnN0b3JlZEl0ZW1Db25maWcsXG4gICAgICAgIHByb2R1Y3Rpb25TdGFydEF0OiBudWxsLFxuICAgICAgfVxuICAgICAgaWYgKHN0b3JlZEl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQpIHtcbiAgICAgICAgaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdCA9IG5ldyBEYXRlKHN0b3JlZEl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQpXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmY6IG51bWJlciA9IG5vdy5nZXRUaW1lKCkgLSBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0LmdldFRpbWUoKVxuICAgICAgICBsZXQgY3VycmVudFByb2R1Y3Rpb25TZWNvbmRzID0gbnVsbFxuICAgICAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICAgICAgY29uc3QgcHJvZHVjZWRBbW91bnQgPSBNYXRoLmZsb29yKHRpbWVEaWZmIC8gaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSlcbiAgICAgICAgICBhZGRpdGlvbmFsTW9uZXkgKz0gcHJvZHVjZWRBbW91bnQgKiBpdGVtQ29uZmlnLnJldmVudWVGbihpdGVtQ29uZmlnLmxldmVsKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGZpbmlzaGVkID0gdGltZURpZmYgPj0gaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZVxuICAgICAgICAgICAgJiYgKGl0ZW1Db25maWcucHJvZHVjdGlvblN0YXJ0QXQuZ2V0VGltZSgpICsgaXRlbUNvbmZpZy5wcm9kdWN0aW9uVGltZSA+IG5ldyBEYXRlKHN0b3JlRGF0YS5zYXZlZEF0KS5nZXRUaW1lKCkpXG4gICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsTW9uZXkgKz0gaXRlbUNvbmZpZy5yZXZlbnVlRm4oaXRlbUNvbmZpZy5sZXZlbClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxvYWRlZEl0ZW1Db25maWdzLnB1c2goaXRlbUNvbmZpZylcbiAgICB9KVxuICAgIHRoaXMuX2l0ZW1Db25maWdzID0gbG9hZGVkSXRlbUNvbmZpZ3MsXG4gICAgdGhpcy5fbW9uZXkgPSBzdG9yZURhdGEubW9uZXkgKyBhZGRpdGlvbmFsTW9uZXlcbiAgfVxuXG4gIHByaXZhdGUgX3NhdmVEYXRhID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlZERhdGE6IFN0b3JlZERhdGEgPSB7XG4gICAgICBpdGVtQ29uZmlnczogdGhpcy5faXRlbUNvbmZpZ3MubWFwKChpdGVtQ29uZmlnKSA9PiAoe1xuICAgICAgICB1dWlkOiBpdGVtQ29uZmlnLnV1aWQsXG4gICAgICAgIGxldmVsOiBpdGVtQ29uZmlnLmxldmVsLFxuICAgICAgICBwdXJjaGFzZWQ6IGl0ZW1Db25maWcucHVyY2hhc2VkLFxuICAgICAgICBoYXNNYW5hZ2VyOiBpdGVtQ29uZmlnLmhhc01hbmFnZXIsXG4gICAgICAgIHByb2R1Y3Rpb25TdGFydEF0OiBpdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0ID8gaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC50b0lTT1N0cmluZygpIDogbnVsbCxcbiAgICAgIH0pKSxcbiAgICAgIG1vbmV5OiB0aGlzLl9tb25leSxcbiAgICAgIHNhdmVkQXQ6IG5ldyBEYXRlKClcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkVfS0VZLCBKU09OLnN0cmluZ2lmeShzdG9yZWREYXRhKSlcbiAgfVxuXG4gIHB1YmxpYyBsb2FkSXRlbUNvbmZpZ3MgPSAoKSA9PiB0aGlzLl9pdGVtQ29uZmlnc1xuXG4gIHB1YmxpYyBsb2FkTW9uZXkgPSAoKSA9PiB0aGlzLl9tb25leVxuXG4gIHB1YmxpYyB1cGRhdGVNb25leSA9IChtb25leTogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5fbW9uZXkgPSBtb25leVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUl0ZW1Qcm9kdWNpbmdUaW1lID0gKGl0ZW1VdWlkOiBzdHJpbmcsIGRhdGU6IERhdGUgPSBuZXcgRGF0ZSgpKSA9PiB7XG4gICAgY29uc3QgaXRlbUNvbmZpZyA9IHRoaXMuX2l0ZW1Db25maWdzLmZpbmQoKGl0ZW1Db25maWcpID0+IGl0ZW1Db25maWcudXVpZCA9PT0gaXRlbVV1aWQpXG4gICAgaXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdCA9IGRhdGVcbiAgfVxuXG4gIHB1YmxpYyBnZXRJdGVtQ29uZmlnQnlVdWlkID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICByZXR1cm4geyAuLi5pdGVtQ29uZmlnIH1cbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVJdGVtQ29uZmlnID0gKGl0ZW1VdWlkOiBzdHJpbmcsIGZuOiAoaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcpID0+IHZvaWQpID0+IHtcbiAgICBpZiAoIXRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdKSB7XG4gICAgICB0aGlzLl9pdGVtQ29uZmlnTGlzdGVuZXJzTWFwW2l0ZW1VdWlkXSA9IFtdXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWdMaXN0ZW5lcnNNYXBbaXRlbVV1aWRdLnB1c2goZm4pXG4gIH1cblxuICBwdWJsaWMgcHVyY2hhc2VJdGVtID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICBpdGVtQ29uZmlnLnB1cmNoYXNlZCA9IHRydWVcbiAgICB0aGlzLl9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZChpdGVtQ29uZmlnKVxuICB9XG5cbiAgcHVibGljIHVwZ3JhZGVJdGVtID0gKGl0ZW1VdWlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlnID0gdGhpcy5faXRlbUNvbmZpZ3MuZmluZCgoaXRlbUNvbmZpZykgPT4gaXRlbUNvbmZpZy51dWlkID09PSBpdGVtVXVpZClcbiAgICBpdGVtQ29uZmlnLmxldmVsICs9IDFcbiAgfVxuXG4gIHB1YmxpYyBoaXJlTWFuYWdlciA9IChpdGVtVXVpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaXRlbUNvbmZpZyA9IHRoaXMuX2l0ZW1Db25maWdzLmZpbmQoKGl0ZW1Db25maWcpID0+IGl0ZW1Db25maWcudXVpZCA9PT0gaXRlbVV1aWQpXG4gICAgaWYgKCFpdGVtQ29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIGl0ZW0gY29uZmlnIGZvciAke2l0ZW1Db25maWcubmFtZX1gKVxuICAgIH1cbiAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgaGF2ZSBhIG1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWApXG4gICAgfVxuICAgIGl0ZW1Db25maWcuaGFzTWFuYWdlciA9IHRydWVcbiAgICB0aGlzLl9ub3RpZnlJdGVtQ29uZmlnVXBkYXRlZChpdGVtQ29uZmlnKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcGl0YWxpc21TZXJ2aWNlXG4iLCJpbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2UnXG5jbGFzcyBXYWxsZXQge1xuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IFdhbGxldFxuICBwcml2YXRlIF9jYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2VcbiAgcHJpdmF0ZSBfY3VycmVudE1vbmV5OiBudW1iZXJcbiAgcHJpdmF0ZSBfbW9uZXlMaXN0ZW5lcjogQXJyYXk8KG1vbmV5OiBudW1iZXIpID0+IHZvaWQ+ID0gW11cbiAgcHJpdmF0ZSBfbG9jazogQm9vbGVhbiA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IgKGJhc2VNb25leTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UgPSBDYXBpdGFsaXNtU2VydmljZS5nZXRJbnN0YW5jZSgpXG4gICAgdGhpcy5fY3VycmVudE1vbmV5ID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UubG9hZE1vbmV5KClcbiAgfVxuXG4gIHByaXZhdGUgX25vdGlmeU1vbmV5Q2hhbmdlID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLnVwZGF0ZU1vbmV5KHRoaXMuX2N1cnJlbnRNb25leSlcbiAgICB0aGlzLl9tb25leUxpc3RlbmVyLmZvckVhY2goKGZuKSA9PiBmbih0aGlzLl9jdXJyZW50TW9uZXkpKVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSA9ICgpID0+IHtcbiAgICBpZiAoIVdhbGxldC5faW5zdGFuY2UpIHtcbiAgICAgIFdhbGxldC5faW5zdGFuY2UgPSBuZXcgV2FsbGV0KDEwMDApXG4gICAgfVxuICAgIHJldHVybiBXYWxsZXQuX2luc3RhbmNlXG4gIH1cblxuICBwdWJsaWMgZ2V0TW9uZXkgPSAoKSA9PiB0aGlzLl9jdXJyZW50TW9uZXkudG9GaXhlZCgyKVxuXG4gIHB1YmxpYyBvbkFkZE1vbmV5ID0gKG1vbmV5OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgKz0gbW9uZXlcbiAgICB0aGlzLl9ub3RpZnlNb25leUNoYW5nZSgpXG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlTW9uZXkgPSAoZm46IChtb25leTogbnVtYmVyKSA9PiB2b2lkKSA9PiB7XG4gICAgdGhpcy5fbW9uZXlMaXN0ZW5lci5wdXNoKGZuKVxuICB9XG5cbiAgLy8gU2ltcGxlIGxvY2tpbmdcbiAgcHVibGljIGNoYXJnZU1vbmV5ID0gYXN5bmMgKG1vbmV5OiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAodGhpcy5fbG9jaykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMuX2xvY2sgPSB0cnVlXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRNb25leSA8IG1vbmV5KSB7XG4gICAgICB0aGlzLl9sb2NrID0gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50TW9uZXkgLT0gbW9uZXlcbiAgICB0aGlzLl9sb2NrID0gZmFsc2VcbiAgICB0aGlzLl9ub3RpZnlNb25leUNoYW5nZSgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXYWxsZXRcbiIsImltcG9ydCB7IERJU1BMQVlfREVDSU1BTCwgaXRlbUNvbmZpZ3MgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4uL3R5cGVzL0l0ZW0udHlwZSdcbmltcG9ydCBXYWxsZXQgZnJvbSAnLi4vV2FsbGV0J1xuaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2NhcGl0YWxpc20uc2VydmljZSdcblxuY2xhc3MgSXRlbSB7XG4gIHByaXZhdGUgX2l0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnXG4gIHByaXZhdGUgX3dhbGxldDogV2FsbGV0XG4gIHByaXZhdGUgX2NhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZVxuXG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50XG4gIHByaXZhdGUgX3RpdGxlRWxlbTogSFRNTEVsZW1lbnRcbiAgcHJpdmF0ZSBfdXBncmFkZUNvc3RFbGVtOiBIVE1MRWxlbWVudFxuICBwcml2YXRlIF9yZXZlbnVlRWxlbTogSFRNTEVsZW1lbnRcbiAgcHJpdmF0ZSBfcHJvZ3Jlc3NFbGVtOiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgX3JldmVudWU6IG51bWJlclxuICBwcml2YXRlIF91cGdyYWRlQ29zdDogbnVtYmVyXG4gIHByaXZhdGUgX2lzUHJvZHVjaW5nOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBfY3VycmVudFByb2R1Y2luZzogUHJvbWlzZTx2b2lkPiA9IG51bGxcblxuICBjb25zdHJ1Y3RvciAoXG4gICAgaXRlbUNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcsXG4gICAgd2FsbGV0OiBXYWxsZXQsXG4gICAgY2FwaXRhbGlzbVNlcnZpY2U6IENhcGl0YWxpc21TZXJ2aWNlXG4gICkge1xuICAgIC8vIENvcHkgQ29uZmlnXG4gICAgdGhpcy5faXRlbUNvbmZpZyA9IHsgLi4uaXRlbUNvbmZpZyB9XG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0XG4gICAgdGhpcy5fcmV2ZW51ZSA9IGl0ZW1Db25maWcucmV2ZW51ZUZuKGl0ZW1Db25maWcubGV2ZWwpXG4gICAgdGhpcy5fdXBncmFkZUNvc3QgPSBpdGVtQ29uZmlnLnVwZ3JhZGVDb3N0Rm4oaXRlbUNvbmZpZy5sZXZlbClcbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSA9IGNhcGl0YWxpc21TZXJ2aWNlXG5cbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZS5zdWJzY3JpYmVJdGVtQ29uZmlnKGl0ZW1Db25maWcudXVpZCwgdGhpcy51cGRhdGVDb25maWcpXG5cbiAgICAvLyBJbml0aWFsaXppbmcgY29tcG9uZW50XG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSAnaXRlbSdcbiAgICB0aGlzLl9lbGVtZW50LmlkID0gdGhpcy5faXRlbUNvbmZpZy5uYW1lXG5cbiAgICB0aGlzLl90aXRsZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX3RpdGxlRWxlbS5jbGFzc05hbWUgPSAnbmFtZSdcbiAgICB0aGlzLl90aXRsZUVsZW0uaW5uZXJUZXh0ID0gdGhpcy5faXRlbUNvbmZpZy5uYW1lXG4gICAgdGhpcy5fdGl0bGVFbGVtLm9uY2xpY2sgPSB0aGlzLmhhbmRsZVByb2R1Y2VcblxuICAgIGNvbnN0IHByb2R1Y3Rpb25UaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9kdWN0aW9uVGltZS5jbGFzc05hbWUgPSAncHJvZHVjdGlvbi10aW1lJ1xuICAgIHByb2R1Y3Rpb25UaW1lLmlubmVyVGV4dCA9IGB0YWtlOiAkeyh0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25UaW1lIC8gMTAwMCkudG9GaXhlZCgwKX0gc2BcblxuICAgIHRoaXMuX3JldmVudWVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLl9yZXZlbnVlRWxlbS5jbGFzc05hbWUgPSAncmV2ZW51ZSdcblxuICAgIHRoaXMuX3VwZ3JhZGVDb3N0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fdXBncmFkZUNvc3RFbGVtLmNsYXNzTmFtZSA9ICd1cGdyYWRlJ1xuICAgIHRoaXMuX3VwZ3JhZGVDb3N0RWxlbS5vbmNsaWNrID0gdGhpcy5oYW5kbGVVcGdyYWRlXG5cbiAgICB0aGlzLl9wcm9ncmVzc0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX3Byb2dyZXNzRWxlbSAuY2xhc3NOYW1lID0gJ3Byb2dyZXNzJ1xuXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90aXRsZUVsZW0pXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9yZXZlbnVlRWxlbSlcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHByb2R1Y3Rpb25UaW1lKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdXBncmFkZUNvc3RFbGVtKVxuICAgIHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcHJvZ3Jlc3NFbGVtKVxuICAgIGlmICh0aGlzLl9pdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1hbmFnZXIoKVxuICAgIH1cblxuICAgIC8vIFJlbmRlciB1cGRhdGUgY29zdCBhbmQgcmV2ZW51ZVxuICAgIHRoaXMucmVuZGVyUmV2ZW51ZUFuZFVwZ3JhZGVDb3N0KClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29uZmlnID0gKGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnKSA9PiB7XG4gICAgaWYgKHRoaXMuX2l0ZW1Db25maWcubmFtZSAhPT0gaXRlbUNvbmZpZy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcnZpY2UgdXBkYXRlcyB3aXRoIGRpZmZlcmVudCBpdGVtIGNvbmZpZycpXG4gICAgfVxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSBpdGVtQ29uZmlnXG4gICAgdGhpcy5yZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QoKVxuICAgIGlmIChpdGVtQ29uZmlnLmhhc01hbmFnZXIpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1hbmFnZXIoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1hbmFnZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgdGhpcy5fdGl0bGVFbGVtLm9uY2xpY2sgPSBudWxsXG4gICAgdGhpcy5fdGl0bGVFbGVtLmlubmVyVGV4dCA9IGAke3RoaXMuX2l0ZW1Db25maWcubmFtZX0gKGhhcyBtYW5hZ2VyKWBcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0gdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuZ2V0SXRlbUNvbmZpZ0J5VXVpZCh0aGlzLl9pdGVtQ29uZmlnLnV1aWQpXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGxldCBpbml0aWFsUHJvZ3Jlc3NUaW1lID0gMFxuICAgIGlmICh0aGlzLl9jdXJyZW50UHJvZHVjaW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLl9jdXJyZW50UHJvZHVjaW5nXG4gICAgfSBlbHNlIGlmICh0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0KSB7XG4gICAgICBjb25zdCB1bmRlclByb2R1Y2luZyA9ICh0aGlzLl9pdGVtQ29uZmlnLnByb2R1Y3Rpb25TdGFydEF0LmdldFRpbWUoKSArIHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblRpbWUpID4gbm93LmdldFRpbWUoKVxuICAgICAgaWYgKHVuZGVyUHJvZHVjaW5nKSB7XG4gICAgICAgIGluaXRpYWxQcm9ncmVzc1RpbWUgPSBub3cuZ2V0VGltZSgpIC0gdGhpcy5faXRlbUNvbmZpZy5wcm9kdWN0aW9uU3RhcnRBdC5nZXRUaW1lKClcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVjdXJzaXZlUHJvZHVjaW5nID0gYXN5bmMgKCk6IFByb21pc2U8KCkgPT4gdm9pZD4gPT4ge1xuICAgICAgYXdhaXQgdGhpcy5fcHJvZHVjZUl0ZW0oaW5pdGlhbFByb2dyZXNzVGltZSlcbiAgICAgIGluaXRpYWxQcm9ncmVzc1RpbWUgPSAwXG4gICAgICByZXR1cm4gcmVjdXJzaXZlUHJvZHVjaW5nKClcbiAgICB9XG4gICAgcmVjdXJzaXZlUHJvZHVjaW5nKClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHByaXZhdGUgX3Byb2R1Y2VJdGVtID0gYXN5bmMgKHByb2dyZXNzVGltZSA9IDApOiBQcm9taXNlPHZvaWQ+ID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzUHJvZHVjaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5faXNQcm9kdWNpbmcgPSB0cnVlXG4gICAgaWYgKHByb2dyZXNzVGltZSA9PT0gMCkge1xuICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBkYXRlSXRlbVByb2R1Y2luZ1RpbWUodGhpcy5faXRlbUNvbmZpZy51dWlkKVxuICAgIH1cbiAgICB0aGlzLl9wcm9ncmVzc0VsZW0uaW5uZXJUZXh0ID0gYCR7KHByb2dyZXNzVGltZSAvIDEwMDApLnRvRml4ZWQoMSl9IHNgXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBwcm9ncmVzc1RpbWUgKz0gMTAwXG4gICAgICB0aGlzLl9wcm9ncmVzc0VsZW0uaW5uZXJUZXh0ID0gYCR7KHByb2dyZXNzVGltZSAvIDEwMDApLnRvRml4ZWQoMSl9IHNgXG4gICAgfSwgMTAwKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbClcbiAgICAgIHRoaXMuX3Byb2dyZXNzRWxlbS5pbm5lclRleHQgPSAnJ1xuICAgICAgdGhpcy5fd2FsbGV0Lm9uQWRkTW9uZXkodGhpcy5fcmV2ZW51ZSlcbiAgICAgIHRoaXMuX2lzUHJvZHVjaW5nID0gZmFsc2VcbiAgICAgIHJlc29sdmUoKVxuICAgIH0sIHRoaXMuX2l0ZW1Db25maWcucHJvZHVjdGlvblRpbWUgLSBwcm9ncmVzc1RpbWUpXG4gIH0pXG5cbiAgcHJpdmF0ZSBoYW5kbGVVcGdyYWRlID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGlzUGF5ZWQgPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkodGhpcy5fdXBncmFkZUNvc3QpXG4gICAgaWYgKCFpc1BheWVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UudXBncmFkZUl0ZW0odGhpcy5faXRlbUNvbmZpZy51dWlkKVxuICAgIHRoaXMuX2l0ZW1Db25maWcgPSB7IC4uLnRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLmdldEl0ZW1Db25maWdCeVV1aWQodGhpcy5faXRlbUNvbmZpZy51dWlkKX1cbiAgICB0aGlzLnJlbmRlclJldmVudWVBbmRVcGdyYWRlQ29zdCgpXG4gICAgdGhpcy5fcmV2ZW51ZSA9IHRoaXMuX2l0ZW1Db25maWcucmV2ZW51ZUZuKHRoaXMuX2l0ZW1Db25maWcubGV2ZWwpXG4gICAgdGhpcy5fdXBncmFkZUNvc3QgPSB0aGlzLl9pdGVtQ29uZmlnLnVwZ3JhZGVDb3N0Rm4odGhpcy5faXRlbUNvbmZpZy5sZXZlbClcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUHJvZHVjZSA9ICgpID0+IHtcbiAgICB0aGlzLl9jdXJyZW50UHJvZHVjaW5nID0gdGhpcy5fcHJvZHVjZUl0ZW0oKVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJSZXZlbnVlQW5kVXBncmFkZUNvc3QgKCkge1xuICAgIHRoaXMuX3VwZ3JhZGVDb3N0RWxlbS5pbm5lclRleHQgPSAgYHVwZ3JhZGU6ICR7dGhpcy5fdXBncmFkZUNvc3QudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgICB0aGlzLl9yZXZlbnVlRWxlbS5pbm5lclRleHQgPSBgJCAke3RoaXMuX3JldmVudWUudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbGVtZW50ID0gKCkgPT4gdGhpcy5fZWxlbWVudFxufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtXG4iLCJpbXBvcnQgeyBESVNQTEFZX0RFQ0lNQUwgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgSXRlbVR5cGVzIGZyb20gJy4uL3R5cGVzL0l0ZW0udHlwZSdcbmltcG9ydCBXYWxsZXQgZnJvbSAnLi4vV2FsbGV0J1xuXG5jbGFzcyBJdGVtUHVyY2hhc2Uge1xuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudFxuICBwcml2YXRlIF93YWxsZXQ6IFdhbGxldFxuICBwcml2YXRlIF9pdGVtQ29uZmlnOiBJdGVtVHlwZXMuSXRlbUNvbmZpZ1xuXG4gIHByaXZhdGUgX2lzUHVyY2hhc2luZzogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgX29uUHVyY2hhc2VkOiAoKSA9PiB2b2lkXG5cbiAgY29uc3RydWN0b3IgKFxuICAgIGl0ZW1Db25maWc6IEl0ZW1UeXBlcy5JdGVtQ29uZmlnLFxuICAgIHdhbGxldDogV2FsbGV0LFxuICAgIG9uUHVyY2hhc2VkOiAoKSA9PiB2b2lkLFxuICApIHtcbiAgICB0aGlzLl9pdGVtQ29uZmlnID0gaXRlbUNvbmZpZ1xuICAgIHRoaXMuX3dhbGxldCA9IHdhbGxldFxuICAgIHRoaXMuX29uUHVyY2hhc2VkID0gb25QdXJjaGFzZWRcblxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NOYW1lID0gJ2l0ZW0nXG4gICAgdGhpcy5fZWxlbWVudC5vbmNsaWNrID0gdGhpcy5oYW5kbGVQdXJjaGFzZVxuICAgIGNvbnN0IHB1cmNoYXNlVGV4dEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHB1cmNoYXNlVGV4dEVsZW0uY2xhc3NOYW1lID0gJ3B1cmNoYXNlLXRleHQnXG4gICAgcHVyY2hhc2VUZXh0RWxlbS5pbm5lclRleHQgPSBgcHVyY2hhc2UgJHtpdGVtQ29uZmlnLm5hbWV9IGZvciAke2l0ZW1Db25maWcucHJpY2UudG9GaXhlZChESVNQTEFZX0RFQ0lNQUwpfWBcbiAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHB1cmNoYXNlVGV4dEVsZW0pXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVB1cmNoYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc1B1cmNoYXNpbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9pc1B1cmNoYXNpbmcgPSB0cnVlXG4gICAgY29uc3QgcGF5ZWQ6IGJvb2xlYW4gPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkodGhpcy5faXRlbUNvbmZpZy5wcmljZSlcbiAgICBpZiAoIXBheWVkKSB7XG4gICAgICB0aGlzLl9pc1B1cmNoYXNpbmcgPSBmYWxzZVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuX2lzUHVyY2hhc2luZyA9IGZhbHNlXG4gICAgdGhpcy5fb25QdXJjaGFzZWQoKVxuICB9XG5cbiAgcHVibGljIGdldEVsZW1lbnQgPSAoKSA9PiB0aGlzLl9lbGVtZW50XG59XG5cbmV4cG9ydCBkZWZhdWx0IEl0ZW1QdXJjaGFzZVxuIiwiaW1wb3J0IENhcGl0YWxpc21TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2NhcGl0YWxpc20uc2VydmljZSdcbmltcG9ydCBXYWxsZXQgZnJvbSAnLi4vV2FsbGV0J1xuXG5jbGFzcyBIaXJlTWFuYWdlciB7XG4gIHByaXZhdGUgX2NhcGl0YWxpc21TZXJ2aWNlOiBDYXBpdGFsaXNtU2VydmljZVxuICBwcml2YXRlIF93YWxsZXQ6IFdhbGxldFxuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChcbiAgICBjYXBpdGFsaXNtU2VydmljZTogQ2FwaXRhbGlzbVNlcnZpY2UsXG4gICAgd2FsbGV0OiBXYWxsZXQsXG4gICAgY2xvc2VIaXJlTWFuYWdlcjogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLl9jYXBpdGFsaXNtU2VydmljZSA9IGNhcGl0YWxpc21TZXJ2aWNlXG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0XG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSAnaGlyZS1tYW5hZ2VyLXdyYXBwZXInXG5cbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgY2xvc2VCdXR0b24uaW5uZXJUZXh0ID0gJ0Nsb3NlJ1xuICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSBjbG9zZUhpcmVNYW5hZ2VyXG4gICAgdGhpcy5fZWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbilcbiAgICB0aGlzLmFwcGVuZE1hbmFnZXJFbGVtZW50cygpXG4gIH1cblxuICBwcml2YXRlIGFwcGVuZE1hbmFnZXJFbGVtZW50cyA9ICgpID0+IHtcbiAgICBjb25zdCBpdGVtQ29uZmlncyA9IHRoaXMuX2NhcGl0YWxpc21TZXJ2aWNlLmxvYWRJdGVtQ29uZmlncygpXG4gICAgaXRlbUNvbmZpZ3MuZm9yRWFjaCgoaXRlbUNvbmZpZykgPT4ge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9ICdoaXJlLW1hbmFnZXInXG4gICAgICBpZiAoaXRlbUNvbmZpZy5oYXNNYW5hZ2VyKSB7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJUZXh0ID0gYEhpcmVkIE1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJUZXh0ID0gYE1hbmFnZXIgZm9yICR7aXRlbUNvbmZpZy5uYW1lfSAoY29zdCAkJHtpdGVtQ29uZmlnLm1hbmFnZXJQcmljZX0pYFxuICAgICAgfVxuICAgICAgd3JhcHBlci5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWl0ZW1Db25maWcucHVyY2hhc2VkKSB7XG4gICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwdXJjaGFzZSBpdGVtIGZpcnN0JylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1BhaWQgPSBhd2FpdCB0aGlzLl93YWxsZXQuY2hhcmdlTW9uZXkoaXRlbUNvbmZpZy5tYW5hZ2VyUHJpY2UpXG4gICAgICAgIGlmICghaXNQYWlkKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FwaXRhbGlzbVNlcnZpY2UuaGlyZU1hbmFnZXIoaXRlbUNvbmZpZy51dWlkKVxuICAgICAgICB3cmFwcGVyLm9uY2xpY2sgPSBudWxsXG4gICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lICs9ICcgcHVyY2hhc2VkJ1xuICAgICAgICB3cmFwcGVyLmlubmVyVGV4dCA9IGBIaXJlZCBNYW5hZ2VyIGZvciAke2l0ZW1Db25maWcubmFtZX1gXG4gICAgICB9XG4gICAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKHdyYXBwZXIpXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbGVtZW50ID0gKCk6IEhUTUxFbGVtZW50ID0+IHRoaXMuX2VsZW1lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgSGlyZU1hbmFnZXJcbiIsImltcG9ydCBJdGVtVHlwZXMgZnJvbSAnLi90eXBlcy9JdGVtLnR5cGUnXG5pbXBvcnQgV2FsbGV0IGZyb20gJy4vV2FsbGV0J1xuaW1wb3J0IHsgRElTUExBWV9ERUNJTUFMLCBpdGVtQ29uZmlncyB9IGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IEl0ZW0gZnJvbSAnLi9jb21wb25lbnRzL0l0ZW0nXG5pbXBvcnQgSXRlbVB1cmNoYXNlIGZyb20gJy4vY29tcG9uZW50cy9JdGVtUHVyY2hhc2UnXG5pbXBvcnQgQ2FwaXRhbGlzbVNlcnZpY2UgZnJvbSAnLi9zZXJ2aWNlcy9jYXBpdGFsaXNtLnNlcnZpY2UnXG5pbXBvcnQgSGlyZU1hbmFnZXIgZnJvbSAnLi9jb21wb25lbnRzL0hpcmVNYW5hZ2VyJ1xuXG50eXBlIEl0ZW1NYXBQcm9wZXJ0eSA9IHtcbiAgICBvcmRlcjogbnVtYmVyLFxuICAgIGNvbmZpZzogSXRlbVR5cGVzLkl0ZW1Db25maWcsXG4gICAgaXRlbT86IEl0ZW0sXG4gICAgaXRlbVB1cmNoYXNlPzogSXRlbVB1cmNoYXNlLFxufVxuXG5cbmNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJz09PT0gSW5pdGlhbGl6aW5nIHN0YXJ0ID09PT0nKVxuXG4gICAgY29uc3QgaXRlbXM6IHsgW2tleTogc3RyaW5nXTogSXRlbU1hcFByb3BlcnR5fSA9IHt9XG4gICAgY29uc3Qgd2FsbGV0ID0gV2FsbGV0LmdldEluc3RhbmNlKClcbiAgICBjb25zdCBjYXBpdGFsaXNtU2VydmljZSA9IENhcGl0YWxpc21TZXJ2aWNlLmdldEluc3RhbmNlKClcblxuICAgIGNvbnN0IGFwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxuICAgIGlmICghYXBwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gI2FwcCBlbGVtZW50IHRvIGF0dGFjaCBnYW1lIGVsZW1lbnRzJylcbiAgICB9XG4gICAgY29uc3QgdG90YWxNb25leSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdG90YWxNb25leS5jbGFzc05hbWUgPSAndG90YWwgbW9uZXknXG4gICAgdG90YWxNb25leS5pbm5lclRleHQgPSBgdG90YWw6ICR7d2FsbGV0LmdldE1vbmV5KCl9YFxuICAgIGFwcC5hcHBlbmRDaGlsZCh0b3RhbE1vbmV5KVxuICAgIHdhbGxldC5zdWJzY3JpYmVNb25leSgobW9uZXk6IG51bWJlcikgPT4ge1xuICAgICAgICB0b3RhbE1vbmV5LmlubmVyVGV4dCA9IGB0b3RhbDogJHttb25leS50b0ZpeGVkKERJU1BMQVlfREVDSU1BTCl9YFxuICAgIH0pXG4gICAgY29uc3QgaXRlbXNXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBhcHAuYXBwZW5kQ2hpbGQoaXRlbXNXcmFwcGVyKVxuICAgIGNvbnN0IGl0ZW1Db25maWdzID0gY2FwaXRhbGlzbVNlcnZpY2UubG9hZEl0ZW1Db25maWdzKClcbiAgICBpdGVtQ29uZmlncy5mb3JFYWNoKChpdGVtQ29uZmlnLCBpZHgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFByb3BlcnR5OiBJdGVtTWFwUHJvcGVydHkgPSB7XG4gICAgICAgICAgICBjb25maWc6IGl0ZW1Db25maWcsXG4gICAgICAgICAgICBvcmRlcjogaWR4XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW1Db25maWcucHVyY2hhc2VkKSB7XG4gICAgICAgICAgICBjdXJyZW50UHJvcGVydHkuaXRlbSA9IG5ldyBJdGVtKFxuICAgICAgICAgICAgICAgIGl0ZW1Db25maWcsXG4gICAgICAgICAgICAgICAgd2FsbGV0LFxuICAgICAgICAgICAgICAgIGNhcGl0YWxpc21TZXJ2aWNlLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaXRlbXNXcmFwcGVyLmFwcGVuZENoaWxkKGN1cnJlbnRQcm9wZXJ0eS5pdGVtLmdldEVsZW1lbnQoKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRQcm9wZXJ0eS5pdGVtUHVyY2hhc2UgPSBuZXcgSXRlbVB1cmNoYXNlKFxuICAgICAgICAgICAgICAgIGl0ZW1Db25maWcsXG4gICAgICAgICAgICAgICAgd2FsbGV0LFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FwaXRhbGlzbVNlcnZpY2UucHVyY2hhc2VJdGVtKGl0ZW1Db25maWcudXVpZClcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbaXRlbUNvbmZpZy51dWlkXS5pdGVtID0gbmV3IEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FwaXRhbGlzbVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNXcmFwcGVyLnJlcGxhY2VDaGlsZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2l0ZW1Db25maWcudXVpZF0uaXRlbS5nZXRFbGVtZW50KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1dyYXBwZXIuY2hpbGROb2Rlc1tpZHhdXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpdGVtc1dyYXBwZXIuYXBwZW5kQ2hpbGQoY3VycmVudFByb3BlcnR5Lml0ZW1QdXJjaGFzZS5nZXRFbGVtZW50KCkpXG4gICAgICAgIH1cbiAgICAgICAgaXRlbXNbaXRlbUNvbmZpZy51dWlkXSA9IGN1cnJlbnRQcm9wZXJ0eVxuICAgIH0pXG5cbiAgICBjb25zdCBoaXJlTWFuYWdlckJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgaGlyZU1hbmFnZXJCdXR0b24uY2xhc3NOYW1lID0gJ2hpcmUtbWFuYWdlci1idXR0b24nXG4gICAgaGlyZU1hbmFnZXJCdXR0b24uaW5uZXJUZXh0ID0gJ0hpcmUgTWFuYWdlcidcbiAgICBoaXJlTWFuYWdlckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgaGlyZU1hbmFnZXJFbGVtOiBIVE1MRWxlbWVudFxuICAgICAgICBjb25zdCBoaXJlTWFuYWdlciA9IG5ldyBIaXJlTWFuYWdlcihcbiAgICAgICAgICAgIGNhcGl0YWxpc21TZXJ2aWNlLFxuICAgICAgICAgICAgd2FsbGV0LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFwcC5yZW1vdmVDaGlsZChoaXJlTWFuYWdlckVsZW0pXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgaGlyZU1hbmFnZXJFbGVtID0gaGlyZU1hbmFnZXIuZ2V0RWxlbWVudCgpXG4gICAgICAgIGFwcC5hcHBlbmRDaGlsZChoaXJlTWFuYWdlckVsZW0pXG4gICAgfVxuICAgIGFwcC5hcHBlbmRDaGlsZChoaXJlTWFuYWdlckJ1dHRvbilcbiAgICBjb25zb2xlLmxvZygnPT09PSBJbml0aWFsaXplZCA9PT09Jylcbn1cblxuaW5pdCgpXG4iXSwic291cmNlUm9vdCI6IiJ9